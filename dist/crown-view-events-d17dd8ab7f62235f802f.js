(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{129:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=a(n(1)),i=a(n(2)),u=a(n(4)),l=(a(n(84)),a(n(5)),a(n(98)));a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}r.default.Radio.channel("global"),o=function(){var t=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(i.default.View);return t.prototype.tagName="p",t.prototype.template=u.default.renderable((function(t){var e,n,o,r,i,a;if(u.default.text(l.default.utc(t.start).format("MMMM D, YYYY")),u.default.text(", "),(null!=t?t.pretext:void 0)&&u.default.small((function(){return u.default.text(t.pretext),u.default.text(" ")})),(null!=t?t.journal:void 0)&&(u.default.text(t.journal),u.default.text(", ")),(null!=t?t.authors:void 0)&&(u.default.text(t.authors),u.default.text(", ")),u.default.a({href:t.link},t.title),null!=t&&null!=(r=t.extra)?r.length:void 0){for(a=[],e=0,o=(i=t.extra).length;e<o;e++)n=i[e],u.default.text(", "),a.push(u.default.a({href:n.link},n.name));return a}})),t}.call(void 0),e.default=o},329:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=(s(n(5)),s(n(1))),l=s(n(2)),a=s(n(4)),c=(s(n(98)),s(n(330)));function s(t){return t&&t.__esModule?t:{default:t}}o=u.default.Radio.channel("global"),u.default.Radio.channel("messages"),u.default.Radio.channel("crown"),r=function(){var t=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"topicsBtnClicked",value:function(t){var e,n,r=this;return e=this.getChildView("content"),n=new c.default({model:this.model}),o.request("show-modal",n),n.on("topics:fetched",(function(t){return r.ui.timelineBtn.show(),r.ui.calendarBtn.show(),e.resetTopics()}))}},{key:"onRender",value:function(){return this.showEventList()}},{key:"showTimeline",value:function(){var t=this;return Promise.all([n.e(67),n.e(21)]).then(function(){var e;return e=new(0,n(488).default)({model:t.model}),t.showChildView("content",e)}.bind(null,n)).catch(n.oe)}},{key:"showCalendar",value:function(){var t=this;return n.e(20).then(function(){var e;return e=new(0,n(489).default)({model:t.model}),t.showChildView("content",e)}.bind(null,n)).catch(n.oe)}},{key:"showEventList",value:function(){var t=this;return n.e(20).then(function(){var e;return e=new(0,n(490).default)({model:t.model}),t.showChildView("content",e)}.bind(null,n)).catch(n.oe)}}]),e}(l.default.View);return t.prototype.template=a.default.renderable((function(t){return a.default.div(".btn-group",{role:"group"},(function(){return a.default.button(".topics-button.btn.btn-outline-warning","Select Topics"),a.default.button(".list-events-button.btn.btn-outline-warning","List Events"),a.default.button(".timeline-btn.btn.btn-outline-warning","Timeline"),a.default.button(".calendar-btn.btn.btn-outline-warning","Calendar")})),a.default.div(".content.col-sm-10.offset-sm-1")})),t.prototype.ui={topicsBtn:".topics-button",listEventsBtn:".list-events-button",timelineBtn:".timeline-btn",calendarBtn:".calendar-btn",content:".content"},t.prototype.regions={content:"@ui.content"},t.prototype.events={"click @ui.topicsBtn":"topicsBtnClicked","click @ui.timelineBtn":"showTimeline","click @ui.calendarBtn":"showCalendar","click @ui.listEventsBtn":"showEventList"},t}.call(void 0),e.default=r},330:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=(p(n(5)),p(n(1))),i=p(n(2)),u=p(n(4));p(n(98)),p(n(204));n(205);var l,a,c,s,f=p(n(34));p(n(129));function p(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}a=r.default.Radio.channel("global"),r.default.Radio.channel("messages"),l=r.default.Radio.channel("crown"),s=function(){var t=function(t){function e(){return d(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,t),o(e,[{key:"onRender",value:function(){return this.ui.input.prop("checked",this.model.get("selected"))}},{key:"toggleInput",value:function(){var t;return t=this.ui.input.is(":checked"),this.ui.input.prop("checked",!t),this.model.set("selected",!t)}}]),e}(i.default.View);return t.prototype.className="form-group form-check",t.prototype.template=u.default.renderable((function(t){return u.default.input(".form-check-input",{type:"checkbox"}),u.default.label(".form-check-label",t.topic)})),t.prototype.ui={input:"input"},t.prototype.events={click:"toggleInput"},t}.call(void 0),c=function(){var t=function(t){function e(){return d(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,t),o(e,[{key:"emptyModal",value:function(){return a.request("main:app:object").getView().getRegion("modal").empty()}},{key:"onRender",value:function(){var t,e,n,o;if(!(t=l.request("get-selected-topics")).length){for(e in n=[],this.model.get("topics"))n.push({topic:e,selected:!1});t=new r.default.Collection(n),l.request("set-selected-topics",t)}return o=new i.default.CollectionView({collection:t,viewComparator:"topic",childView:s}),this.showChildView("topicsRegion",o)}},{key:"okBtnClicked",value:function(){var t,e,n,o=this;return e=l.request("get-selected-topics").filter({selected:!0}),n=this.model.get("topics"),t=[],e.forEach((function(e){var o,r,i;if(i=e.get("topic"),!e.get("eventsModel"))return r=n[i].filename,o=a.request("main:app:get-events",r),t.push(o.fetch()),e.set("eventsModel",o)})),Promise.all(t).then((function(){return o.triggerMethod("topics:fetched")}))}},{key:"onTopicsFetched",value:function(){return this.emptyModal(),l.request("get-selected-topics")}}]),e}(i.default.View);return t.prototype.behaviors=[f.default],t.prototype.template=u.default.renderable((function(t){return u.default.div(".modal-dialog.modal-md",(function(){return u.default.div(".modal-content",(function(){return u.default.div(".topics"),u.default.div(".row",(function(){return u.default.button(".close-btn.btn.btn-warning.fa.fa-close.mr-auto",{data:{dismiss:"modal"}},"Close"),u.default.button(".ok-button.btn.btn-success.fa.fa-check.ml-auto","Ok")}))}))}))})),t.prototype.ui={closeBtn:".close-btn",okBtn:".ok-button",topicsRegion:".topics"},t.prototype.regions={topicsRegion:"@ui.topicsRegion"},t.prototype.events={"click @ui.okBtn":"okBtnClicked","click @ui.closeBtn":"emptyModal"},t}.call(void 0),e.default=c}}]);
//# sourceMappingURL=crown-view-events-d17dd8ab7f62235f802f.js.map