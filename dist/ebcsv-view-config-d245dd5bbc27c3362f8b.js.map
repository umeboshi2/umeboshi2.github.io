{"version":3,"sources":["webpack:///./src/applets/ebcsv/views/config-views/view.coffee"],"names":["AppChannel","Backbone","CfgView","MessageChannel","OptFieldNames","ReqFieldNames","cfg_template","form_group_input_div","mkInputData","navigate_to_url","tc","__webpack_require__","default","Radio","channel","request","field","label","placeholder","input_id","input_attributes","name","renderable","model","div","text","hr","article","dl","i","len","results","length","dt","dd","content","Marionette","View","[object Object]","this","id","destname","ncfg","response","ui","destname_input","val","set","get","add","save","fail","done","msg","template","copy_btn","edit_btn","events","click @ui.copy_btn","click @ui.edit_btn","module","exports"],"mappings":"8EAAA,IAAAA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAT,EAAWU,EAAQ,GACNA,EAAQ,GACrBD,EAAKC,EAAQ,GACJA,EAAQ,IAEGA,EAAQ,IAC5BF,EAAkBE,EAAQ,IAA+BC,UAEvDL,wBAAyBI,EAAQ,KAEnCR,EAAiBF,EAASY,MAAMC,QAAQ,YACxCd,EAAaC,EAASY,MAAMC,QAAQ,SAEpCT,EAAgBL,EAAWe,QAAQ,sBACnCX,EAAgBJ,EAAWe,QAAQ,sBAEnCP,EAAc,SAACQ,EAAOC,EAAOC,UAC3BC,kBAAmBH,IACnBC,MAAOA,EACPG,kBACEC,KAAML,EACNE,YAAaA,KAEjBZ,EAAeI,EAAGY,WAAW,SAACC,UAC5Bb,EAAGc,IAAI,eAAgB,kBACrBjB,EAAqBC,EAAY,WAAY,aAAc,cAC3DE,EAAGc,IAAI,gCAAiC,eACxCd,EAAGc,IAAI,gCAAiC,iBAC1Cd,EAAGc,IAAI,mBAAoB,kBACzBd,EAAGe,uBAAuBF,EAAMF,UAClCX,EAAGgB,KACHhB,EAAGiB,QAAQ,yBAA0B,kBACnCjB,EAAGc,IAAI,QAAS,kBACdd,EAAGkB,GAAG,iBAAkB,WACtB,IAAAZ,EAAAa,EAAAC,EAAAC,EAAA,IAAAA,KAAAF,EAAA,EAAAC,EAAAzB,EAAA2B,OAAAH,EAAAC,EAAAD,WACEnB,EAAGuB,GAAGjB,UACNN,EAAGwB,GAAGX,EAAMY,QAAQnB,gBACxBN,EAAGkB,GAAG,iBAAkB,WACtB,IAAAZ,EAAAa,EAAAC,EAAAC,EAAA,IAAAA,KAAAF,EAAA,EAAAC,EAAA1B,EAAA4B,OAAAH,EAAAC,EAAAD,WACEnB,EAAGuB,GAAGjB,UACNN,EAAGwB,GAAGX,EAAMY,QAAQnB,sBAIxBd,EAAA,iBAANA,UAAsBD,EAASmC,WAAWC,KASxCC,qBACE7B,yBAAuC8B,KAAChB,MAAMiB,MAChDF,cACE,IAAAG,EAAAC,EAAAC,EAEA,GAFM,MACNF,EAAWF,KAACK,GAAGC,eAAeC,aAI9BJ,EAAO1C,EAAWe,QAAQ,cACrBgC,IAAI,OAAQN,GACjBC,EAAKK,IAAI,UAAWR,KAAChB,MAAMyB,IAAI,YAClBhD,EAAWe,QAAQ,oBACrBkC,IAAIP,IACfC,EAAWD,EAAKQ,QACPC,KAAK,kBACZhD,EAAeY,QAAQ,SAAU,gCACnC4B,EAASS,KAAK,WACZ,IAAAC,gCAA2BX,EAAKM,IAAI,UACpC7C,EAAeY,QAAQ,UAAWsC,GAClC5C,yBAAuCiC,EAAKF,QAb5CrC,EAAeY,QAAQ,UAAW,uDAdtCuC,SAAUhD,cACVsC,IACEW,SAAU,gBACVC,SAAU,gBACVX,eAAgB,sCAClBY,QACEC,qBAAsB,cACtBC,qBAAsB,6BAsB1BC,EAAOC,QAAU3D","file":"ebcsv-view-config-d245dd5bbc27c3362f8b.js","sourcesContent":["Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\nmarked = require 'marked'\n\nBootstrapFormView = require 'tbirds/views/bsformview'\nnavigate_to_url = require('tbirds/util/navigate-to-url').default\n\n{ form_group_input_div } = require 'tbirds/templates/forms'\n\nMessageChannel = Backbone.Radio.channel 'messages'\nAppChannel = Backbone.Radio.channel 'ebcsv'\n\nReqFieldNames = AppChannel.request 'csv-req-fieldnames'\nOptFieldNames = AppChannel.request 'csv-opt-fieldnames'\n\nmkInputData = (field, label, placeholder) ->\n  input_id: \"input_#{field}\"\n  label: label\n  input_attributes:\n    name: field\n    placeholder: placeholder\n\ncfg_template = tc.renderable (model) ->\n  tc.div '.form-inline', ->\n    form_group_input_div mkInputData 'destname', 'New Config', 'newconfig'\n    tc.div '#copy-cfg-btn.btn.btn-default', 'Copy Config'\n    tc.div '#edit-cfg-btn.btn.btn-default', 'Edit Config'\n  tc.div '.listview-header', ->\n    tc.text \"Viewing Config #{model.name}\"\n  tc.hr()\n  tc.article '.document-view.content', ->\n    tc.div '.body', ->\n      tc.dl '.dl-horizontal', ->\n        for field in ReqFieldNames\n          tc.dt field\n          tc.dd model.content[field]\n      tc.dl '.dl-horizontal', ->\n        for field in OptFieldNames\n          tc.dt field\n          tc.dd model.content[field]\n  \n\n########################################\nclass CfgView extends Backbone.Marionette.View\n  template: cfg_template\n  ui:\n    copy_btn: '#copy-cfg-btn'\n    edit_btn: '#edit-cfg-btn'\n    destname_input: 'input[name=\"destname\"]'\n  events:\n    'click @ui.copy_btn': 'copy_config'\n    'click @ui.edit_btn': 'edit_config'\n  edit_config: ->\n    navigate_to_url \"#ebcsv/configs/edit/#{@model.id}\"\n  copy_config: ->\n    foo = 'bar'\n    destname = @ui.destname_input.val()\n    if not destname\n      MessageChannel.request 'warning', 'Please input a new config name.'\n      return\n    ncfg = AppChannel.request 'new-ebcfg'\n    ncfg.set 'name', destname\n    ncfg.set 'content', @model.get 'content'\n    collection = AppChannel.request 'ebcfg-collection'\n    collection.add ncfg\n    response = ncfg.save()\n    response.fail ->\n      MessageChannel.request 'danger', 'Failed to save new config!'\n    response.done ->\n      msg = \"Copied new config #{ncfg.get 'name'}\"\n      MessageChannel.request 'success', msg\n      navigate_to_url \"#ebcsv/configs/view/#{ncfg.id}\"\n    \nmodule.exports = CfgView\n\n"],"sourceRoot":""}