(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{227:function(e,t,n){var r,o,i,a,u,c,l,s,d,p,f,b,m,h,v,_,w,g,y,x,k,q,C,$=[].indexOf;n(4),o=n(2),n(3),n(50),C=n(0),_=n(74),n(14),({make_field_input:x,make_field_select:k}=n(43)),({form_group_input_div:g}=n(43)),({modal_close_button:q}=n(54)),s=o.Radio.channel("global"),d=o.Radio.channel("messages"),r=o.Radio.channel("ebcsv"),i=s.request("main:app:BaseModalView"),w="http://bulksell.ebay.com/ws/eBayISAPI.dll?FileExchangeUploadForm",v=new o.Collection,r.reply("get-csvrow-collection",function(){return v}),y=function(){var e,t,n;for(t in n=[],e=r.request("get-csv-header"))n.push(e[t]);return`${n.join(",")}`},h=function(){var e,t,n,o,i,a,u,c,l,s;for(e=r.request("get-csvrow-collection"),r.request("get-csv-header"),u=[y()],o=0,i=(c=e.models).length;o<i;o++){for(n in s=[],t=c[o].toJSON())l=(l=t[n]).split('"').join('""'),$.call(l," ")>=0&&(l='"'+l+'"'),s.push(l);a=s.join(","),u.push(a)}return`${u.join("\r\n")}\r\n`},p=function(){class e extends i{}return e.prototype.template=C.renderable(function(e){return e.mainsection,C.div(".modal-dialog",function(){return C.div(".modal-content",function(){return C.h4(`Title: ${e.Title}`),C.div(".modal-body",function(){return C.h4("Description:"),C.hr(),C.div(".panel",function(){return C.raw(e.Description)})}),C.div(".modal-footer",function(){return C.ul(".list-inline",function(){return"btn.btn-default.btn-sm",C.li("#close-modal",function(){return q("Close","check")})})})})})}),e}.call(this),f=function(){class e extends i{templateContext(){var e;return(e=this.options).csvheader=r.request("get-csv-header"),e}}return e.prototype.template=C.renderable(function(e){return C.div(".modal-dialog",function(){return C.div(".modal-content",function(){return C.h3(`Title: ${e.Title}`),C.div(".modal-body",function(){return C.h4("CSV Row:"),C.hr(),C.div(".panel",function(){return C.dl(".dl-horizontal",function(){return Object.keys(e).forEach(function(t){return C.dt(e.csvheader[t]),C.dd(e[t])})})})}),C.div(".modal-footer",function(){return C.ul(".list-inline",function(){return C.li("#close-modal",function(){return q("Close","check")})})})})})}),e}.call(this),m=`${["max-width:0","overflow:hidden","text-overflow:ellipsis","white-space:nowrap"].join(";")};`,l=function(){class e extends o.Marionette.View{templateContext(){var e;return(e=this.options).csvheader=r.request("get-csv-header"),e}show_row(){var e;return e=new f({model:this.model}),s.request("show-modal",e)}show_description(){var e;return e=new p({model:this.model}),s.request("show-modal",e)}}return e.prototype.tagName="tr",e.prototype.template=C.renderable(function(e){return C.td(function(){return C.div(".btn-group.btn-group-justified",function(){return C.div(".show-desc-button.btn.btn-default.btn-xs",function(){return C.i(".fa.fa-eye")}),C.div(".show-row-button.btn.btn-default.btn-xs",function(){return C.i(".fa.fa-list")})})}),Object.keys(e.csvheader).forEach(function(t){return C.td({style:m},e[t])})}),e.prototype.ui={desc_btn:".show-desc-button",row_btn:".show-row-button"},e.prototype.events={"click @ui.desc_btn":"show_description","click @ui.row_btn":"show_row"},e}.call(this),c=function(){class e extends o.Marionette.CollectionView{}return e.prototype.tagName="tbody",e.prototype.childView=l,e}.call(this),b=["table","table-striped","table-bordered","table-hover","table-condensed"],u=function(){class e extends o.Marionette.View{templateContext(){var e;return(e=this.options).ebcfg_collection=r.request("ebcfg-collection"),e.ebdsc_collection=r.request("ebdsc-collection"),e.csvheader=r.request("get-csv-header"),e}onRender(){var e,t;return e=r.request("get-csvrow-collection"),t=new c({collection:e}),this.showChildView("body",t)}}return e.prototype.tagName="table",e.prototype.className=b.join(" "),e.prototype.template=C.renderable(function(e){return C.div(".table-responsive",function(){return C.table(`.${b.join(".")}`,function(){return C.thead(function(){return C.tr(".info",function(){return C.td(function(){return C.i(".fa.fa-eye.fa-3x")}),Object.keys(e.csvheader).forEach(function(t){return C.th(e.csvheader[t])})})}),C.tbody()})})}),e.prototype.regions={body:{el:"tbody",replaceElement:!0}},e}.call(this),a=function(){class e extends o.Marionette.View{templateContext(){var e;return(e=this.options).ebcfg_collection=r.request("ebcfg-collection"),e.ebdsc_collection=r.request("ebdsc-collection"),e}open_fileexchange_tab(){return window.open(w,"_blank")}make_csv_file(){var e,t,n,r;return h(),t=new Date,"yyyy-mm-dd-HH:MM:ss",r=_(t,"yyyy-mm-dd-HH:MM:ss"),e=this.ui.filename_input.val()||`export-${r}.csv`,n={type:"data:text/csv;charset=utf-8",data:h(),el_id:"exported-csv-anchor",filename:e},s.request("export-to-file",n)}createCsvRows(){var e,t,n,o,i,a,u,c,l;for(e=r.request("get-current-csv-action"),n=r.request("get-current-csv-cfg"),o=r.request("get-current-csv-dsc"),l=[],i=0,a=(c=this.collection.toJSON()).length;i<a;i++)u={action:e,comic:c[i],cfg:n,desc:o},t=r.request("create-csv-row-object",u),l.push(t);return r.request("get-csvrow-collection").set(l)}onRender(){var e,t,n,o;return n=r.request("get-comic-image-urls"),Object.keys(n).length||(t="No pictures attached, please view comics, then create csv",d.request("warning",t)),this.createCsvRows(),e=r.request("get-csvrow-collection"),o=new u({collection:e}),this.showChildView("body",o)}}return e.prototype.regions={body:".body"},e.prototype.template=C.renderable(function(e){var t,n;return n=new Date,"mmddHHMM",t=`export-${_(n,"mmddHHMM")}.csv`,C.div(".listview-header",function(){return C.text("Preview CSV")}),C.div(".fileexchange-button.btn.btn-default","Ebay Upload"),C.div(".mkcsv-button.btn.btn-default","Create CSV"),C.input(".form-control",{value:t,name:"csvfilename"}),C.div(".body")}),e.prototype.ui={mkcsv_btn:".mkcsv-button",filename_input:"input[name='csvfilename']",fileexchange_btn:".fileexchange-button"},e.prototype.events={"click @ui.mkcsv_btn":"make_csv_file","click @ui.fileexchange_btn":"open_fileexchange_tab"},e}.call(this),e.exports=a},43:function(e,t,n){"use strict";n.r(t),n.d(t,"form_group_input_div",function(){return r}),n.d(t,"make_field_input",function(){return i}),n.d(t,"make_field_textarea",function(){return u}),n.d(t,"make_field_select",function(){return a}),n.d(t,"make_login_form",function(){return c}),n.d(t,"login_form",function(){return o}),n.d(t,"name_content_form",function(){return l});var r,o,i,a,u,c,l,s=n(0),d=n.n(s),p=n(46);r=d.a.renderable(function(e){return d.a.div(".form-group",function(){var t,n,r;return d.a.label(".control-label",{for:e.input_id},e.label),r=`#${e.input_id}.form-control`,t=e.input_attributes,n=d.a.input,(null!=e?e.input_type:void 0)?(n=d.a[e.input_type])(r,t,function(){return d.a.text(null!=e?e.content:void 0)}):n(r,t)})}),i=function(e){return d.a.renderable(function(t){return r({input_id:`input_${e}`,label:Object(p.default)(e),input_attributes:{name:e,placeholder:e,value:t[e]}})})},u=function(e){return d.a.renderable(function(t){return r({input_id:`input_${e}`,input_type:"textarea",label:Object(p.default)(e),input_attributes:{name:e,placeholder:e},content:t[e]})})},a=function(e,t){return d.a.renderable(function(n){return d.a.div(".form-group",function(){return d.a.label(".control-label",{for:`select_${e}`}),Object(p.default)(e)}),d.a.select(".form-control",{name:`select_${e}`},function(){var r,o,i,a;for(a=[],r=0,o=t.length;r<o;r++)i=t[r],n[e]===i?a.push(d.a.option({selected:null,value:i},i)):a.push(d.a.option({value:i},i));return a})})},o=(c=function(e="/login",t="POST"){return d.a.renderable(function(n){return d.a.form({role:"form",method:t,action:e},function(){return r({input_id:"input_username",label:"User Name",input_attributes:{name:"username",placeholder:"User Name"}}),r({input_id:"input_password",label:"Password",input_attributes:{name:"password",type:"password",placeholder:"Type your password here...."}}),d.a.button(".btn.btn-secondary",{type:"submit"},"login")})})})(),l=d.a.renderable(function(e){return r({input_id:"input_name",label:"Name",input_attributes:{name:"name",placeholder:"Name"}}),r({input_id:"input_content",input_type:d.a.textarea,label:"Content",input_attributes:{name:"content",placeholder:"..."}}),d.a.input(".btn.btn-secondary.btn-sm",{type:"submit",value:"Add"})})},54:function(e,t,n){"use strict";n.r(t),n.d(t,"spanbutton",function(){return u}),n.d(t,"divbutton",function(){return r}),n.d(t,"modal_close_button",function(){return i}),n.d(t,"navbar_collapse_button",function(){return a}),n.d(t,"dropdown_toggle",function(){return o});var r,o,i,a,u,c=n(0),l=n.n(c);u=l.a.component(function(e,t,n){return l.a.span(`${e}.btn.btn-secondary.btn-sm`,n)}),r=l.a.component(function(e,t,n){return l.a.div(`${e}.btn.btn-secondary.btn-sm`,n)}),i=l.a.renderable(function(e="Close",t="close"){return l.a.div(".btn.btn-secondary.btn-sm",{"data-dismiss":"modal"},function(){return l.a.h4(".modal-title",function(){return l.a.i(`.fa.fa-${t}`),l.a.text(e)})})}),a=l.a.renderable(function(e){return l.a.button(".navbar-toggle",{type:"button","data-toggle":"collapse","data-target":`#${e}`},function(){return l.a.span(".sr-only","Toggle Navigation"),l.a.span(".icon-bar"),l.a.span(".icon-bar"),l.a.span(".icon-bar")})}),o=l.a.component(function(e,t,n){return l.a.a(`${e}.dropdown-toggle`,{href:t.href,"data-toggle":"dropdown"},n)})}}]);
//# sourceMappingURL=ebcsv-view-csvpreview-view-helper-0ec12904497b61ad096d.js.map