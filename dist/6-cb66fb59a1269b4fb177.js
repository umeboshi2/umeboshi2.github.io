(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{114:function(e,t,n){e.exports=function(){return new Worker(n.p+"8fcdd13cb3c1680eba54.worker.js")}},46:function(e,t,n){"use strict";n.r(t);n(4);var o,r,a,l,i,s,u,c,d,h,w,m,p,v,f,y,g,b,S,C,z,x,L,_,N=n(1),R=n.n(N),V=n(3),k=n.n(V),q=n(61),I=n(49),M=(n(2),n(14),n(55),n(60)),P=n(56),E=(n(13),n(67)),O=n(82),T=n.n(O);l=R.a.Radio.channel("global"),o=R.a.Radio.channel("tvmaze"),s=l.request("main:app:dbConn","tvmaze"),i=new E.LoveStore(s,"TVMazeShow"),c=["id","name","url","self","premiered","runtime","network_name","imdb","status","summary","img_med","img_orig","content"],r=function(){class e extends R.a.Model{toJSON(){var e;return e={},c.forEach(t=>e[t]=this.get(t)),e}}return e.prototype.loveStore=i,e}.call(this),a=function(){class e extends T.a{}return e.prototype.loveStore=i,e.prototype.model=r,e.prototype.mode="client",e}.call(this),u=new a,o.reply("get-local-tvshows",function(){return u}),o.reply("get-local-tvshow-model",function(){return r}),o.reply("get-local-tvshow-collection",function(){return a}),o.reply("save-local-show",function(e){var t,n,o,a,l,i;return t=new r({id:e.id,name:e.name,url:e.url,self:e._links.self.href,premiered:new Date(e.premiered),runtime:(null!=e?e.runtime:void 0)||"",network_name:(null!=e&&null!=(n=e.network)?n.name:void 0)||"NO NETWORK",imdb:(null!=(o=e.externals)?o.imdb:void 0)||"",status:(null!=e?e.status:void 0)||"",summary:(null!=e?e.summary:void 0)||"",img_med:(null!=e&&null!=(a=e.image)?a.medium:void 0)||"",img_orig:(null!=e&&null!=(l=e.image)?l.original:void 0)||"",content:e}),i=!0,t.isNew=function(){return!!i&&(i=!1,!0)},u.add(t),t.save()}),m=R.a.Radio.channel("global"),d=R.a.Radio.channel("tvmaze"),v=m.request("main:app:dbConn","tvmaze"),p=new E.LoveStore(v,"TVMazeEpisode"),f=["id","show_id","name","url","self","season","number","airdate","airtime","runtime","summary","img_med","img_orig","content"],h=function(){class e extends R.a.Model{toJSON(){var e;return e={},f.forEach(t=>e[t]=this.get(t)),e}}return e.prototype.loveStore=p,e}.call(this),w=function(){class e extends R.a.Collection{}return e.prototype.loveStore=p,e.prototype.model=h,e}.call(this),y=new w,d.reply("get-local-episodes",function(){return y}),d.reply("get-local-episode-model",function(){return h}),d.reply("get-local-episode-collection",function(){return w}),d.reply("save-local-episode",function(e){var t,n,o,r,a,l,i,s,u;return t=new h({id:e.id,show_id:e.show_id,name:e.content.name,url:e.content.url,self:null!=(n=e.content._links)?n.self.href:void 0,season:e.content.season,number:e.content.number,airdate:new Date(e.content.airdate),airtime:e.content.airtime,runtime:(null!=(o=e.content)?o.runtime:void 0)||"",summary:(null!=(r=e.content)?r.summary:void 0)||"",img_med:(null!=(a=e.content)&&null!=(l=a.image)?l.medium:void 0)||"",img_orig:(null!=(i=e.content)&&null!=(s=i.image)?s.original:void 0)||"",content:e.content}),u=!0,t.isNew=function(){return!!u&&(u=!1,!0)},y.add(t),t.save()}),R.a.Radio.channel("global"),g=R.a.Radio.channel("tvmaze"),L="//api.tvmaze.com",x=class extends R.a.Model{url(){var e;return e=this.searchName,`${L}/singlesearch/shows?q=${e}`}},g.reply("single-show-search",function(e){var t;return(t=new x).searchName=e,t}),z=class extends R.a.Collection{url(){return`${L}/search/shows`}},g.reply("new-tv-show-search",function(e){return new z(e=e||{})}),g.reply("tv-show-search-collection",function(){return z}),g.reply("search-tv-shows",function(e){return new z}),C=class extends R.a.Model{urlRoot(){return`${L}/shows`}},g.reply("get-remote-show",function(e){return new C({id:e})}),b=class extends R.a.Model{url(){return this.get("_links").self.href}},S=function(){class e extends R.a.Collection{url(){return`${L}/shows/${this.showId}/episodes`}}return e.prototype.model=b,e}.call(this),g.reply("get-remote-episodes",function(e){var t;return(t=new S).showId=e,t}),n(54),R.a.Radio.channel("global"),R.a.Radio.channel("messages"),R.a.Radio.channel("resources"),_=R.a.Radio.channel("tvmaze");var $,D,j,J,A,F=function(){class e extends M.MainController{viewIndex(){return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(11),n.e(13),n.e(46)]).then((()=>{var e,t,o;return o=_.request("get-local-tvshows"),e=_.request("tv-show-search-collection"),t=n(188),o.fetch().then(()=>{var n;return n=new t({collection:new e}),this.layout.showChildView("content",n)})}).bind(null,n)).catch(n.oe)}viewShowList(){return this.viewShowListCards()}viewShowListCards(){var e;return this.setupLayoutIfNeeded(),e=_.request("get-local-tvshows"),Promise.all([n.e(2),n.e(45)]).then((()=>{var t;return t=n(187),this._loadView(t,e,"tvshow")}).bind(null,n)).catch(n.oe)}viewShowListPackery(){var e;return this.setupLayoutIfNeeded(),e=_.request("get-local-tvshows"),Promise.all([n.e(2),n.e(12),n.e(19),n.e(44)]).then((()=>{var t;return t=n(186),this._loadView(t,e,"tvshow")}).bind(null,n)).catch(n.oe)}viewShowListMasonry(){var e;return this.setupLayoutIfNeeded(),e=_.request("get-local-tvshows"),Promise.all([n.e(2),n.e(12),n.e(43)]).then((()=>{var t;return t=n(185),this._loadView(t,e,"tvshow")}).bind(null,n)).catch(n.oe)}viewShowListFlat(){var e;return this.setupLayoutIfNeeded(),e=_.request("get-local-tvshows"),window.tvshows=e,Promise.all([n.e(2),n.e(42)]).then((()=>{var t;return t=n(184),e.fetch().done(()=>{var n;return n=new t({collection:e}),this.layout.showChildView("content",n)})}).bind(null,n)).catch(n.oe)}viewSearchShow(){return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(11),n.e(41)]).then((()=>{var e;return e=new(n(183)),this.layout.showChildView("content",e)}).bind(null,n)).catch(n.oe)}viewShow(e){return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(11),n.e(13),n.e(40)]).then((()=>{var t,o;return t=n(182),o=new(_.request("get-local-tvshow-model"))({id:e}),this._loadView(t,o,"tvshow")}).bind(null,n)).catch(n.oe)}importSampleData(){return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(39)]).then((()=>{var e,t;return t=_.request("get-local-tvshows"),_.request("tv-show-search-collection"),e=n(181),t.fetch().then(()=>{var t;return t=new e,this.layout.showChildView("content",t)})}).bind(null,n)).catch(n.oe)}viewCalendar(){return this.setupLayoutIfNeeded(),Promise.all([n.e(18),n.e(38)]).then((()=>{var e,t;return t=_.request("get-local-tvshows"),_.request("tv-show-search-collection"),e=n(180),t.fetch().then(()=>{var t;return t=new e,this.layout.showChildView("content",t)})}).bind(null,n)).catch(n.oe)}}return e.prototype.layoutClass=P.a,e}.call(this);n(114);R.a.Radio.channel("global"),$=R.a.Radio.channel("tvmaze"),J=[{label:"List Shows",url:"#tvmaze/shows",icon:".fa.fa-list"},{label:"Search Show",url:"#tvmaze/searchshow",icon:".fa.fa-search"},{label:"Import Sample Data",url:"#tvmaze/import-sample-data",icon:".fa.fa-download"},{label:"Calendar",url:"#tvmaze/calendar",icon:".fa.fa-calendar"}],j=function(){class e extends k.a.AppRouter{}return e.prototype.appRoutes={tvmaze:"viewIndex","tvmaze/searchshow":"viewSearchShow","tvmaze/shows":"viewShowList","tvmaze/shows/flat":"viewShowListFlat","tvmaze/shows/view/:id":"viewShow","tvmaze/import-sample-data":"importSampleData","tvmaze/calendar":"viewCalendar"},e}.call(this),D=function(){class e extends q.a{}return e.prototype.Controller=F,e.prototype.Router=j,e.prototype.appletEntries=[{label:`${Object(I.default)("tvmaze")} Menu`,menu:J},{label:"List Shows",url:"#tvmaze/shows"}],e}.call(this),A=void 0,$.reply("maincalendar:set-date",function(e){return A=e.fullCalendar("getDate")}),$.reply("maincalendar:get-date",function(){return A});t.default=D},49:function(e,t,n){"use strict";n.r(t),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},55:function(e,t,n){"use strict";n.r(t);var o,r,a,l,i=n(3),s=n.n(i),u=n(2),c=n.n(u),d=n(13);l=c.a.renderable(function(e){return c.a.i(e.icon),c.a.text(" "),c.a.text(e.label)}),r=function(){class e extends s.a.View{}return e.prototype.tagName="button",e.prototype.attributes={class:"btn btn-secondary"},e.prototype.triggers={click:"button:clicked"},e.prototype.modelEvents={change:"render"},e}.call(this),o=function(){class e extends s.a.CollectionView{childViewOptions(){return{template:this.options.entryTemplate}}onChildviewButtonClicked(e){return this.trigger("toolbar:entry:clicked",e)}}return e.prototype.childView=r,e.prototype.className="btn-group btn-group-justified",e}.call(this),a=function(){class e extends s.a.View{onRender(){var e,t;return e=this.options.entryTemplate||l,t=new o({collection:this.collection,entryTemplate:e}),this.showChildView("entries",t)}onChildviewToolbarEntryClicked(e){return Object(d.default)(e.model.get("url"))}}return e.prototype.template=c.a.renderable(function(){return c.a.div(".toolbar-entries")}),e.prototype.regions={entries:{el:".toolbar-entries"}},e}.call(this),t.default=a}}]);