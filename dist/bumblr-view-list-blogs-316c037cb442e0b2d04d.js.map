{"version":3,"sources":["webpack:///./src/applets/bumblr/views/bloglist.coffee"],"names":["Backbone","Masonry","SimpleBlogInfoView","SimpleBlogListView","blog_dialog_view","navigate_to_url","simple_blog_info","simple_blog_list","tc","__webpack_require__","default","Radio","channel","renderable","blog","div","h2","p","button","i","a","href","name","BlogModal","Marionette","View","template","[object Object]","handlerIn","handlerOut","event","this","ui","deleteButton","show","hide","$el","hover","model","get","collection","console","log","destroy","save","showPixButton","events","click @ui.showPixButton","click @ui.deleteButton","CompositeView","masonry","gutter","isInitLayout","itemSelector","columnWidth","set_layout","reloadItems","layout","childView","childViewContainer","blogs","module","exports"],"mappings":"8EAAA,IAAAA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAIC,EAAQ,GACZT,EAAWS,EAAQ,GACNA,EAAQ,GACrBR,EAAUQ,EAAQ,IAClBD,EAAKC,EAAQ,GAEbJ,EAAkBI,EAAQ,IAA+BC,QAEzCV,EAASW,MAAMC,QAAQ,UAGvCR,EAAmBI,EAAGK,WAAW,SAACC,UAChCN,EAAGO,IAAI,gBAAiB,kBACtBP,EAAGQ,GAAG,sBACRR,EAAGO,IAAI,cAAe,kBACpBP,EAAGS,EAAE,0BACPT,EAAGO,IAAI,gBAAiB,kBACtBP,EAAGU,OAAO,2BAA4B,UACtCV,EAAGU,OAAO,mCAAoC,UAElDZ,EAAmBE,EAAGK,WAAW,SAACC,UAChCN,EAAGO,IAAI,4BAA6B,kBAClCP,EAAGW,EAAE,mCACLX,EAAGY,GAAEC,KAAK,oBAAsBP,EAAKQ,MAAMR,EAAKQ,MAChDd,EAAGW,EAAE,+CACLL,KAAKA,EAAKQ,WAEdf,EAAmBC,EAAGK,WAAW,kBAC/BL,EAAGO,IAAI,kBACLP,EAAGY,EAAE,oBAAoBC,KAAK,mBAAmB,YACjDb,EAAGO,IAAI,yCAGL,iBAANQ,UAAwBvB,EAASwB,WAAWC,yBAC1CC,SAAUtB,gBAENF,EAAA,iBAANA,UAAiCF,EAASwB,WAAWC,KAQnDE,eACE,IAAAC,EAAAC,SAAAD,EAAY,CAACE,GACXC,KAACC,GAAGC,aAAaC,QACnBL,EAAa,CAACC,GAIZC,KAACC,GAAGC,aAAaE,QACnBJ,KAACK,IAAIC,MAAMT,EAAWC,GACtBE,KAACC,GAAGC,aAAaE,OAEnBR,UACE,IAAAL,WAAOS,KAACO,MAAMC,IAAI,QAElBlC,qBAAmCiB,KAErCK,aACE,IAAAa,SAAAC,QAAQC,IAAI,aAAcX,KAACO,OAC3BE,EAAaT,KAACO,MAAME,WACpBT,KAACO,MAAMK,UACPH,EAAWI,2BA3BblB,SAAUpB,cACV0B,IACEC,aAAc,sBACdY,cAAe,yBACjBC,QACEC,0BAA2B,UAC3BC,yBAA0B,4BA0BxB7C,EAAA,iBAANA,UAAiCH,EAASwB,WAAWyB,cAOnDtB,yBACEI,KAACmB,QAAQP,UAEXhB,sBACEc,QAAQC,IAAI,6CACZX,KAACmB,QAAU,IAAIjD,EAAQ,uBACrBkD,OAAQ,EACRC,cAAc,EACdC,aAAc,QACdC,YAAa,MACfvB,KAACwB,aAEH5B,oBACEI,KAACmB,QAAQM,cACTzB,KAACmB,QAAQO,6BApBXC,UAAWxD,cACXwB,SAAUnB,cACVoD,mBAAoB,kCACpB3B,IACE4B,MAAO,qCAkBXC,EAAOC,QAAU3D","file":"bumblr-view-list-blogs-316c037cb442e0b2d04d.js","sourcesContent":["$ = require 'jquery'\nBackbone = require 'backbone'\nMarionette = require 'backbone.marionette'\nMasonry = require 'masonry-layout'\ntc = require 'teacup'\n\nnavigate_to_url = require('tbirds/util/navigate-to-url').default\n\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\n########################################\nblog_dialog_view = tc.renderable (blog) ->\n  tc.div '.modal-header', ->\n    tc.h2 'This is a modal!'\n  tc.div '.modal-body', ->\n    tc.p 'here is some content'\n  tc.div '.modal-footer', ->\n    tc.button '#modal-cancel-button.btn', 'cancel'\n    tc.button '#modal-ok-button.btn.btn-default', 'Ok'\n\nsimple_blog_info = tc.renderable (blog) ->\n  tc.div '.blog.listview-list-entry', ->\n    tc.i '.show-pix.fa.fa-eye.btn-default'\n    tc.a href:'#bumblr/viewblog/' + blog.name, blog.name\n    tc.i \".delete-blog-button.fa.fa-close.btn-default\",\n    blog:blog.name\n\nsimple_blog_list = tc.renderable () ->\n  tc.div ->\n    tc.a '.btn.btn-default', href:'#bumblr/addblog', \"Add blog\"\n    tc.div '#bloglist-container.listview-list'\n\n########################################\nclass BlogModal extends Backbone.Marionette.View\n  template: blog_dialog_view\n\nclass SimpleBlogInfoView extends Backbone.Marionette.View\n  template: simple_blog_info\n  ui:\n    deleteButton: '.delete-blog-button'\n    showPixButton: '.show-pix'\n  events:\n    'click @ui.showPixButton': 'showPix'\n    'click @ui.deleteButton': 'deleteBlog'\n  onDomRefresh: ->\n    handlerIn = (event) =>\n      @ui.deleteButton.show()\n    handlerOut = (event) =>\n      #setTimeout () =>\n      #  @ui.deleteButton.hide()\n      #, 200\n      @ui.deleteButton.hide()\n    @$el.hover handlerIn, handlerOut\n    @ui.deleteButton.hide()\n    \n  showPix: ->\n    name = @model.get 'name'\n    #console.log \"name is \", name\n    navigate_to_url \"#bumblr/viewpix/#{name}\"\n\n  deleteBlog: ->\n    console.log \"deleteBlog\", @model\n    collection = @model.collection\n    @model.destroy()\n    collection.save()\n    # fixme do this in parent view\n    #@masonry.reloadItems()\n    #@masonry.layout()\n    \nclass SimpleBlogListView extends Backbone.Marionette.CompositeView\n  childView: SimpleBlogInfoView\n  template: simple_blog_list\n  childViewContainer: '#bloglist-container'\n  ui:\n    blogs: '#bloglist-container'\n    \n  onBeforeDestroy: ->\n    @masonry.destroy()\n    \n  onDomRefresh: () ->\n    console.log 'onDomRefresh called on SimpleBlogListView'\n    @masonry = new Masonry \"#bloglist-container\",\n      gutter: 2\n      isInitLayout: false\n      itemSelector: '.blog'\n      columnWidth: 100\n    @set_layout()\n\n  set_layout: ->\n    @masonry.reloadItems()\n    @masonry.layout()\n\nmodule.exports = SimpleBlogListView\n"],"sourceRoot":""}