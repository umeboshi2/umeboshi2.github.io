(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{128:function(e,t,n){e.exports=function(){return new Worker(n.p+"6f4514501ecddd4c27b1.worker.js")}},151:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(0),h=(o=d)&&o.__esModule?o:{default:o},y=n(78);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=h.default.Radio.channel("global"),r=h.default.Radio.channel("tvmaze"),c=a.request("main:app:dbConn","tvmaze"),l=new y.LoveStore(c,"TVMazeEpisode"),s=["id","show_id","name","url","self","season","number","airdate","airtime","runtime","summary","img_med","img_orig","content"],i=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,h.default.Model),p(t,[{key:"toJSON",value:function(){var e,t=this;return e={},s.forEach(function(n){return e[n]=t.get(n)}),e}}]),t}();return e.prototype.loveStore=l,e}.call(void 0),u=function(){var e=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,h.default.Collection),t}();return e.prototype.loveStore=l,e.prototype.model=i,e}.call(void 0),f=new u,r.reply("get-local-episodes",function(){return f}),r.reply("get-local-episode-model",function(){return i}),r.reply("get-local-episode-collection",function(){return u}),r.reply("save-local-episode",function(e){var t,n,o,r,u,a,l,c,s;return t=new i({id:e.id,show_id:e.show_id,name:e.content.name,url:e.content.url,self:null!=(n=e.content._links)?n.self.href:void 0,season:e.content.season,number:e.content.number,airdate:new Date(e.content.airdate),airtime:e.content.airtime,runtime:(null!=(o=e.content)?o.runtime:void 0)||"",summary:(null!=(r=e.content)?r.summary:void 0)||"",img_med:(null!=(u=e.content)&&null!=(a=u.image)?a.medium:void 0)||"",img_orig:(null!=(l=e.content)&&null!=(c=l.image)?c.original:void 0)||"",content:e.content}),s=!0,t.isNew=function(){return!!s&&(s=!1,!0)},f.add(t),t.save()})},152:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=b(n(0)),y=n(78),v=b(n(68));function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a=h.default.Radio.channel("global"),r=h.default.Radio.channel("tvmaze"),s=a.request("main:app:dbConn","tvmaze"),l=new y.LoveStore(s,"TVMazeShow"),p=["id","name","url","self","premiered","runtime","network_name","imdb","status","summary","img_med","img_orig","content"],i=function(){var e=function(e){function t(){return w(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,h.default.Model),d(t,[{key:"toJSON",value:function(){var e,t=this;return e={},p.forEach(function(n){return e[n]=t.get(n)}),e}}]),t}();return e.prototype.loveStore=l,e}.call(void 0),u=function(){var e=function(e){function t(){return w(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,v.default),t}();return e.prototype.loveStore=l,e.prototype.model=i,e.prototype.mode="client",e}.call(void 0),o=function(){var e=function(e){function t(){return w(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,h.default.Collection),t}();return e.prototype.loveStore=l,e.prototype.model=i,e}.call(void 0),c=new o,f=new u,r.reply("get-all-local-tvshows",function(){return c}),r.reply("get-local-tvshows",function(){return f}),r.reply("get-local-tvshow-model",function(){return i}),r.reply("get-local-tvshow-collection",function(){return u}),r.reply("save-local-show",function(e){var t,n,o,r,u,a;return t=new i({id:e.id,name:e.name,url:e.url,self:e._links.self.href,premiered:new Date(e.premiered),runtime:(null!=e?e.runtime:void 0)||"",network_name:(null!=e&&null!=(n=e.network)?n.name:void 0)||"NO NETWORK",imdb:(null!=(o=e.externals)?o.imdb:void 0)||"",status:(null!=e?e.status:void 0)||"",summary:(null!=e?e.summary:void 0)||"",img_med:(null!=e&&null!=(r=e.image)?r.medium:void 0)||"",img_orig:(null!=e&&null!=(u=e.image)?u.original:void 0)||"",content:e}),a=!0,t.isNew=function(){return!!a&&(a=!1,!0)},f.add(t),t.save()})},153:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=(p(n(3)),p(n(0)));n(78),p(n(68));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(152),n(151),f.default.Radio.channel("global"),o=f.default.Radio.channel("tvmaze"),c="//api.tvmaze.com",l=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Model),s(t,[{key:"url",value:function(){var e;return e=this.searchName,c+"/singlesearch/shows?q="+e}}]),t}(),o.reply("single-show-search",function(e){var t;return(t=new l).searchName=e,t}),a=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Collection),s(t,[{key:"url",value:function(){return c+"/search/shows"}}]),t}(),o.reply("new-tv-show-search",function(e){return new a(e=e||{})}),o.reply("tv-show-search-collection",function(){return a}),o.reply("search-tv-shows",function(e){return new a}),u=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Model),s(t,[{key:"urlRoot",value:function(){return c+"/shows"}}]),t}(),o.reply("get-remote-show",function(e){return new u({id:e})}),r=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Model),s(t,[{key:"url",value:function(){return this.get("_links").self.href}}]),t}(),i=function(){var e=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,f.default.Collection),s(t,[{key:"url",value:function(){return c+"/shows/"+this.showId+"/episodes"}}]),t}();return e.prototype.model=r,e}.call(void 0),o.reply("get-remote-episodes",function(e){var t;return(t=new i).showId=e,t})},154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=c(n(0)),a=(c(n(1)),c(n(2)),c(n(11)),c(n(77)),n(80)),l=n(79);c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}n(153),n(69),u.default.Radio.channel("global"),u.default.Radio.channel("messages"),u.default.Radio.channel("resources"),o=u.default.Radio.channel("tvmaze"),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.MainController),i(t,[{key:"viewIndex",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(3),n.e(41)]).then(function(){var t,r,i;return i=o.request("get-local-tvshows"),t=o.request("tv-show-search-collection"),r=n(150),i.fetch().then(function(){var n;return n=new r({collection:new t}),e.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}},{key:"viewShowList",value:function(){return this.viewShowListCards()}},{key:"viewShowListCards",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),n.e(40).then(function(){var o;return o=n(146),t._loadView(o,e,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"viewShowListPackery",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),Promise.all([n.e(4),n.e(12),n.e(39)]).then(function(){var o;return o=n(145),t._loadView(o,e,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"viewShowListMasonry",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),Promise.all([n.e(4),n.e(38)]).then(function(){var o;return o=n(140),t._loadView(o,e,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"viewShowListFlat",value:function(){var e,t=this;return this.setupLayoutIfNeeded(),e=o.request("get-local-tvshows"),window.tvshows=e,n.e(37).then(function(){var o;return o=n(139),e.fetch().done(function(){var n;return n=new o({collection:e}),t.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}},{key:"viewSearchShow",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(36)]).then(function(){var t;return t=new(n(138)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"viewShow",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(3),n.e(35)]).then(function(){var r,i;return r=n(137),i=new(o.request("get-local-tvshow-model"))({id:e}),t._loadView(r,i,"tvshow")}.bind(null,n)).catch(n.oe)}},{key:"importSampleData",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(34).then(function(){var t,r;return r=o.request("get-all-local-tvshows"),o.request("tv-show-search-collection"),t=n(135),r.fetch().then(function(){var n;return n=new t,e.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}},{key:"viewCalendar",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(10),n.e(33)]).then(function(){var t,r;return r=o.request("get-local-tvshows"),o.request("tv-show-search-collection"),t=n(132),r.fetch().then(function(){var n;return n=new t,e.layout.showChildView("content",n)})}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=l.ToolbarAppletLayout,e}.call(void 0),t.default=r},155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});d(n(3));var o,r,i,u,a,l=d(n(0)),c=d(n(1)),s=d(n(81)),f=d(n(54)),p=d(n(154));d(n(128));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}l.default.Radio.channel("global"),o=l.default.Radio.channel("tvmaze"),u=[{label:"List Shows",url:"#tvmaze/shows",icon:".fa.fa-list"},{label:"Search Show",url:"#tvmaze/searchshow",icon:".fa.fa-search"},{label:"Import Sample Data",url:"#tvmaze/import-sample-data",icon:".fa.fa-download"},{label:"Calendar",url:"#tvmaze/calendar",icon:".fa.fa-calendar"}],i=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,c.default.AppRouter),t}();return e.prototype.appRoutes={tvmaze:"viewIndex","tvmaze/searchshow":"viewSearchShow","tvmaze/shows":"viewShowList","tvmaze/shows/flat":"viewShowListFlat","tvmaze/shows/view/:id":"viewShow","tvmaze/import-sample-data":"importSampleData","tvmaze/calendar":"viewCalendar"},e}.call(void 0),r=function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,s.default),t}();return e.prototype.Controller=p.default,e.prototype.Router=i,e.prototype.appletEntries=[{label:(0,f.default)("tvmaze")+" Menu",menu:u},{label:"List Shows",url:"#tvmaze/shows"}],e}.call(void 0),a=void 0,o.reply("maincalendar:set-date",function(e){return a=e.fullCalendar("getDate")}),o.reply("maincalendar:get-date",function(){return a}),t.default=r},193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u,a,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=y(n(0)),f=(y(n(1)),y(n(2)),y(n(11)),y(n(77))),p=n(80),d=n(79),h=y(n(69));function y(e){return e&&e.__esModule?e:{default:e}}n(10),s.default.Radio.channel("global"),u=s.default.Radio.channel("messages"),i=s.default.Radio.channel("static-documents"),s.default.Radio.channel("resources"),o=s.default.Radio.channel("todos"),a=[],l=new s.default.Collection(a),o.reply("get-toolbar-entries",function(){return l}),r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.MainController),c(t,[{key:"setupLayoutIfNeeded",value:function(){var e;(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupLayoutIfNeeded",this).call(this),e=new f.default({collection:l}),this.layout.showChildView("toolbar",e)}},{key:"start",value:function(){this.viewIndex()}},{key:"_viewResource",value:function(e){var t=this;return n.e(29).then(function(){var o;return o=new(n(192))({model:e}),t.layout.showChildView("content",o),(0,h.default)()}.bind(null,n)).catch(n.oe)}},{key:"viewPage",value:function(e){var t,n,o=this;this.setupLayoutIfNeeded(),(n=(t=i.request("get-document",e)).fetch()).done(function(){o._viewResource(t)}),n.fail(function(){u.request("danger","Failed to get document")})}},{key:"view_index",value:function(){var e;return this.setupLayoutIfNeeded(),0^e}},{key:"viewIndex",value:function(){this.viewPage("intro")}},{key:"themeSwitcher",value:function(){var e=this;return this.setupLayoutIfNeeded(),n.e(28).then(function(){var t;return t=new(n(191)),e.layout.showChildView("content",t),(0,h.default)()}.bind(null,n)).catch(n.oe)}},{key:"viewDbAdmin",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(3),n.e(27)]).then(function(){var t;return t=new(n(189)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}}]),t}();return e.prototype.layoutClass=d.ToolbarAppletLayout,e}.call(void 0),t.default=r},194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=s(n(0)),a=s(n(1)),l=s(n(81)),c=s(n(193));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}u.default.Radio.channel("global"),u.default.Radio.channel("frontdoor"),i=[{id:"dbadmin",label:"Db Admin",url:"#frontdoor/dbadmin",icon:".fa.fa-database"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,a.default.AppRouter),t}();return e.prototype.appRoutes={"":"viewIndex",frontdoor:"viewIndex","pages/:name":"viewPage","frontdoor/dbadmin":"viewDbAdmin"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,l.default),t}();return e.prototype.Controller=c.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:"Main Menu",menu:i}],e}.call(void 0),t.default=o},195:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,a,l,c,s,f,p,d,h;a=n(0),h=n(95),n(11),n(73),n(83),n(52),n(54),s=a.Radio.channel("messages"),u=a.Radio.channel("ebcsv"),d=new h.Parser({explicitArray:!1,async:!1}),u.reply("get-xmlparser",function(){return d}),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a.Model),t}(),p=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,a.Collection),t}();return e.prototype.model=f,e}.call(void 0),l=new p,u.reply("set-comics",function(e){return l.set(e)}),u.reply("get-comics",function(){return l}),c=new p,u.reply("set-all-comics",function(e){return c.set(e)}),u.reply("get-all-comics",function(){return c}),u.reply("parse-all-comics-xml",function(e,t){return d.parseString(e,function(e,n){var o;return(null!=(o=n.comicinfo.comiclist.comic)?o.length:void 0)||(console.warn("Single comic!"),o=[o]),u.request("set-all-comics",forsale),t()})}),u.reply("parse-comics-for-sale",function(e,t){return d.parseString(e,function(e,n){var o,r,i,a,l,c,f,p,d,h;for((null!=(i=n.comicinfo.comiclist.comic)?i.length:void 0)||(i=[i]),a=[],c=[],o=[],l=0,f=i.length;l<f;l++)"For Sale"===(h=(r=i[l]).collectionstatus._)?r.links?a.push(r):o.push(r):"In Collection"===h?c.push(r):(d="Cannot determine comic status of ("+((p=r.mainsection).series.displayname+" #"+p.issue)+")!",s.request("danger",d));return c.length&&(d=c.length+" ignored!!",s.request("warning",d)),a.length||s.request("danger","No comics for sale!"),o.length&&(d="There was some bad xml, skipped "+o.length+" comics.",s.request("danger",d)),u.request("set-comics",a),t()})}),u.reply("parse-comics-xml",function(e,t){return d.parseString(e,function(e,n){var o;return(null!=(o=n.comicinfo.comiclist.comic)?o.length:void 0)||(o=[o]),u.request("set-comics",o),t()})}),e.exports={}},196:function(e,t,n){"use strict";var o,r,i,u,a,l=[].indexOf;o=n(0),i=n(83),u=n(52),r=o.Radio.channel("messages"),o.Radio.channel("ebcsv"),a=function(e,t){var n,o,a,c,s;return t.comic,o=t.desc,(s=i.compile(o.get("title"))(t)).length>80&&(a=(a="Title too long.\n")+(s+" ----\x3e ")+(c=s.substring(0,79)),r.request("danger",a),s=c),e.Title=s,n=i.compile(o.get("content"))(t),(n=(n=(n=u(n)).split("\r").join("")).split("\n").join("")).length>32700&&(a=n.length+" characters in description",r.request("warning",a)),l.call(n,"\n")>=0&&r.request("danger","newline in description"),e.Description=n},e.exports=a},197:function(e,t,n){"use strict";var o,r,i;r=n(0),n(96),r.Radio.channel("messages"),o=r.Radio.channel("ebcsv"),i=function(e,t){var n,r,i;return n=t.comic,i=o.request("get-comic-image-urls"),r=n.links.link.url,t.image_src=i[r].replace("http://","//"),e.PicURL=i[n.links.link.url]},e.exports=i},198:function(e,t,n){"use strict";var o,r,i,u,a;(r=n(0)).Radio.channel("messages"),o=r.Radio.channel("ebcsv"),i={platinum:{start:1897,end:1937},golden:{start:1938,end:1955},silver:{start:1956,end:1969},bronze:{start:1970,end:1983},copper:{start:1984,end:1991},modern:{start:1992,end:2100}},u=function(e){var t,n;for(n in i)if(e>=(t=i[n]).start&&e<=t.end)return n;return!1},o.reply("get-comic-ages",function(){return i}),o.reply("find-age",function(e){return u(e)}),a=function(e,t){var n,o;return n=u(e),o=[],t.forEach(function(e){if(e.age===n)return o.push(e)}),o},o.reply("get-heroes-by-age",function(e,t){return a(e,t)}),e.exports={}},199:function(e,t,n){"use strict";var o,r,i,u;r=n(0),n(96),n(198),i=r.Radio.channel("messages"),o=r.Radio.channel("ebcsv"),u=function(e,t){var n,r,u,a,l,c,s,f,p,d,h,y,v,b;for(r=t.comic,c=o.request("get-superheroes-model").get("rows"),(b=null!=(y=r.publicationdate)?y.year:void 0)||(b=r.releasedate.year,console.warn("Using releasedate")),b||(console.warn("Bad date for comic",r),i.request("danger","Bad Date for comic "+r.id)),b=parseInt(b.displayname),v=r.mainsection.series.displayname.toLowerCase(),n=o.request("find-age",b),h=void 0,l={},p=0,d=(f=o.request("get-heroes-by-age",b,c)).length;p<d;p++)(s=f[p]).superhero.startsWith("Other ")&&(h=s),l[s.superhero.toLowerCase()]=s;for(a in null==h&&i.request("danger","No category found for "+n),u=h,l)if(v.indexOf(a)>=0){u=l[a];break}return e["*Category"]=u.id},e.exports=u},200:function(e,t,n){"use strict";var o;o=function(e,t){var n,o;if(null!=(n=t.comic)?n.isbn:void 0)return 14===(o=n.isbn).length&&(o=o.substring(0,o.length-2)),13===o.length&&(o=o.substring(1,o.length)),e["Product:UPC"]=o},e.exports=o},201:function(e,t,n){"use strict";var o,r,i;r=n(11),o=n(73),i=function(e,t){var n,i,u,a;return(a=r(e.scheduletime))?(i=(new Date).valueOf()+a,n=new Date(i),u="yyyy-mm-dd HH:MM:ss",e.scheduletime=o(n,u)):e.scheduletime=""},e.exports=i},202:function(e,t,n){"use strict";var o;o=function(e,t){var n,o;if(null!=(n=t.comic)?n.currentprice:void 0){for(o=n.currentprice;o.startsWith("$");)o=o.substring(1,o.length);return e.startprice=o}},e.exports=o},203:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s;r=n(0),n(95),n(11),n(73),n(83),n(52),c=n(54).default,r.Radio.channel("messages"),o=r.Radio.channel("ebcsv"),u=["Title","PicURL","Description","Product:EAN","Product:UPC","Product:ISBN","*Category"],l=["format","location","returnsacceptedoption","duration","quantity","startprice","dispatchtimemax","conditionid"],o.reply("csv-req-fieldnames",function(){return l}),a=["postalcode","paymentprofilename","returnprofilename","shippingprofilename","scheduletime"],o.reply("csv-opt-fieldnames",function(){return a}),s=function(){var e,t,n,o,r,i,s,f;for(t={action:"*Action"},n=0,i=l.length;n<i;n++)t[e=l[n]]="*"+c(e);for(o=0,s=a.length;o<s;o++)t[e=a[o]]=e;for(r=0,f=u.length;r<f;r++)t[e=u[r]]=e;return t},o.reply("create-csv-header",function(){return create-csv-header()}),i=s(),o.reply("get-csv-header",function(){return i}),o.reply("grouped-csv-fields",function(){return{ReqFieldNames:l,OptFieldNames:a,EbayFields:u}}),e.exports={}},212:function(e,t){},214:function(e,t){},220:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d;r=n(0),n(95),n(11),n(73),n(83),n(52),n(54),n(203),p=n(202),f=n(201),s=n(200),l=n(199),c=n(197),d=n(196),r.Radio.channel("messages"),o=r.Radio.channel("ebcsv"),a=o.request("grouped-csv-fields"),i=function(e){var t,n;return n={},t=e.cfg.get("content"),n.action=e.action,a.ReqFieldNames.forEach(function(e){return n[e]=t[e]}),a.OptFieldNames.forEach(function(e){return n[e]=t[e]}),a.EbayFields.forEach(function(e){return n[e]=""}),n},u=function(e){var t,n,o;return t=e.comic,e.cfg.get("content"),(o=i(e)).quantity!==t.quantity&&(o.quantity=t.quantity),p(o,e),f(o,e),s(o,e),l(o,e),c(o,e),(null!=(n=t.mainsection)?n.plot:void 0)&&(t.mainsection.plot=t.mainsection.plot.split("<br>").join("\n"),t.mainsection.plot=t.mainsection.plot.split("<BR>").join("\n")),d(o,e),o},o.reply("create-csv-row-object",function(e){return u(e)}),e.exports={}},221:function(e,t,n){"use strict";n(220),n(195)},23:function(e,t,n){var o={"./bumblr/main":262,"./ebcsv/main":246,"./frontdoor/main":194,"./moviedb/main":185,"./tvmaze/main":155};function r(e){var t=i(e);return n(t)}function i(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=23},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(0));r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.Radio.channel("ebcsv")},245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=(d(n(3)),d(n(0))),i=(d(n(1)),d(n(2))),u=d(n(11)),a=d(n(77)),l=d(n(127)),c=d(n(126)),s=d(n(10)),f=d(n(69)),p=d(n(244));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b,w,_,m,g,O,P,j,C=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")};w=n(80).MainController,r.default.Radio.channel("global"),_=r.default.Radio.channel("messages"),r.default.Radio.channel("resources"),m=r.default.Radio.channel("navbar"),g={id:"addcfg",label:"Create Cfg",url:"#ebcsv/configs/add",icon:".fa.fa-plus"},O={id:"adddsc",label:"Create Description",url:"#ebcsv/descriptions/add",icon:".fa.fa-plus"},function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,r.default.Marionette.View),o(t,[{key:"regions",value:function(){var e;return(e=new c.default({el:"#main-content"})).slide_speed=(0,u.default)(".01s"),{content:e,toolbar:"#main-toolbar"}}}]),t}();return e.prototype.behaviors={ShowInitialEmptyContent:{behaviorClass:l.default}},e.prototype.template=i.default.renderable(function(e){return i.default.div(".col-md-12",function(){return i.default.div(".row",function(){return i.default.div("#main-toolbar.col-md-10.col-md-offset-1")}),i.default.div(".row",function(){return i.default.div("#main-content.col-md-10.col-md-offset-1")})})}),e}.call(void 0),j=new r.default.Collection([]),p.default.reply("get-toolbar-entries",function(){return j}),P="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",function(){var e=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a.default),t}();return e.prototype.options={entryTemplate:i.default.renderable(function(e){var t;return t={style:P},i.default.span(t,function(){return i.default.i(e.icon),i.default.text(" "),i.default.text(e.label)})})},e}.call(void 0),b=function(e){function t(){h(this,t);var e=y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._showMainView=e._showMainView.bind(e),e._show_create_csv_view=e._show_create_csv_view.bind(e),e._show_preview_csv_view=e._show_preview_csv_view.bind(e),e.create_csv=e.create_csv.bind(e),e}return v(t,w),o(t,[{key:"_showMainView",value:function(){var e=this;return C(this,t),Promise.all([n.e(4),n.e(3),n.e(5),n.e(26)]).then(function(){var t,o;return t=p.default.request("get-comics"),o=new(n(243))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"_show_create_csv_view",value:function(){var e=this;return C(this,t),Promise.all([n.e(4),n.e(3),n.e(5),n.e(25)]).then(function(){var t,o;return t=p.default.request("get-comics"),o=new(n(237))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"_show_preview_csv_view",value:function(){var e=this;return C(this,t),Promise.all([n.e(4),n.e(24)]).then(function(){var t,o;return t=p.default.request("get-comics"),o=new(n(236))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"_needComicsView",value:function(e){return p.default.request("get-comics").length?e():(0,s.default)("#ebcsv/xml/upload")}},{key:"create_csv",value:function(){var e,n,o=this;return C(this,t),this.setupLayoutIfNeeded(),e=p.default.request("get_local_configs"),n=p.default.request("get_local_descriptions"),e.fetch().then(function(){return n.fetch().then(function(){return o._needComicsView(o._show_create_csv_view)})})}},{key:"preview_csv",value:function(){var e,t,n,o=this;if(this.setupLayoutIfNeeded(),e=p.default.request("get-current-csv-cfg"),t=p.default.request("get-current-csv-dsc"),n=p.default.request("get-superheroes-model"),void 0!==e)return e.fetch().then(function(){return t.fetch().then(function(){return n.fetch().then(function(){return o._needComicsView(o._show_preview_csv_view)})})});(0,s.default)("#ebcsv")}},{key:"main_view",value:function(){return this.setupLayoutIfNeeded(),this._needComicsView(this._showMainView)}},{key:"upload_xml",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(4),n.e(23)]).then(function(){var t,o;return t=p.default.request("get-comics"),o=new(n(235))({collection:t}),e.layout.showChildView("content",o)}.bind(null,n)).catch(n.oe)}},{key:"view_cached_comics",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(4),n.e(22)]).then(function(){var t;return t=new(n(234)),e.layout.showChildView("content",t)}.bind(null,n)).catch(n.oe)}},{key:"_setCfgEntries",value:function(){return m.request("get-entries","view").set([g])}},{key:"list_configs",value:function(){var e=this;return this.setupLayoutIfNeeded(),this._setCfgEntries(),n.e(21).then(function(){var t;return(t=p.default.request("get_local_configs")).fetch().done(function(o){var r;return console.log("ROWS",o,t),r=new(n(232))({collection:t}),e.layout.showChildView("content",r)})}.bind(null,n)).catch(n.oe)}},{key:"add_new_config",value:function(){var e=this;return this.setupLayoutIfNeeded(),this._setCfgEntries(),Promise.all([n.e(2),n.e(9)]).then(function(){var t;return t=new(n(124).NewFormView),e.layout.showChildView("content",t),(0,f.default)()}.bind(null,n)).catch(n.oe)}},{key:"view_config",value:function(e){var t=this;return this.setupLayoutIfNeeded(),this._setCfgEntries(),Promise.all([n.e(2),n.e(20)]).then(function(){var o,r,i;return o=n(231),r=p.default.request("get_local_configs"),(i=new r.model({id:e})).fetch().done(function(e){var n;return n=new o({model:i}),t.layout.showChildView("content",n),(0,f.default)()})}.bind(null,n)).catch(n.oe)}},{key:"edit_config",value:function(e){var t=this;return this.setupLayoutIfNeeded(),this._setCfgEntries(),Promise.all([n.e(2),n.e(9)]).then(function(){var o,r,i;return o=n(124),r=p.default.request("get_local_configs"),(i=new r.model({id:e})).fetch().done(function(e){var n;return n=new o.EditFormView({model:i}),t.layout.showChildView("content",n),(0,f.default)()})}.bind(null,n)).catch(n.oe)}},{key:"_setDscEntries",value:function(){return m.request("get-entries","view").set([O])}},{key:"list_descriptions",value:function(){var e=this;return this.setupLayoutIfNeeded(),this._setDscEntries(),n.e(19).then(function(){var t,o;return(o=(t=p.default.request("get_local_descriptions")).fetch()).done(function(o){var r;return r=new(n(230))({collection:t}),e.layout.showChildView("content",r)}),o.fail(function(){return _.request("danger","Failed to get descriptions")})}.bind(null,n)).catch(n.oe)}},{key:"add_new_description",value:function(){var e=this;return this.setupLayoutIfNeeded(),this._setDscEntries(),Promise.all([n.e(2),n.e(6),n.e(8)]).then(function(){var t;return t=new(n(123).NewFormView),e.layout.showChildView("content",t),(0,f.default)()}.bind(null,n)).catch(n.oe)}},{key:"view_description",value:function(e){var t=this;return this.setupLayoutIfNeeded(),this._setDscEntries(),n.e(18).then(function(){var o,r,i;return o=n(222),r=p.default.request("get_local_descriptions"),(i=new r.model({id:e})).fetch().done(function(e){var n;return n=new o({model:i}),t.layout.showChildView("content",n),(0,f.default)()})}.bind(null,n)).catch(n.oe)}},{key:"edit_description",value:function(e){var t,o=this;return this.setupLayoutIfNeeded(),this._setDscEntries(),t=p.default.request("get_local_descriptions"),Promise.all([n.e(2),n.e(6),n.e(8)]).then(function(){var r,i;return r=n(123),t=p.default.request("get_local_descriptions"),(i=new t.model({id:e})).fetch().done(function(e){var t;return t=new r.EditFormView({model:i}),o.layout.showChildView("content",t),(0,f.default)()})}.bind(null,n)).catch(n.oe)}}]),t}(),t.default=b},246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=s(n(0)),a=s(n(1)),l=s(n(81)),c=s(n(245));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(96),n(221),u.default.Radio.channel("global"),u.default.Radio.channel("resources"),i=[{id:"main",label:"Main View",url:"#ebcsv",icon:".fa.fa-eye"},{id:"cfglist",label:"Configs",url:"#ebcsv/configs/list",icon:".fa.fa-list"},{id:"dsclist",label:"Descriptions",url:"#ebcsv/descriptions/list",icon:".fa.fa-list"},{id:"uploadxml",label:"Upload CLZ/XML",url:"#ebcsv/xml/upload",icon:".fa.fa-upload"},{id:"mkcsv",label:"Create CSV",url:"#ebcsv/csv/create",icon:".fa.fa-cubes"},{id:"cached",label:"Cached Images",url:"#ebcsv/clzpage",icon:".fa.fa-image"},{id:"addcfg",label:"Create Cfg",url:"#ebcsv/configs/add",icon:".fa.fa-plus"}],r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,a.default.AppRouter),t}();return e.prototype.appRoutes={ebcsv:"main_view","ebcsv/xml/upload":"upload_xml","ebcsv/csv/create":"create_csv","ebcsv/csv/preview":"preview_csv","ebcsv/clzpage":"view_cached_comics","ebcsv/configs":"list_configs","ebcsv/configs/list":"list_configs","ebcsv/configs/add":"add_new_config","ebcsv/configs/view/:name":"view_config","ebcsv/configs/edit/:name":"edit_config","ebcsv/descriptions":"list_descriptions","ebcsv/descriptions/list":"list_descriptions","ebcsv/descriptions/add":"add_new_description","ebcsv/descriptions/view/:name":"view_description","ebcsv/descriptions/edit/:name":"edit_description"},e}.call(void 0),o=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,l.default),t}();return e.prototype.Controller=c.default,e.prototype.Router=r,e.prototype.appletEntries=[{label:"Ebcsv Menu",menu:i}],e.prototype.state={currentCsvAction:void 0,currentCsvConfig:void 0,currentCsvDsc:void 0},e}.call(void 0),t.default=o},257:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,a,l,c,s,f;u=n(0),n(1),f=n(2),u.Radio.channel("bumblr"),s=f.renderable(function(e){return f.p("main bumblr view")}),c=f.renderable(function(e){return f.p("bumblr_dashboard_view")}),l=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,u.Marionette.View),t}();return e.prototype.template=s,e}.call(void 0),a=function(){var e=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,u.Marionette.View),t}();return e.prototype.template=c,e}.call(void 0),e.exports={MainBumblrView:l,BumblrDashboardView:a}},260:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d,h,y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0},b=(O(n(3)),O(n(0))),w=O(n(68)),_=n(78),m=n(259),g=O(n(258));function O(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}c=b.default.Radio.channel("global"),o=b.default.Radio.channel("bumblr"),p=c.request("main:app:dbConn","bumblr"),s="//api.tumblr.com/v2",u=function(){var e=function(e){function t(){return P(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,w.default),y(t,[{key:"url",value:function(){return this.baseURL+"/blog/"+this.blogName+"/posts/photo?api_key="+this.apiKey}},{key:"fetch",value:function(e){return e||(e={}),e.data||{},this.state.currentPage,e.dataType="jsonp",v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e)}},{key:"parse",value:function(e){var n;return console.log("PARSE",e),n=e.response.total_posts,this.state.totalRecords=n,v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parse",this).call(this,e.response.posts)}}]),t}();return e.prototype.mode="server",e.prototype.full=!0,e.prototype.baseURL=s,e.prototype.state={firstPage:0,pageSize:15},e.prototype.queryParams={pageSize:"limit",offset:function(){return this.state.currentPage*this.state.pageSize}},e}.call(void 0),r=function(){var e=function(e){function t(){return P(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,b.default.Model),t}();return e.prototype.baseURL=s,e}.call(void 0),i=function(e){function t(){return P(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,r),y(t,[{key:"url",value:function(){return this.baseURL+"/blog/"+this.id+"/info?api_key="+this.apiKey+"&callback=?"}}]),t}(),function(e){function t(){return P(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}C(t,b.default.Collection),y(t,[{key:"url",value:function(){return s+"/"+this.id+"/posts/photo?callback=?"}}])}(),a=function(){var e=function(e){function t(){return P(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,g.default),t}();return e.prototype.id="bumblr_settings",e}.call(void 0),h=new a,o.reply("get_app_settings",function(){return h}),f="4mhV8B1YQK6PUA2NW8eZZXVHjU55TPJ3UZnZGrbSoCnqJaxDyH",h.get("consumer_key")||(console.log("saving initial app settings"),h.set("consumer_key",f),h.save()),new _.LoveStore(p,"Blog"),l=function(){var e=function(e){function t(){return P(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,m.BaseLocalStorageCollection),y(t,[{key:"addBlog",value:function(e){var t,n,o=this;return n=e+".tumblr.com",t=new this.model({id:n,name:e}),t.apiKey=h.get("consumer_key"),this.add(t),t.fetch().done(function(){return o.save()}),t}}]),t}();return e.prototype.model=i,e}.call(void 0),o.reply("make-blog-post-collection",function(e){var t,n;return t=h.get("consumer_key"),(n=new u).apiKey=t,n.blogName=e,n}),o.reply("make-pix-collection",function(e){var t,n;return t=h.get("consumer_key"),(n=new u).state={firstPage:0,pageSize:1},n.apiKey=t,n.blogName=e,n}),d=new l({apiKey:h.get("consumer_key")}),o.reply("get-local-blogs",function(){return d})},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=f(n(3)),l=f(n(0)),c=(f(n(1)),f(n(2)),f(n(69))),s=(f(n(10)),n(80));n(79);function f(e){return e&&e.__esModule?e:{default:e}}n(260),i=n(257),o=l.default.Radio.channel("bumblr"),r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.MainController),u(t,[{key:"set_header",value:function(e){return(0,a.default)("#header").text(e)}},{key:"start",value:function(){return this.setupLayoutIfNeeded(),this.set_header("Bumblr"),this.listBlogs()}},{key:"default_view",value:function(){return this.start()}},{key:"show_mainview",value:function(){var e;return e=new i.MainBumblrView,this.layout.showChildView("content",e),(0,c.default)()}},{key:"showDashboard",value:function(){var e;return e=new i.BumblrDashboardView,this.layout.showChildView("content",e),(0,c.default)()}},{key:"listBlogs",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(4),n.e(17)]).then(function(){var t,r;return t=o.request("get-local-blogs"),r=new(n(256))({collection:t}),e.layout.showChildView("content",r)}.bind(null,n)).catch(n.oe)}},{key:"viewBlog",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(4),n.e(16)]).then(function(){var r,i,u;return u=e+".tumblr.com",i=o.request("make-blog-post-collection",u),r=n(252),i.fetch().done(function(){var e;return e=new r({collection:i}),t.layout.showChildView("content",e),(0,c.default)()})}.bind(null,n)).catch(n.oe)}},{key:"viewBlogPix",value:function(e){var t=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(4),n.e(16)]).then(function(){var r,i,u;return u=e+".tumblr.com",i=o.request("make-pix-collection",u),window.pix=i,r=n(251),i.getFirstPage().done(function(){var e;return e=new r({collection:i}),t.layout.showChildView("content",e),(0,c.default)()})}.bind(null,n)).catch(n.oe)}},{key:"addNewBlog",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(15)]).then(function(){var t;return t=new(n(250)),e.layout.showChildView("content",t),(0,c.default)()}.bind(null,n)).catch(n.oe)}},{key:"settingsPage",value:function(){var e=this;return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(14)]).then(function(){var t;return t=new(0,n(247).default)({model:o.request("get_app_settings")}),e.layout.showChildView("content",t),(0,c.default)()}.bind(null,n)).catch(n.oe)}}]),t}(),t.default=r},262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(n(1)),l=s(n(81)),c=s(n(261));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Backbone.Radio.channel("global"),o=Backbone.Radio.channel("bumblr"),i=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,a.default.AppRouter),t}();return e.prototype.appRoutes={bumblr:"start","bumblr/settings":"settingsPage","bumblr/dashboard":"showDashboard","bumblr/listblogs":"listBlogs","bumblr/viewblog/:id":"viewBlog","bumblr/addblog":"addNewBlog","bumblr/viewpix/:id":"viewBlogPix"},e}.call(void 0),r=function(){var e=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,l.default),u(t,[{key:"onBeforeStart",value:function(){var e;return(e=o.request("get-local-blogs")).fetch(),e.isEmpty()&&["dutch-and-flemish-painters","gkar56","japanesesuburbia","8bitfuture","elfwud","hexeosis","pixel8or","necessary-disorder"].forEach(function(t){return e.addBlog(t)}),function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onBeforeStart",this).call(this,arguments)}}]),t}();return e.prototype.Controller=c.default,e.prototype.Router=i,e.prototype.appletEntries=[{label:"Bumblr Menu",menu:[{label:"List Blogs",url:"#bumblr/listblogs",icon:".fa.fa-list"},{label:"Add Blog",url:"#bumblr/addblog",icon:".fa.fa-plus"},{label:"Settings",url:"#bumblr/settings",icon:".fa.fa-gear"}]}],e}.call(void 0),t.default=r},96:function(e,t,n){"use strict";var o,r,i,u,a,l,c,s,f,p,d,h,y,v,b,w,m,g,O,P,j,C,k=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),R=q(n(3)),S=q(n(0)),E=n(78);function q(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}v=S.default.Radio.channel("global"),o=S.default.Radio.channel("ebcsv"),O=v.request("main:app:dbConn","ebcsv"),s=new E.LoveStore(O,"Config"),f=new E.LoveStore(O,"Description"),c=new E.LoveStore(O,"ComicUrl"),p=function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,S.default.Model),t}();return e.prototype.loveStore=s,e}.call(void 0),d=function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,S.default.Collection),t}();return e.prototype.loveStore=s,e.prototype.model=p,e}.call(void 0),y=function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,S.default.Model),t}();return e.prototype.loveStore=f,e}.call(void 0),h=function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,S.default.Collection),t}();return e.prototype.loveStore=f,e.prototype.model=y,e}.call(void 0),a=function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,S.default.Model),k(t,[{key:"idAttrubute",value:function(){return"url"}}]),t}();return e.prototype.loveStore=c,e}.call(void 0),l=function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,S.default.Collection),t}();return e.prototype.loveStore=c,e.prototype.model=a,e}.call(void 0),j=new d,C=new h,g=new l,o.reply("get_local_configs",function(){return j}),o.reply("get-config-model",function(){return p}),o.reply("configCollection",function(){return d}),o.reply("get_local_descriptions",function(){return C}),o.reply("get-description-model",function(){return y}),o.reply("descCollection",function(){return h}),o.reply("get_comic_urls",function(){return g}),o.reply("get-comic-url-model",function(){return a}),o.reply("get-comic-url-collection",function(){return l}),u=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,S.default.Model),k(t,[{key:"initialize",value:function(){return this.fetch(),this.on("change",this.save,this)}},{key:"fetch",value:function(){return this.set(JSON.parse(localStorage.getItem(this.id)))}},{key:"save",value:function(e,t){return localStorage.setItem(this.id,JSON.stringify(this.toJSON())),R.default.ajax({success:t.success,error:t.error})}},{key:"destroy",value:function(e){return localStorage.removeItem(this.id)}},{key:"isEmpty",value:function(){return _.size(this.attributes<=1)}}]),t}(),w=["format","location","returnsacceptedoption","duration","quantity","startprice","dispatchtimemax","conditionid"],o.reply("csv-req-fieldnames-local",function(){return w}),b=["postalcode","paymentprofilename","returnprofilename","shippingprofilename","scheduletime"],o.reply("csv-opt-fieldnames-local",function(){return b}),i=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,u),t}(),function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,i),t}();return e.prototype.fieldType="required",e.prototype.fieldNames=w,e}.call(void 0),function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,i),t}();return e.prototype.fieldType="optional",e.prototype.fieldNames=b,e}.call(void 0),o.reply("get-comic-image-urls",function(){return console.warn("get-comic-image-urls"),new u({id:"comic-image-urls"}).toJSON()}),o.reply("add-comic-image-url",function(e,t){return new u({id:"comic-image-urls"}).set(e,t)}),o.reply("clear-comic-image-urls",function(){var e;return(e=new u({id:"comic-image-urls"})).destroy(),console.log("localStorage",localStorage[e.id])}),r={},o.reply("applet:local:get",function(e){return r[e]}),o.reply("applet:local:set",function(e,t){return r[e]=t}),o.reply("applet:local:delete",function(e){return delete r[e]}),o.reply("set-current-csv-action",function(e){return o.request("applet:local:set","currentCsvAction",e)}),o.reply("get-current-csv-action",function(){return o.request("applet:local:get","currentCsvAction")}),o.reply("set-current-csv-cfg",function(e){return o.request("applet:local:set","currentCsvCfg",e)}),o.reply("get-current-csv-cfg",function(){return o.request("applet:local:get","currentCsvCfg")}),o.reply("set-current-csv-dsc",function(e){return o.request("applet:local:set","currentCsvDsc",e)}),o.reply("get-current-csv-dsc",function(){return o.request("applet:local:get","currentCsvDsc")}),m=function(){var e=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,S.default.Model),t}();return e.prototype.url="/assets/data/superheroes.json",e}.call(void 0),P=new m,o.reply("get-superheroes-model",function(){return P})}}]);
//# sourceMappingURL=1-40f9d0620071cd281e4f.js.map