(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{102:function(e,t,n){e.exports=function(){return new Worker(n.p+"8fcdd13cb3c1680eba54.worker.js")}},42:function(e,t,n){"use strict";n.r(t);var o,r,a,l,i,s,u,c,d,h,m,p,w,v,f,y,g,b,S,z,x,C,_,R,N=n(1),k=n.n(N),L=n(3),V=n.n(L),I=n(61),q=n(45),M=(n(2),n(14),n(51),n(60)),E=n(55),O=(n(13),n(4),n(59));n(89);l=k.a.Radio.channel("global"),o=k.a.Radio.channel("tvmaze"),s=l.request("main:app:dbConn","tvmaze"),i=new O.LoveStore(s,"TVMazeShow"),c=["id","name","url","self","premiered","runtime","network_name","imdb","status","summary","img_med","img_orig","content"],r=function(){class e extends k.a.Model{toJSON(){var e;return e={},c.forEach(t=>e[t]=this.get(t)),e}}return e.prototype.loveStore=i,e}.call(this),a=function(){class e extends k.a.Collection{}return e.prototype.loveStore=i,e.prototype.model=r,e}.call(this),u=new a,o.reply("get-local-tvshows",function(){return u}),o.reply("get-local-tvshow-model",function(){return r}),o.reply("get-local-tvshow-collection",function(){return a}),o.reply("save-local-show",function(e){var t,n,o,a,l,i;return t=new r({id:e.id,name:e.name,url:e.url,self:e._links.self.href,premiered:new Date(e.premiered),runtime:(null!=e?e.runtime:void 0)||"",network_name:(null!=e&&null!=(n=e.network)?n.name:void 0)||"NO NETWORK",imdb:(null!=(o=e.externals)?o.imdb:void 0)||"",status:(null!=e?e.status:void 0)||"",summary:(null!=e?e.summary:void 0)||"",img_med:(null!=e&&null!=(a=e.image)?a.medium:void 0)||"",img_orig:(null!=e&&null!=(l=e.image)?l.original:void 0)||"",content:e}),i=!0,t.isNew=function(){return!!i&&(i=!1,!0)},u.add(t),t.save()}),p=k.a.Radio.channel("global"),d=k.a.Radio.channel("tvmaze"),v=p.request("main:app:dbConn","tvmaze"),w=new O.LoveStore(v,"TVMazeEpisode"),f=["id","show_id","name","url","self","season","number","airdate","airtime","runtime","summary","img_med","img_orig","content"],h=function(){class e extends k.a.Model{toJSON(){var e;return e={},f.forEach(t=>e[t]=this.get(t)),e}}return e.prototype.loveStore=w,e}.call(this),m=function(){class e extends k.a.Collection{}return e.prototype.loveStore=w,e.prototype.model=h,e}.call(this),y=new m,d.reply("get-local-episodes",function(){return y}),d.reply("get-local-episode-model",function(){return h}),d.reply("get-local-episode-collection",function(){return m}),d.reply("save-local-episode",function(e){var t,n,o,r,a,l,i,s,u;return t=new h({id:e.id,show_id:e.show_id,name:e.content.name,url:e.content.url,self:null!=(n=e.content._links)?n.self.href:void 0,season:e.content.season,number:e.content.number,airdate:new Date(e.content.airdate),airtime:e.content.airtime,runtime:(null!=(o=e.content)?o.runtime:void 0)||"",summary:(null!=(r=e.content)?r.summary:void 0)||"",img_med:(null!=(a=e.content)&&null!=(l=a.image)?l.medium:void 0)||"",img_orig:(null!=(i=e.content)&&null!=(s=i.image)?s.original:void 0)||"",content:e.content}),u=!0,t.isNew=function(){return!!u&&(u=!1,!0)},y.add(t),t.save()}),k.a.Radio.channel("global"),g=k.a.Radio.channel("tvmaze"),_="//api.tvmaze.com",C=class extends k.a.Model{url(){var e;return e=this.searchName,`${_}/singlesearch/shows?q=${e}`}},g.reply("single-show-search",function(e){var t;return(t=new C).searchName=e,t}),x=class extends k.a.Collection{url(){return`${_}/search/shows`}},g.reply("new-tv-show-search",function(e){return new x(e=e||{})}),g.reply("tv-show-search-collection",function(){return x}),g.reply("search-tv-shows",function(e){return new x}),z=class extends k.a.Model{urlRoot(){return`${_}/shows`}},g.reply("get-remote-show",function(e){return new z({id:e})}),b=class extends k.a.Model{url(){return this.get("_links").self.href}},S=function(){class e extends k.a.Collection{url(){return`${_}/shows/${this.showId}/episodes`}}return e.prototype.model=b,e}.call(this),g.reply("get-remote-episodes",function(e){var t;return(t=new S).showId=e,t}),n(53),k.a.Radio.channel("global"),k.a.Radio.channel("messages"),k.a.Radio.channel("resources"),R=k.a.Radio.channel("tvmaze");var T,$,P,D=function(){class e extends M.MainController{viewIndex(){return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(9),n.e(11),n.e(38)]).then((()=>{var e,t,o;return o=R.request("get-local-tvshows"),e=R.request("tv-show-search-collection"),t=n(170),o.fetch().then(()=>{var n;return n=new t({collection:new e}),this.layout.showChildView("content",n)})}).bind(null,n)).catch(n.oe)}viewShowList(){var e;return this.setupLayoutIfNeeded(),e=R.request("get-local-tvshows"),0,Promise.all([n.e(2),n.e(10),n.e(37)]).then((()=>{var t;return t=n(169),this._loadView(t,e,"tvshow")}).bind(null,n)).catch(n.oe)}viewShowListFlat(){var e;return this.setupLayoutIfNeeded(),e=R.request("get-local-tvshows"),0,Promise.all([n.e(2),n.e(36)]).then((()=>{var t;return t=n(168),this._loadView(t,e,"tvshow")}).bind(null,n)).catch(n.oe)}viewSearchShow(){return this.setupLayoutIfNeeded(),0,Promise.all([n.e(2),n.e(9),n.e(35)]).then((()=>{var e;return e=new(n(167)),this.layout.showChildView("content",e)}).bind(null,n)).catch(n.oe)}viewShow(e){return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(9),n.e(11),n.e(34)]).then((()=>{var t,o;return t=n(166),o=new(R.request("get-local-tvshow-model"))({id:e}),this._loadView(t,o,"tvshow")}).bind(null,n)).catch(n.oe)}importSampleData(){return this.setupLayoutIfNeeded(),Promise.all([n.e(2),n.e(33)]).then((()=>{var e,t;return t=R.request("get-local-tvshows"),R.request("tv-show-search-collection"),e=n(165),t.fetch().then(()=>{var t;return t=new e,this.layout.showChildView("content",t)})}).bind(null,n)).catch(n.oe)}}return e.prototype.layoutClass=E.a,e}.call(this);n(102);k.a.Radio.channel("global"),k.a.Radio.channel("tvmaze"),P=[{label:"List Shows",url:"#tvmaze/shows",icon:".fa.fa-list"},{label:"Search Show",url:"#tvmaze/searchshow",icon:".fa.fa-search"},{label:"Import Sample Data",url:"#tvmaze/import-sample-data",icon:".fa.fa-download"},{label:"Calendar",url:"#tvmaze/calendar",icon:".fa.fa-calendar"}],$=function(){class e extends V.a.AppRouter{}return e.prototype.appRoutes={tvmaze:"viewIndex","tvmaze/searchshow":"viewSearchShow","tvmaze/shows":"viewShowList","tvmaze/shows/flat":"viewShowListFlat","tvmaze/shows/view/:id":"viewShow","tvmaze/import-sample-data":"importSampleData"},e}.call(this),T=function(){class e extends I.a{}return e.prototype.Controller=D,e.prototype.Router=$,e.prototype.appletEntries=[{label:`${Object(q.default)("tvmaze")} Menu`,menu:P},{label:"List Shows",url:"#tvmaze/shows"}],e}.call(this);t.default=T},45:function(e,t,n){"use strict";n.r(t),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},51:function(e,t,n){"use strict";n.r(t);var o,r,a,l,i=n(3),s=n.n(i),u=n(2),c=n.n(u),d=n(13);l=c.a.renderable(function(e){return c.a.i(e.icon),c.a.text(" "),c.a.text(e.label)}),r=function(){class e extends s.a.View{}return e.prototype.tagName="button",e.prototype.attributes={class:"btn btn-secondary"},e.prototype.triggers={click:"button:clicked"},e.prototype.modelEvents={change:"render"},e}.call(this),o=function(){class e extends s.a.CollectionView{childViewOptions(){return{template:this.options.entryTemplate}}onChildviewButtonClicked(e){return this.trigger("toolbar:entry:clicked",e)}}return e.prototype.childView=r,e.prototype.className="btn-group btn-group-justified",e}.call(this),a=function(){class e extends s.a.View{onRender(){var e,t;return e=this.options.entryTemplate||l,t=new o({collection:this.collection,entryTemplate:e}),this.showChildView("entries",t)}onChildviewToolbarEntryClicked(e){return Object(d.default)(e.model.get("url"))}}return e.prototype.template=c.a.renderable(function(){return c.a.div(".toolbar-entries")}),e.prototype.regions={entries:{el:".toolbar-entries"}},e}.call(this),t.default=a}}]);