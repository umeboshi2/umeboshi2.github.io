(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{682:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r,u,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=p(n(4)),a=p(n(5)),l=p(n(15)),f=(p(n(28)),p(n(1))),s=(p(n(157)),p(n(521))),d=p(n(468));function p(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}o=c.default.Radio.channel("pmc"),u=function(){var t=function(t){function e(){return h(this,e),b(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return w(e,t),i(e,[{key:"templateContext",value:function(){return{hasOAIcontent:this.model.hasOAIcontent()}}},{key:"onRender",value:function(){var t;if(this.model.hasOAIcontent())return t=new d.default({model:this.model}),this.showChildView("content",t)}},{key:"buttonClicked",value:function(){var t,e;if(e=this,!(t=this.model).get("content"))return t.fetch().done((function(){var n,r;return r=Number(t.get("id")),n=t.get("content"),o.request("save-fm-content",r,n).then((function(){var t;return(t=o.request("get-fm-collection")).fetch().done((function(){var n,o;return n=t.get(r),e.model=n,o=new d.default({model:n}),e.showChildView("content",o),e.ui.button.hide()}))}))}))}}]),e}(a.default.View);return t.prototype.template=l.default.renderable((function(t){return l.default.text("PMCID: PMC"+t.id+" "),t.hasOAIcontent||(".btn.btn-outline-warning.btn-sm",l.default.button(".dl-btn.btn.btn-outline-warning.btn-sm.fa.fa-download",(function(){return" Download Front Matter"}))),l.default.div(".content")})),t.prototype.ui={content:".content",button:".dl-btn"},t.prototype.regions={content:"@ui.content"},t.prototype.events={"click @ui.button":"buttonClicked"},t}.call(void 0),r=function(){var t=function(t){function e(){return h(this,e),b(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return w(e,t),i(e,[{key:"onRender",value:function(){var t;return t=new s.default,this.showChildView("searchInput",t)}},{key:"searchClicked",value:function(t){return this.searchTerm(t.value)}},{key:"searchTerm",value:function(t){var e,n=this;return console.log("searchTerm",t),(e=o.request("make-search-model",t)).fetch().done((function(){var t,r,i,l;return r=new c.default.Collection([]),t=o.request("get-fm-collection"),i=e.get("eSearchResult"),f.default.map(i.IdList.Id,Number).forEach((function(n){var u;return null!=(u=t.get(n))?(console.log("LOCAL model found",u),e=u):e=o.request("make-remote-model",n),r.add(e)})),l=new a.default.CollectionView({collection:r,childView:u}),n.showChildView("content",l)}))}}]),e}(a.default.View);return t.prototype.template=l.default.renderable((function(t){return l.default.div(".search-input"),l.default.div(".content")})),t.prototype.ui={searchInput:".search-input",content:".content",button:"button",input:"input"},t.prototype.regions={content:"@ui.content",searchInput:"@ui.searchInput"},t.prototype.childViewEvents={"input:submit":"searchClicked"},t}.call(void 0),e.default=r}}]);
//# sourceMappingURL=pmc-view-search-pmc-48740867787ce57bbe12.js.map