{"version":3,"sources":["webpack:///./src/applets/bumblr/views/picview.coffee","webpack:///./src/applets/bumblr/views/postlist.coffee","webpack:///./node_modules/imagesloaded/imagesloaded.js"],"names":["$","Backbone","BlogPostListView","Masonry","SimpleBlogPostView","imagesLoaded","imgStyle","simple_post_page_view","simple_post_view","tc","boundMethodCheck","instance","Constructor","Error","__webpack_require__","Radio","channel","renderable","div","button","i","post","style","span","photo","url","photos","console","log","original_size","a","href","post_url","target","img","src","Marionette","View","template","className","CompositeView","keydownHandler","this","bind","[object Object]","ui","slideshow_button","hasClass","start_slideshow","stop_slideshow","slideshow_handler","setInterval","get_next_page","removeClass","addClass","clearInterval","collection","getNextPage","done","set_image_layout","getPreviousPage","direction","response","command","get_another_page","event_object","key","ref","results","value","keycommands","keyCode","handle_key_command","items","posts","show","masonry","reloadItems","layout","keydown","gutter","isInitLayout","itemSelector","unbind","destroy","childView","childViewContainer","next_button","prev_putton","events","click @ui.prev_putton","click @ui.next_button","click @ui.slideshow_button","prev","next","module","exports","ul","li","current_size","current_width","len","size","alt_sizes","length","width","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","window","factory","undefined","EvEmitter","jQuery","extend","b","prop","arraySlice","Array","prototype","slice","ImagesLoaded","elem","options","onAlways","queryElem","document","querySelectorAll","elements","obj","isArray","call","makeArray","on","getImages","jqDeferred","Deferred","setTimeout","check","error","Object","create","images","forEach","addElementImages","nodeName","addImage","background","addElementBackgroundImages","nodeType","elementNodeTypes","childImgs","children","child","1","9","11","LoadingImage","Background","element","Image","getComputedStyle","reURL","matches","exec","backgroundImage","addBackground","loadingImage","push","_this","onProgress","image","message","progress","progressedCount","hasAnyBroken","once","complete","isLoaded","emitEvent","notify","debug","eventName","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","addEventListener","handleEvent","event","method","type","onload","unbindEvents","onerror","removeEventListener","makeJQueryPlugin","fn","callback","promise","apply"],"mappings":"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","file":"bumblr-view-blog-view-a5ff4d5c9716d2ff21c6.js","sourcesContent":["$ = require 'jquery'\nBackbone = require 'backbone'\nMarionette = require 'backbone.marionette'\nMasonry = require 'masonry-layout'\nimagesLoaded = require 'imagesloaded'\ntc = require 'teacup'\n\n\n#require 'jquery-ui'\n\nnavigate_to_url = require 'tbirds/util/navigate-to-url'\n\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\n########################################\nsimple_post_page_view = tc.renderable () ->\n  tc.div '.mytoolbar.row', ->\n    tc.div '.btn-group', ->\n      tc.button '.previous.btn.btn-default', ->\n        tc.i '#prev-page-button.fa.fa-arrow-left'\n      tc.button '.slideshow-button.btn.btn-default', ->\n        tc.i '.fa.fa-play'\n      tc.button '.next.btn.btn-default', ->\n        tc.i '#next-page-button.fa.fa-arrow-right'\n    #icon '#prev-page-button.fa.fa-arrow-left.btn.btn-default.pull-left'\n    #icon '#slideshow-button.fa.fa-play.btn.btn-default'\n  tc.div '#posts-container.row'\n\n\nimgStyle = \"vertical-align:middle;height:100%;max-width:100%;max-height:100%;\"\nimgStyle = \"position:fixed;top:0;bottom:0;#{imgStyle}\"\ndivStyle = \"height:100%;width:100%;\"\n\nsimple_post_view = tc.renderable (post) ->\n  tc.div '.listview-list-entry', style: divStyle, ->\n    #p ->\n    # a href:post.post_url, target:'_blank', post.blog_name\n    tc.span ->\n      #for photo in post.photos\n      photo = post.photos[0]\n      current_width = 0\n      current_size = null\n      console.log \"photo\", photo\n      url = photo.original_size.url\n      tc.a href:post.post_url, target:'_blank', ->\n        tc.img src:url, style: imgStyle\n\n########################################\nclass SimpleBlogPostView extends Backbone.Marionette.View\n  template: simple_post_view\n  className: 'post'\n\n\n\n\nclass BlogPostListView extends Backbone.Marionette.CompositeView\n  template: simple_post_page_view\n  childView: SimpleBlogPostView\n  childViewContainer: '#posts-container'\n  ui:\n    posts: '#posts-container'\n    slideshow_button: '.slideshow-button'\n    next_button: '#next-page-button'\n    prev_putton: '#prev-page-button'\n    \n  events:\n    'click @ui.prev_putton': 'get_prev_page'\n    'click @ui.next_button': 'get_next_page'\n    'click @ui.slideshow_button': 'manage_slideshow'\n\n  keycommands:\n    prev: 65\n    next: 90\n\n  manage_slideshow: () ->\n    button = @ui.slideshow_button\n    if button.hasClass 'fa-play'\n      @start_slideshow()\n    else\n      @stop_slideshow()\n\n\n  start_slideshow: () ->\n    console.log \"start slideshow\"\n    @slideshow_handler = setInterval =>\n      console.log \"getting next page\"\n      @get_next_page()\n    , 6000\n    @ui.slideshow_button.removeClass 'fa-play'\n    @ui.slideshow_button.addClass 'fa-stop'\n\n  stop_slideshow: () ->\n    clearInterval @slideshow_handler\n    @ui.slideshow_button.removeClass 'fa-stop'\n    @ui.slideshow_button.addClass 'fa-play'\n\n  get_next_page: () ->\n    response = @collection.getNextPage()\n    response.done =>\n      @set_image_layout()\n\n  get_prev_page: () ->\n    response = @collection.getPreviousPage()\n    response.done =>\n      @set_image_layout()\n\n  get_another_page: (direction) ->\n    #@ui.posts.hide()\n    switch direction\n      when 'prev' then response = @collection.getPreviousPage()\n      when 'next' then response = @collection.getNextPage()\n      else response = null\n    if response\n      response.done =>\n        @set_image_layout()\n\n  handle_key_command: (command) ->\n    if command in ['prev', 'next']\n      @get_another_page command\n\n  keydownHandler: (event_object) =>\n    #console.log 'keydownHandler ' + event_object\n    for key, value of @keycommands\n      if event_object.keyCode == value\n        @handle_key_command key\n\n  set_image_layout: ->\n    items = $ '.post'\n    imagesLoaded items, =>\n      @ui.posts.show()\n      #console.log \"Images Loaded>..\"\n      @masonry.reloadItems()\n      @masonry.layout()\n      \n  onDomRefresh: () ->\n    $('html').keydown @keydownHandler\n    @masonry = new Masonry \"#posts-container\",\n      gutter: 2\n      isInitLayout: false\n      itemSelector: '.post'\n    @set_image_layout()\n\n  onBeforeDestroy: () ->\n    #console.log \"Remove @keydownHandler\" + @keydownHandler\n    $('html').unbind 'keydown', @keydownHandler\n    @stop_slideshow()\n    @masonry.destroy()\n\n\n\nmodule.exports = BlogPostListView\n","$ = require 'jquery'\nBackbone = require 'backbone'\nMarionette = require 'backbone.marionette'\nMasonry = require 'masonry-layout'\nimagesLoaded = require 'imagesloaded'\ntc = require 'teacup'\n\n\n#require 'jquery-ui'\n\nnavigate_to_url = require 'tbirds/util/navigate-to-url'\n\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\n########################################\nsimple_post_page_view = tc.renderable () ->\n  tc.div '.mytoolbar.row', ->\n    tc.ul '.pager', ->\n      tc.li '.previous', ->\n        tc.i '#prev-page-button.fa.fa-arrow-left.btn.btn-default'\n      tc.li ->\n        tc.i '#slideshow-button.fa.fa-play.btn.btn-default'\n      tc.li '.next', ->\n        tc.i '#next-page-button.fa.fa-arrow-right.btn.btn-default'\n    #icon '#prev-page-button.fa.fa-arrow-left.btn.btn-default.pull-left'\n    #icon '#slideshow-button.fa.fa-play.btn.btn-default'\n  tc.div '#posts-container.row'\n\nsimple_post_view = tc.renderable (post) ->\n  tc.div '.listview-list-entry', ->\n    #p ->\n    # a href:post.post_url, target:'_blank', post.blog_name\n    tc.span ->\n      #for photo in post.photos\n      photo = post.photos[0]\n      current_width = 0\n      current_size = null\n      for size in photo.alt_sizes\n        if size.width > current_width and size.width < 250\n          current_size = size\n          current_width = size.width\n      size = current_size\n      tc.a href:post.post_url, target:'_blank', ->\n        tc.img src:size.url\n\n########################################\nclass SimpleBlogPostView extends Backbone.Marionette.View\n  template: simple_post_view\n  className: 'post'\n\n\n\n\nclass BlogPostListView extends Backbone.Marionette.CompositeView\n  template: simple_post_page_view\n  childView: SimpleBlogPostView\n  childViewContainer: '#posts-container'\n  ui:\n    posts: '#posts-container'\n    slideshow_button: '#slideshow-button'\n    next_button: '#next-page-button'\n    prev_putton: '#prev-page-button'\n    \n  events:\n    'click @ui.prev_putton': 'get_prev_page'\n    'click @ui.next_button': 'get_next_page'\n    'click @ui.slideshow_button': 'manage_slideshow'\n\n  keycommands:\n    prev: 65\n    next: 90\n\n  manage_slideshow: () ->\n    button = @ui.slideshow_button\n    if button.hasClass 'fa-play'\n      @start_slideshow()\n    else\n      @stop_slideshow()\n\n\n  start_slideshow: () ->\n    console.log \"start slideshow\"\n    @slideshow_handler = setInterval =>\n      console.log \"getting next page\"\n      @get_next_page()\n    , 6000\n    @ui.slideshow_button.removeClass 'fa-play'\n    @ui.slideshow_button.addClass 'fa-stop'\n\n  stop_slideshow: () ->\n    clearInterval @slideshow_handler\n    @ui.slideshow_button.removeClass 'fa-stop'\n    @ui.slideshow_button.addClass 'fa-play'\n\n  get_next_page: () ->\n    #@ui.posts.hide()\n    response = @collection.getNextPage()\n    response.done =>\n      @set_image_layout()\n\n  get_prev_page: () ->\n    response = @collection.getPreviousPage()\n    response.done =>\n      @set_image_layout()\n\n  get_another_page: (direction) ->\n    #@ui.posts.hide()\n    switch direction\n      when 'prev' then response = @collection.getPreviousPage()\n      when 'next' then response = @collection.getNextPage()\n      else response = null\n    if response\n      response.done =>\n        @set_image_layout()\n\n  handle_key_command: (command) ->\n    if command in ['prev', 'next']\n      @get_another_page command\n\n  keydownHandler: (event_object) =>\n    #console.log 'keydownHandler ' + event_object\n    for key, value of @keycommands\n      if event_object.keyCode == value\n        @handle_key_command key\n\n  set_image_layout: ->\n    items = $ '.post'\n    imagesLoaded items, =>\n      @ui.posts.show()\n      #console.log \"Images Loaded>..\"\n      @masonry.reloadItems()\n      @masonry.layout()\n      \n  onDomRefresh: () ->\n    $('html').keydown @keydownHandler\n    @masonry = new Masonry \"#posts-container\",\n      gutter: 2\n      isInitLayout: false\n      itemSelector: '.post'\n    @set_image_layout()\n\n  onBeforeDestroy: () ->\n    #console.log \"Remove @keydownHandler\" + @keydownHandler\n    $('html').unbind 'keydown', @keydownHandler\n    @stop_slideshow()\n    @masonry.destroy()\n\n\n\nmodule.exports = BlogPostListView\n","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n"],"sourceRoot":""}