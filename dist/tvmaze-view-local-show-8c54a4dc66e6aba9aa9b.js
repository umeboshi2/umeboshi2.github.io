(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{128:function(e,t,i){var s,n,r,o,a,u,l,h,d;s=i(2),a=i(3),d=i(0),o=i(49),i(48),({navigate_to_url:h}=i(14)),({form_group_input_div:l}=i(43)),i(45).default,s.Radio.channel("messages"),s.Radio.channel("tvmaze"),u=d.renderable(function(e){return d.div(".card.bg-body-d10",function(){return d.div(".card-header",function(){return e.summary||e.img_med?d.span(".text-local-secondary",{href:"#"},e.name):d.span(".text-light",e.name),d.span(".bg-body-d5.pull-right",function(){return e.season&&(d.span(`Season ${e.season}`),d.raw("&nbsp;&nbsp;&nbsp;")),d.span(".bg-body-d10",e.airdate.toDateString())})}),d.div(".card-block",function(){return d.div(".summary.row",{style:"display:none"},function(){return(null!=e?e.img_med:void 0)?(d.div(".col-md-7",function(){return d.raw(e.summary)}),d.div(".col-md-5",function(){return d.img(".card-img-bottom.pull-right",{src:e.img_med})})):d.div(".col-md-12",function(){return d.raw(e.summary)})}),d.div(".jsonview")})})}),r=function(){class e extends a.View{canShowSummary(){var e,t;return t=this.model.get("summary"),e=this.model.get("img_med"),t||e}showEpisodeSummary(e){if(e.preventDefault(),this.canShowSummary())return this.ui.summary.toggle()}onDomRefreshJsonVIew(){return this.jsonview=new o(this.model.toJSON()),this.ui.objectContainer.prepend(this.jsonview.dom)}handleHover(){if(this.canShowSummary())return this.$el.css({cursor:"pointer"})}}return e.prototype.template=u,e.prototype.ui={summary:".summary",objectContainer:".jsonview"},e.prototype.regions={summary:"@ui.summary",objectContainer:"@ui.objectContainer"},e.prototype.events={click:"showEpisodeSummary",mouseenter:"handleHover"},e}.call(this),n=function(){class e extends a.View{onRender(){var e;return e=new a.CollectionView({collection:this.collection,childView:r}),this.showChildView("itemList",e)}}return e.prototype.template=d.renderable(function(e){return d.div(".listview-header",function(){return d.text("Episodes")}),d.div(".episode-list")}),e.prototype.ui={header:".listview-header",itemList:".episode-list"},e.prototype.regions={itemList:"@ui.itemList"},e}.call(this),e.exports=n},205:function(e,t,i){var s,n,r,o,a,u,l,h,d,c,v;i(4),n=i(2),a=i(3),v=i(0),i(44),o=i(49),i(48),i(47).default,({navigate_to_url:d}=i(14)),({form_group_input_div:h}=i(43)),c=i(45).default,r=i(128),u=n.Radio.channel("messages"),s=n.Radio.channel("tvmaze"),l=function(){class e extends a.View{onDomRefresh(){var e;return this.jsonView=new o(this.model.toJSON().content),this.ui.body.prepend(this.jsonView.dom),e=s.request("get-local-episode-collection"),this.localEpisodes=new e,this.showLocalEpisodes()}showLocalEpisodes(){return this.localEpisodes.fetch({data:{show_id:this.model.get("id")}}).done(()=>{var e,t;return this.localEpisodes.isEmpty()?(u.request("info","Retrieving episodes..."),e=s.request("get-remote-episodes",this.model.id),e.fetch().done(()=>this.saveEpisodes(e))):(t=new r({collection:this.localEpisodes}),this.showChildView("episodes",t))})}saveEpisodes(e){var t,i;return i=this.model.get("id"),t=[],e.models.forEach(function(e){var n,r;return n={id:e.get("id"),show_id:i,content:e.toJSON()},r=s.request("save-local-episode",n),t.push(r)}),Promise.all(t).then(e=>(t.length&&this.showLocalEpisodes(),u.request("success",`Retrieved ${t.length} episodes.`)))}}return e.prototype.template=v.renderable(function(e){var t;return t=e.content,v.div(".card.bg-body-d5",function(){return v.div(".row",function(){return v.div(".col-md-2",function(){var i;return(null!=(i=t.image)?i.medium:void 0)?v.img(".card-img-bottom",{src:e.content.image.medium}):c("5x")}),v.div(".col-md-9",function(){return v.div(".card-block",function(){return v.h3(".card-title",e.content.name),v.raw(e.content.summary)})})}),v.div(".row",function(){return v.div(".col-md-8",function(){return v.div(".episode-list-region")}),v.div(".col-md-4",function(){return v.div(".listview-header","ShowObject"),v.div(".jsonview.listview-list-entry",{style:"overflow:auto"})})})})}),e.prototype.ui={body:".jsonview",episodesButton:".episodes-button",saveEpisodesButton:".save-episodes",episodesList:".episode-list-region"},e.prototype.regions={episodes:"@ui.episodesList"},e}.call(this),e.exports=l},45:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i.n(s);t.default=n.a.renderable(function(e="5x"){return n.a.span(`.fa-stack.fa-${e}`,function(){return n.a.i(".fa.fa-image.fa-stack-1x"),n.a.i(".fa.fa-ban.fa-stack-2x.text-danger")})})},55:function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,o,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(r(i=this._events[e]))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(n(i))for(a=Array.prototype.slice.call(arguments,1),o=(l=i.slice()).length,u=0;u<o;u++)l[u].apply(this,a);return!0},i.prototype.addListener=function(e,t){var o;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(o=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var i,r,o,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,r=-1,i===t||s(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(i)){for(a=o;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){r=a;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}}}]);
//# sourceMappingURL=tvmaze-view-local-show-8c54a4dc66e6aba9aa9b.js.map