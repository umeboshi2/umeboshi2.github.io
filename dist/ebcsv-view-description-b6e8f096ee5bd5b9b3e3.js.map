{"version":3,"sources":["webpack:///./src/applets/ebcsv/views/description-views/view.coffee","webpack:///./node_modules/tbirds/src/templates/forms.coffee"],"names":["AppChannel","Backbone","DscView","MessageChannel","dsc_template","form_group_input_div","marked","mkInputData","navigate_to_url","tc","__webpack_require__","default","Radio","channel","field","label","placeholder","input_id","input_attributes","name","renderable","model","input_data","div","text","hr","article","raw","content","Marionette","View","[object Object]","this","id","destname","ndsc","response","ui","destname_input","val","request","set","get","add","save","fail","done","msg","template","copy_btn","edit_btn","events","click @ui.copy_btn","click @ui.edit_btn","module","exports","login_form","make_field_input","make_field_select","make_field_textarea","make_login_form","name_content_form","_util_capitalize__WEBPACK_IMPORTED_MODULE_1__","teacup__WEBPACK_IMPORTED_MODULE_0___default","a","data","atts","input_type","selector","for","input","Object","value","optlist","select","i","len","opt","results","length","option","selected","action","method","user","form","role","type","button","textarea"],"mappings":"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","file":"ebcsv-view-description-b6e8f096ee5bd5b9b3e3.js","sourcesContent":["Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\nmarked = require 'marked'\n\nnavigate_to_url = require('tbirds/util/navigate-to-url').default\n{ form_group_input_div } = require 'tbirds/templates/forms'\n\nMessageChannel = Backbone.Radio.channel 'messages'\nAppChannel = Backbone.Radio.channel 'ebcsv'\n\n\nmkInputData = (field, label, placeholder) ->\n  input_id: \"input_#{field}\"\n  label: label\n  input_attributes:\n    name: field\n    placeholder: placeholder\n\ndsc_template = tc.renderable (model) ->\n  input_data = mkInputData 'destname', 'New Description', 'newdescription'\n  tc.div '.form-inline', ->\n    form_group_input_div input_data\n    tc.div '#copy-dsc-btn.btn.btn-default', 'Copy'\n    tc.div '#edit-dsc-btn.btn.btn-default', 'Edit'\n  tc.div '.listview-header', ->\n    tc.text \"Viewing Description #{model.name}\"\n  tc.hr()\n  tc.article '.document-view.content', ->\n    tc.div '.body', ->\n      tc.raw marked model.content\n  \n\n########################################\nclass DscView extends Backbone.Marionette.View\n  template: dsc_template\n  ui:\n    copy_btn: '#copy-dsc-btn'\n    edit_btn: '#edit-dsc-btn'\n    destname_input: 'input[name=\"destname\"]'\n  events:\n    'click @ui.copy_btn': 'copy_description'\n    'click @ui.edit_btn': 'edit_description'\n  edit_description: ->\n    navigate_to_url \"#ebcsv/descriptions/edit/#{@model.id}\"\n  copy_description: ->\n    foo = 'bar'\n    destname = @ui.destname_input.val()\n    if not destname\n      MessageChannel.request 'warning', 'Please input a new description name.'\n      return\n    ndsc = AppChannel.request 'new-ebdsc'\n    ndsc.set 'name', destname\n    ndsc.set 'title', @model.get 'title'\n    ndsc.set 'content', @model.get 'content'\n    collection = AppChannel.request 'ebdsc-collection'\n    collection.add ndsc\n    response = ndsc.save()\n    response.fail ->\n      MessageChannel.request 'danger', 'Failed to save new description!'\n    response.done ->\n      msg = \"Copied new description #{ndsc.get 'name'}\"\n      MessageChannel.request 'success', msg\n      navigate_to_url \"#ebcsv/descriptions/view/#{ndsc.id}\"\n    \nmodule.exports = DscView\n\n","import tc from 'teacup'\n\nimport capitalize from '../util/capitalize'\n\nif __useCssModules__\n  require \"../../sass/forms.scss\"\n\n########################################\n# Form Templates\n########################################\nform_group_input_div = tc.renderable (data) ->\n  tc.div '.form-group', ->\n    tc.label '.control-label',\n      for:data.input_id\n      data.label\n    selector = \"##{data.input_id}.form-control\"\n    atts = data.input_attributes\n    input_type = tc.input\n    if data?.input_type\n      input_type = tc[data.input_type]\n      input_type selector, atts, ->\n        tc.text data?.content\n    else\n      input_type selector, atts\n\nmake_field_input = (field) ->\n  tc.renderable (model) ->\n    form_group_input_div\n      input_id: \"input_#{field}\"\n      label: capitalize field\n      input_attributes:\n        name: field\n        placeholder: field\n        value: model[field]\n    \nmake_field_textarea = (field) ->\n  tc.renderable (model) ->\n    form_group_input_div\n      input_id: \"input_#{field}\"\n      input_type: 'textarea'\n      label: capitalize field\n      input_attributes:\n        name: field\n        placeholder: field\n      content: model[field]\n\nmake_field_select = (field, optlist) ->\n  tc.renderable (model) ->\n    tc.div '.form-group', ->\n      tc.label '.control-label',\n        for:\"select_#{field}\"\n      capitalize field\n    tc.select '.form-control', name:\"select_#{field}\", ->\n      for opt in optlist\n        if model[field] is opt\n          tc.option selected:null, value:opt, opt\n        else\n          tc.option value:opt, opt\n          \nmake_login_form = (action='/login', method='POST') ->\n  tc.renderable (user) ->\n    tc.form\n      role:'form'\n      method: method\n      action: action, ->\n        form_group_input_div\n          input_id: 'input_username'\n          label: 'User Name'\n          input_attributes:\n            name: 'username'\n            placeholder: 'User Name'\n        form_group_input_div\n          input_id: 'input_password'\n          label: 'Password'\n          input_attributes:\n            name: 'password'\n            type: 'password'\n            placeholder: 'Type your password here....'\n        tc.button '.btn.btn-secondary', type:'submit', 'login'\n\nlogin_form = make_login_form()\n\nname_content_form = tc.renderable (model) ->\n  form_group_input_div\n    input_id: 'input_name'\n    label: 'Name'\n    input_attributes:\n      name: 'name'\n      placeholder: 'Name'\n  form_group_input_div\n    input_id: 'input_content'\n    input_type: tc.textarea\n    label: 'Content'\n    input_attributes:\n      name: 'content'\n      placeholder: '...'\n  tc.input '.btn.btn-secondary.btn-sm', type:'submit', value:'Add'\n\n########################################\nexport {\n  form_group_input_div\n  make_field_input\n  make_field_textarea\n  make_field_select\n  make_login_form\n  login_form\n  name_content_form\n  }\n  \n"],"sourceRoot":""}