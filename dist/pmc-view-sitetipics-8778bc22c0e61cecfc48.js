(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{417:function(e,t,n){"use strict";var o=n(423),r=n(424).EventEmitter;function i(e,t){var n=this;r.call(n),arguments.length<2&&(t=e,e=void 0);var o,a,l,u=[],c=[],s=!1,p=!1,d=!1,f=!0,b=!0,v={container:document.createElement("div"),collapseExpand:document.createElement("div"),name:document.createElement("div"),separator:document.createElement("div"),value:document.createElement("div"),delete:document.createElement("div"),children:document.createElement("div"),insert:document.createElement("div")};function h(){var e="object"==l||"array"==l;c.forEach((function(e){e.refresh()})),v.collapseExpand.style.display=e?"":"none",s&&e?y():m()}function m(e){e&&c.forEach((function(e){e.collapse(!0)})),s=!1,v.children.style.display="none",v.collapseExpand.className="jv-expand",v.container.classList.add("jv-collapsed"),v.container.classList.remove("jv-expanded")}function y(e){var t;t="object"==l?Object.keys(a):"array"==l?a.map((function(e,t){return t})):[];for(var n=c.length-1;n>=0;n--){var o=c[n];-1==t.indexOf(o.name)&&(c.splice(n,1),k(o))}if("object"!=l&&"array"!=l)return m();t.forEach((function(e){j(e,a[e])})),e&&c.forEach((function(e){e.expand(!0)})),s=!0,v.children.style.display="",v.collapseExpand.className="jv-collapse",v.container.classList.add("jv-expanded"),v.container.classList.remove("jv-collapsed")}function w(e){var t=typeof e,r=o;if(e!==o){if("string"!=t&&"number"!=t)throw new Error("Name must be either string or number, "+e);v.name.innerText=e,o=e,n.emit("rename",n,r,e)}}function g(e){var t,r=a;switch(l=function(e){var t=typeof e;if("object"==t){if(null===e)return"null";if(Array.isArray(e))return"array"}return t}(e)){case"null":t="null";break;case"object":t="Object["+Object.keys(e).length+"]";break;case"array":t="Array["+e.length+"]";break;default:t=e}v.value.innerText=t,v.value.className="value "+l,e!==a&&(a=e,"array"!=l&&"object"!=l||(b=!1,"array"==l&&(f=!1)),h(),n.emit("change",o,r,e))}function j(e,t){for(var n,o=0,r=c.length;o<r;o++)if(c[o].name==e){n=c[o];break}return n?n.value=t:((n=new i(e,t)).once("rename",C),n.on("delete",P),n.on("change",E),c.push(n)),v.children.appendChild(n.dom),n}function k(e){e.dom.parentNode&&v.children.removeChild(e.dom),e.destroy(),e.removeAllListeners()}function _(e){var t="name"==e?f:b,n=v[e];t&&("value"==e&&"string"==l&&(n.innerText='"'+a+'"'),"name"==e&&(p=!0),"value"==e&&(d=!0),n.classList.add("edit"),n.setAttribute("contenteditable",!0),n.focus(),document.execCommand("selectAll",!1,null))}function O(e){var t=v[e];if("name"==e){if(!p)return;p=!1}if("value"==e){if(!d)return;d=!1}if("name"==e)w(t.innerText);else try{g(JSON.parse(t.innerText))}catch(e){g(t.innerText)}t.classList.remove("edit"),t.removeAttribute("contenteditable")}function x(e,t){switch(t.key){case"Escape":case"Enter":O(e)}}function V(e,t){"Tab"==t.key&&(O(e),"name"==e?(t.preventDefault(),_("value")):O(e))}function C(e,t,n){n&&"array"!=l&&!(n in a)?(a[n]=e.value,delete a[t]):void 0===t?k(e):e.name=t,e.once("rename",C)}function E(e,t,r,i){i||(a[e]=r),n.emit("change",o+"."+e,t,r,!0)}function P(e){var t=e.name;"array"==l?a.splice(t,1):delete a[t],h()}function T(e,t,n){e.addEventListener(t,n),u.push({element:e,name:t,fn:n})}Object.defineProperties(n,{dom:{value:v.container,enumerable:!0},name:{get:function(){return o},set:w,enumerable:!0},value:{get:function(){return a},set:g,enumerable:!0},type:{get:function(){return l},enumerable:!0},nameEditable:{get:function(){return f},set:function(e){f=!!e},enumerable:!0},valueEditable:{get:function(){return b},set:function(e){b=!!e},enumerable:!0},refresh:{value:h,enumerable:!0},collapse:{value:m,enumerable:!0},expand:{value:y,enumerable:!0},destroy:{value:function(){var e,t;for(;t=u.pop();)t.element.removeEventListener(t.name,t.fn);for(;e=c.pop();)k(e)},enumerable:!0},editName:{value:_.bind(null,"name"),enumerable:!0},editValue:{value:_.bind(null,"value"),enumerable:!0}}),Object.keys(v).forEach((function(e){var t=v[e];"container"!=e&&(t.className=e,v.container.appendChild(t))})),v.container.className="jsonView",T(v.collapseExpand,"click",(function(){s?m():y()})),T(v.value,"click",y.bind(null,!1)),T(v.name,"click",y.bind(null,!1)),T(v.name,"dblclick",_.bind(null,"name")),T(v.name,"blur",O.bind(null,"name")),T(v.name,"keypress",x.bind(null,"name")),T(v.name,"keydown",V.bind(null,"name")),T(v.value,"dblclick",_.bind(null,"value")),T(v.value,"blur",O.bind(null,"value")),T(v.value,"keypress",x.bind(null,"value")),T(v.value,"keydown",V.bind(null,"value")),T(v.value,"keydown",(function(e){var t,n=0;if("number"!=l)return;switch(e.key){case"ArrowDown":case"Down":n=-1;break;case"ArrowUp":case"Up":n=1}e.shiftKey&&(n*=10);(e.ctrlKey||e.metaKey)&&(n/=10);n&&(t=parseFloat(v.value.innerText),isNaN(t)||g(Number((t+n).toFixed(10))))})),T(v.insert,"click",(function(){var e=j("array"==l?a.length:void 0,null);"array"==l?(a.push(null),e.editValue()):e.editName()})),T(v.delete,"click",(function(){n.emit("delete",n)})),w(e),g(t)}e.exports=i,o.inherits(i,r)},418:function(e,t,n){var o=n(419);"string"==typeof o&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};n(413)(o,r);o.locals&&(e.exports=o.locals)},419:function(e,t,n){(e.exports=n(412)(!1)).push([e.i,'.jsonView{\n    margin-left: 20px;\n    font-family: Consolas, "Lucida Console", Menlo, "dejavu sans mono", monospace;\n    font-size: 16px;\n    line-height: 16px;\n    padding: 2px;\n    cursor: default;\n    color: cornsilk;\n    white-space: nowrap;\n    -webkit-user-select: none;\n}\n\n.jsonView>div{\n    display: inline-block;\n}\n\n.jsonView>.children, .jsonView.insert{\n    display: block;\n}\n\n.jsonView>.name{\n    color: mistyrose;\n}\n\n.jsonView>.separator:before{\n    content: ":";\n}\n\n.jsonView>.separator {\n    padding-right: 5px;\n}\n\n.jsonView>.value.null{\n    color: rgb(128, 128, 128);\n}\n\n.jsonView>.value.boolean, .jsonView>.value.number{\n    color: lightseagreen;\n}\n\n.jsonView>.value.string:not(.edit):before, .jsonView>.value.string:not(.edit):after{\n    content: "\\"";\n}\n\n.jsonView>.value.string {\n    color: lightsalmon;\n}\n\n.jsonView>.name:hover, .jsonView>.value:hover{\n    background-color: rgba(56, 121, 217, 0.1);\n}\n\n.jsonView>.jv-expand, .jsonView>.jv-collapse{\n    min-width: 20px;\n    margin-left: -20px;\n    cursor: pointer;\n}\n\n.jsonView>.jv-expand:before{\n    content: \'\\25B6\';\n}\n\n.jsonView>.jv-collapse:before{\n    content: \'\\25BC\';\n}\n\n.jsonView>.edit{\n    padding: 0px 5px 0px 5px;\n    white-space: nowrap;\n    overflow: hidden;\n    background-color: transparent;\n}\n\n.jsonView>.edit br{\n    display: none;\n}\n\n.jsonView>.edit *{\n    display: inline;\n    white-space: nowrap;\n}\n\n.jsonView>.value.edit{\n    color: rgb(0, 0, 0);\n}\n\n.jsonView>.delete:before{\n    content: \'X\';\n}\n\n.jsonView>.delete{\n    opacity: 0;\n    display: inline;\n    padding: 3px;\n    margin-left: 20px;\n    cursor: pointer;\n    color: rgb(150, 150, 150);\n}\n\n.jsonView>.delete:hover{\n    opacity: 1;\n    color: rgb(0, 0, 0);\n    background: rgb(220, 220, 220);\n}\n\n.jsonView>.insert:before{\n    content: \'+\';\n}\n\n.jsonView>.insert{\n    display: none;\n    color: rgb(150, 150, 150);\n    cursor: pointer;\n}\n\n.jsonView.jv-expanded>.insert, .jsonView.jv-expanded>.insert{\n    display: inline-block;\n    margin-left: 20px;\n    padding: 3px;\n}\n\n.jsonView>.insert:hover{\n    color: rgb(0, 0, 0);\n    background: rgb(220, 220, 220);\n}\n',""])},421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(7),l=n(417),u=(o=l)&&o.__esModule?o:{default:o};n(418),r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"options",value:function(){return{jviewSelector:".jsonview"}}},{key:"ui",value:function(){return{jsonView:this.getOption("jviewSelector")}}},{key:"onDomRefresh",value:function(){var e;return e=this.view.model.toJSON(),this.view.jsonView=new u.default(e),this.ui.jsonView.prepend(this.view.jsonView.dom)}}]),t}(a.Behavior),t.default=r},490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(7),l=n(34),u=(o=l)&&o.__esModule?o:{default:o};r=function(){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"templateContext",value:function(){return{buttonText:this.getOption("buttonText")||"Search",placeholder:this.getOption("placeholder")||"Enter search term",buttonClass:this.getOption("buttonClass")||".btn.btn-outline-warning"}}},{key:"buttonClicked",value:function(){var e;if(null!=(e=this.ui.input.val().trim()))return this.trigger("input:submit",{value:e})}}]),t}(a.View);return e.prototype.template=u.default.renderable((function(e){return u.default.div(".input-group",(function(){return u.default.div(".input-group-prepend",(function(){return u.default.button(".input-group-text"+e.buttonClass,e.buttonText)})),u.default.input(".form-control",{type:"text",placeholder:e.placeholder})}))})),e.prototype.ui={button:"button",input:"input"},e.prototype.events={"click @ui.button":"buttonClicked"},e}.call(void 0),t.default=r},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(6),c=n(7),s=f(n(34)),p=n(496),d=f(n(490));function f(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o=u.Radio.channel("pmc"),i=function(){var e=function(e){function t(){return b(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),l(t,[{key:"delBtnClicked",value:function(){return console.log("delBtnClicked")}}]),t}(c.View);return e.prototype.tagName="li",e.prototype.className="list-group-item",e.prototype.template=s.default.renderable((function(e){return s.default.div(".row",(function(){return s.default.span(".mr-auto",e.name),s.default.button(".ml-auto.del-btn.btn.btn-sm.btn-outline-danger",(function(){return s.default.text("Delete")}))}))})),e.prototype.ui={delBtn:".del-btn"},e.prototype.events={"click @ui.delBtn":"delBtnClicked"},e}.call(void 0),a=function(){var e=function(e){function t(){return b(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),t}(c.CollectionView);return e.prototype.tagName="ul",e.prototype.className="list-group",e.prototype.childView=i,e.prototype.viewComparator="name",e}.call(void 0),r=function(){var e=function(e){function t(){return b(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),l(t,[{key:"onRender",value:function(){var e=this;return o.request("get-topic-collection").fetch().done((function(){var t;return t=new d.default({buttonText:"Add",placeholder:"Add a topic...."}),e.showChildView("addTopic",t)}))}},{key:"showTopicsView",value:function(){var e,t;return e=o.request("get-topic-collection"),t=new a({collection:e}),this.showChildView("content",t)}},{key:"topicSubmitted",value:function(e){var t,n,r=this;return t=o.request("get-topic-collection"),this.ui.addTopic.hide(),n={name:e.value},t.add(n).save().done((function(){return r.ui.addTopic.show()}))}},{key:"updateBtnClicked",value:function(){var e,t,n;return console.log("update clicked"),n=o.request("get-topic-collection"),e=o.request("get-fmtopic-collection"),t=new p.FrontMatterCollection,n.fetch().then((function(){return console.log("topics fetched"),e.fetch()})).then((function(){return console.log("fmtopics fetched"),t.fetch()})).then((function(){return console.log("papers fetched"),t.each((function(t){var n,o;return console.log("paper",t.id),n=t.id,o=e.where({pmcid:n}),console.log("pmtopics",o)}))}))}}]),t}(c.View);return e.prototype.template=s.default.renderable((function(e){return console.log("model",e),s.default.h3("Manage Topics"),s.default.button(".update-btn.btn.btn-outline-warning","Update static topics"),s.default.div(".add-topic-input"),s.default.div(".paginate-bar"),s.default.div(".content")})),e.prototype.ui={addTopic:".add-topic-input",content:".content",paginateBar:".paginate-bar",updateBtn:".update-btn"},e.prototype.regions={addTopic:"@ui.addTopic",content:"@ui.content",paginateBar:"@ui.paginateBar"},e.prototype.events={"click @ui.updateBtn":"updateBtnClicked"},e.prototype.childViewEvents={"input:submit":"topicSubmitted"},e}.call(void 0),t.default=r},682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(6),u=n(7),c=d(n(34)),s=d(n(31)),p=d(n(683));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o=l.Radio.channel("pmc"),i=function(){var e=function(e){function t(){return f(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),a(t,[{key:"onRender",value:function(){var e,t,n;if(!this.getRegion("papers").hasView())return t=new l.Collection([]),e=o.request("get-fm-collection"),this.model.get("pmc_ids").forEach((function(n){var r,i,a;return i=!1,null!=(r=e.get(n))?(a=r,i=!0):a=o.request("make-remote-model",n),a.isLocal=function(){return i},t.add(a)})),n=new u.CollectionView({collection:t,childView:p.default}),this.showChildView("papers",n)}}]),t}(u.View);return e.prototype.className="list-group",e.prototype.template=c.default.renderable((function(e){return c.default.h3(e.name),c.default.div(".papers")})),e.prototype.ui={showBtn:".show-btn",papers:".papers"},e.prototype.regions={papers:"@ui.papers"},e.prototype.events={"click @ui.showBtn":"showBtnClicked"},e}.call(void 0),r=function(){var e=function(e){function t(){return f(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),a(t,[{key:"selectChanged",value:function(e){var t,n,r;return r=(0,s.default)(e.target).val(),t=this.getRegion("content"),r?(n=this.model.get("categories")[r],o.request("get-fm-collection").fetch().done((function(){var e;return e=new i({model:new l.Model(n)}),t.show(e)}))):t.empty()}}]),t}(u.View);return e.prototype.template=c.default.renderable((function(e){return c.default.div(".input-group",(function(){return c.default.div(".input-group-prepend",(function(){return c.default.button(".input-group-text.btn.btn-outline-warning",{for:"select-category"},"Category")})),c.default.select("#select-category.custom-select",(function(){var t,n;for(t in c.default.option({value:"",selected:""},"(no category)"),n=[],e.categories)e.categories[t].pmc_ids.length?n.push(c.default.option({value:t},t)):n.push(void 0);return n}))})),c.default.div(".content")})),e.prototype.ui={select:"select",content:".content",button:"button"},e.prototype.regions={content:"@ui.content"},e.prototype.events={"change @ui.select":"selectChanged","click @ui.button":"buttonClicked"},e}.call(void 0),t.default=r},683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(6)),i=c(n(7)),a=c(n(34)),l=c(n(1)),u=c(n(421));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f,b,v,h,m,y,w=[].indexOf;f=r.default.Radio.channel("pmc"),m=function(e){return"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC"+e+"/"},h=function(e){return"https://dx.doi.org/","https://dx.doi.org/"+e},y=function(e){var t,n,o,r,i,a,l,u,c;return e=e.content["OAI-PMH"].GetRecord.record.metadata.article.front,t={},c="journal-title",r="Not Found",(n="journal-title-group")in(o=e["journal-meta"])?r=o[n][c]:c in o&&(r=o[c]),t.journal=r,l="Not Found",l=(null!=(u=(i=e["article-meta"])["title-group"]["article-title"])?u.__text:void 0)?u.__text:u,t.title=l,i["article-id"].forEach((function(e){var n;if("doi"===(null!=e?e["_pub-id-type"]:void 0))return n=e.__text,t.doi=n})),t.abstract=null!=(a=i.abstract)?a.p:void 0,t},v=function(){var e=function(e){function t(){return s(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),o(t,[{key:"onRender",value:function(){return this.ui.jsonView.hide()}},{key:"pmcAnchorClicked",value:function(e){return e.preventDefault()}},{key:"deleteBtnClicked",value:function(){var e=this;return f.request("get-fm-collection").get(this.model.id).destroy().done((function(){return e.trigger("model:destroyed")}))}}]),t}(i.default.View);return e.prototype.behaviors=[u.default],e.prototype.template=a.default.renderable((function(e){var t,n;return t=y(e),n=m(e.id),a.default.div(".card",(function(){return a.default.div(".card-body",(function(){if(a.default.div(".card-title",t.title),a.default.div(".small",t.journal),a.default.a(".pmc-anchor.small",{href:n},"(PMC)"),(null!=t?t.doi:void 0)&&a.default.a(".small",{href:h(t.doi),target:"_blank"},(function(){return a.default.text(" (doi:"+t.doi+")")})),a.default.button(".destroy-btn.btn.btn-outline-danger.btn-sm","Delete"),null!=t?t.abstract:void 0)return a.default.p(".card-text.small",t.abstract)})),a.default.div(".jsonview")}))})),e.prototype.ui={pmcAnchor:".pmc-anchor",deleteBtn:".destroy-btn",jsonView:".jsonview"},e.prototype.events={"click @ui.pmcAnchor":"pmcAnchorClicked","click @ui.deleteBtn":"deleteBtnClicked"},e}.call(void 0),b=function(){var e=function(e){function t(){return s(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),o(t,[{key:"templateContext",value:function(){return{local:this.model.hasOAIcontent()}}},{key:"onRender",value:function(){var e,t;if("OAI-PMH",null!=(e=this.model.get("content"))&&w.call(l.default.keys(e),"OAI-PMH")>=0)return t=new v({model:this.model}),this.showChildView("content",t)}},{key:"onModelDestroyed",value:function(){return this.getRegion("content").empty()}},{key:"showInfoBtnClicked",value:function(){var e,t,n;if(!this.getRegion("content").hasView())return this.model=f.request("make-remote-model",Number(this.model.get("id"))),e=this.model.fetch(),n=this,t=this.model,e.done((function(){var e,o;return o=t.get("id"),e=t.get("content"),f.request("save-fm-content",o,e).then((function(){var e;return(e=f.request("get-fm-collection")).fetch().done((function(){var t,r;return t=e.get(o),r=new v({model:t}),n.showChildView("content",r),n.ui.showInfoBtn.hide()}))}))}))}}]),t}(i.default.View);return e.prototype.template=a.default.renderable((function(e){return a.default.text("PMCID: PMC"+e.id+" "),e.local||(".btn.btn-outline-warning.btn-sm",a.default.button(".show-info-btn.btn.btn-outline-warning.btn-sm.fa.fa-download",(function(){return" Download Front Matter"}))),a.default.div(".content")})),e.prototype.ui={showInfoBtn:".show-info-btn",content:".content"},e.prototype.regions={content:"@ui.content"},e.prototype.childViewEvents={"model:destroyed":"onModelDestroyed"},e.prototype.events={"click @ui.showInfoBtn":"showInfoBtnClicked"},e}.call(void 0),t.default=b}}]);
//# sourceMappingURL=pmc-view-sitetipics-8778bc22c0e61cecfc48.js.map