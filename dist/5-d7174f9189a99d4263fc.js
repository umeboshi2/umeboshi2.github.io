(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{38:function(e,t,o){"use strict";o.r(t);var n,r,a,l,s,i,c,u,d,h,p,w,v=o(0),f=o.n(v),m=o(2),y=o.n(m),b=o(56),g=o(42),x=(o(1),o(14),o(48),o(55)),C=o(53),S=o(13),R=(o(4),o(66));o(84);l=f.a.Radio.channel("global"),n=f.a.Radio.channel("tvmaze"),p=l.request("main:app:dbConn","tvmaze"),d=new R.LoveStore(p,"ShowObject"),r=function(){class e extends f.a.Model{toJSON(){return{id:this.get("id"),content:this.get("content")}}}return e.prototype.loveStore=d,e}.call(this),a=function(){class e extends f.a.Collection{}return e.prototype.loveStore=d,e.prototype.model=r,e}.call(this),w=new a,n.reply("get-local-tvshows",function(){return w}),n.reply("get-local-tvshow-model",function(){return r}),n.reply("get-local-tvshow-collection",function(){return a}),n.reply("save-local-show",function(e){var t,o;return t=new r({id:e.id,content:e}),o=!0,t.isNew=function(){return!!o&&(o=!1,!0)},w.add(t),t.save()}),h="//api.tvmaze.com",u=class extends f.a.Model{url(){var e;return e=this.searchName,`${h}/singlesearch/shows?q=${e}`}},n.reply("single-show-search",function(e){var t;return(t=new u).searchName=e,t}),c=class extends f.a.Model{urlRoot(){return`${h}/shows`}},n.reply("get-remote-show",function(e){return new c({id:e})}),s=class extends f.a.Model{url(){return this.get("_links").self.href}},i=function(){class e extends f.a.Collection{url(){return`${h}/shows/${this.showId}/episodes`}}return e.prototype.model=s,e}.call(this),n.reply("get-remote-episodes",function(e){var t;return(t=new i).showId=e,t});var z,N,V=[].indexOf;o(51),f.a.Radio.channel("global"),N=f.a.Radio.channel("messages"),f.a.Radio.channel("resources"),z=f.a.Radio.channel("tvmaze");var k,O,j,q=function(){class e extends x.MainController{view_index(){var e;return this.setupLayoutIfNeeded(),e=z.request("get-local-tvshows"),0,Promise.all([o.e(9),o.e(2),o.e(11),o.e(34)]).then((()=>{var t;return t=o(152),this._loadView(t,e,"tvshow")}).bind(null,o)).catch(o.oe)}viewSearchShow(){return this.setupLayoutIfNeeded(),0,Promise.all([o.e(9),o.e(2),o.e(11),o.e(34)]).then((()=>{var e;return e=new(o(151)),this.layout.showChildView("content",e)}).bind(null,o)).catch(o.oe)}viewShow(e){return this.setupLayoutIfNeeded(),Promise.all([o.e(9),o.e(2),o.e(11),o.e(33)]).then((()=>{var t,n;return t=o(98),n=new(z.request("get-local-tvshow-model"))({id:e}),this._loadView(t,n,"tvshow")}).bind(null,o)).catch(o.oe)}viewShowLocal(e){return this.setupLayoutIfNeeded(),Promise.all([o.e(9),o.e(2),o.e(11),o.e(34)]).then((()=>{var t,n,r,a;return n=o(98),t=z.request("get-local-tvshow-model"),console.log("Tmodel",t),r=new t({id:e}),console.log("model",r),a=r.fetch(),console.log("response",a),a.then(()=>{var e;return V.call(Object.keys(r.attributes),"content")>=0?(e=new n({model:r}),this.layout.showChildView("content",e)):(N.request("danger","no model"),Object(S.default)("#tvmaze/searchshow"))})}).bind(null,o)).catch(o.oe)}}return e.prototype.layoutClass=C.a,e}.call(this);f.a.Radio.channel("global"),f.a.Radio.channel("tvmaze"),j=[{label:"Search Show",url:"#tvmaze/searchshow",icon:".fa.fa-search"},{label:"Calendar",url:"#tvmaze/calendar",icon:".fa.fa-calendar"}],O=function(){class e extends y.a.AppRouter{}return e.prototype.appRoutes={tvmaze:"view_index","tvmaze/searchshow":"viewSearchShow","tvmaze/view/show/:id":"viewShow"},e}.call(this),k=function(){class e extends b.a{}return e.prototype.Controller=q,e.prototype.Router=O,e.prototype.appletEntries=[{label:`${Object(g.default)("tvmaze")} Menu`,menu:j}],e}.call(this);t.default=k},42:function(e,t,o){"use strict";o.r(t),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},48:function(e,t,o){"use strict";o.r(t);var n,r,a,l,s=o(2),i=o.n(s),c=o(1),u=o.n(c),d=o(13);l=u.a.renderable(function(e){return u.a.i(e.icon),u.a.text(" "),u.a.text(e.label)}),r=function(){class e extends i.a.View{}return e.prototype.tagName="button",e.prototype.attributes={class:"btn btn-secondary"},e.prototype.triggers={click:"button:clicked"},e.prototype.modelEvents={change:"render"},e}.call(this),n=function(){class e extends i.a.CollectionView{childViewOptions(){return{template:this.options.entryTemplate}}onChildviewButtonClicked(e){return this.trigger("toolbar:entry:clicked",e)}}return e.prototype.childView=r,e.prototype.className="btn-group btn-group-justified",e}.call(this),a=function(){class e extends i.a.View{onRender(){var e,t;return e=this.options.entryTemplate||l,t=new n({collection:this.collection,entryTemplate:e}),this.showChildView("entries",t)}onChildviewToolbarEntryClicked(e){return Object(d.default)(e.model.get("url"))}}return e.prototype.template=u.a.renderable(function(){return u.a.div(".toolbar-entries")}),e.prototype.regions={entries:{el:".toolbar-entries"}},e}.call(this),t.default=a}}]);