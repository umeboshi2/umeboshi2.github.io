{"version":3,"sources":["webpack:///./node_modules/packery/js/item.js","webpack:///./node_modules/packery/js/packer.js","webpack:///./node_modules/packery/js/packery.js","webpack:///./node_modules/tbirds/src/behaviors/has-packery.coffee","webpack:///./node_modules/tbirds/src/templates/no-image-span.coffee","webpack:///./node_modules/imagesloaded/imagesloaded.js","webpack:///./node_modules/tbirds/src/views/paginate-bar.coffee","webpack:///./node_modules/packery/js/rect.js","webpack:///./node_modules/tbirds/src/behaviors/has-masonry.coffee"],"names":["__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","window","__webpack_require__","undefined","Outlayer","Rect","transformProperty","document","documentElement","style","transform","Item","apply","this","arguments","proto","prototype","Object","create","__create","_create","call","rect","_moveTo","moveTo","x","y","dx","Math","abs","position","dy","layout","dragItemCount","isPlacing","isTransitioning","goTo","enablePlacing","removeTransitionStyles","element","getSize","_setRectSize","disablePlacing","removeElem","parentNode","removeChild","packer","addSpace","emitEvent","showDropPlaceholder","dropPlaceholder","createElement","className","width","size","height","positionDropPlaceholder","appendChild","hideDropPlaceholder","parent","exports","module","Packer","sortDirection","reset","spaces","initialSpace","push","sorter","sorters","downwardLeftToRight","pack","i","length","space","canFit","placeInSpace","columnPack","canFitInSpaceColumn","placed","rowPack","canFitInSpaceRow","revisedSpaces","newSpaces","getMaximalFreeRects","mergeSortSpaces","mergeRects","sort","rects","rectLoop","j","compareRect","contains","splice","a","b","rightwardTopToBottom","Packery","verticalSorter","horizontalSorter","shiftPacker","isEnabled","_this","handleDraggabilly","dragStart","itemDragStart","dragMove","itemDragMove","dragEnd","itemDragEnd","handleUIDraggable","start","event","ui","currentTarget","drag","left","top","stop","_resetLayout","_getMeasurements","_getOption","Infinity","innerHeight","gutter","innerWidth","maxY","maxX","_getMeasurement","_getItemLayoutPosition","item","isShifting","packMethod","_getPackMethod","_setMaxXY","shiftLayout","max","elem","w","outerWidth","h","outerHeight","_applyGridGutter","columnWidth","rowHeight","min","measurement","gridSize","remainder","mathMethod","_getContainerSize","_manageStamp","getItem","offset","_getElementOffset","right","bottom","sortItemsByPosition","items","fit","stamp","updateShiftTargets","shift","_bindFitEvents","unstamp","ticks","onLayout","dispatchEvent","once","resize","isResizeBound","needsResizeLayout","options","shiftPercentResize","resizeShiftPercentLayout","innerSize","_getItemsForLayout","isHorizontal","coord","measure","segmentName","previousSegment","currentSegment","forEach","seg","round","currentSize","previousSize","dropItem","_getBoundingRect","isOriginLeft","isOriginTop","stamps","boundsSize","shiftTargetKeys","shiftTargets","segment","segmentSpan","ceil","segs","floor","initialX","initialY","_addShiftTarget","cornerX","cornerY","segSpan","segX","segY","checkCoord","key","hasKey","indexOf","shiftPosition","minDistance","target","distance","sqrt","paddingLeft","paddingTop","now","Date","_itemDragTime","clearTimeout","dragTimeout","setTimeout","onDrag","classList","add","completeCount","onDragEndLayoutComplete","remove","bindDraggabillyEvents","draggie","_bindDraggabillyEvents","unbindDraggabillyEvents","method","handlers","bindUIDraggableEvents","$elems","_bindUIDraggableEvents","unbindUIDraggableEvents","_destroy","destroy","HasPackeryView","imagesloaded__WEBPACK_IMPORTED_MODULE_3__","imagesloaded__WEBPACK_IMPORTED_MODULE_3___default","n","backbone_marionette__WEBPACK_IMPORTED_MODULE_1___default","Behavior","[object Object]","list","getOption","container","packeryOptions","view","packery","packery__WEBPACK_IMPORTED_MODULE_2___default","console","log","$","itemSelector","reloadItems","ref","setPackery","setPackeryLayout","afterDomRefresh","data","listContainer","hasPageableCollection","isInitLayout","horizontalOrder","regions","__webpack_exports__","teacup__WEBPACK_IMPORTED_MODULE_0___default","renderable","span","factory","EvEmitter","jQuery","extend","prop","arraySlice","Array","slice","ImagesLoaded","onAlways","queryElem","querySelectorAll","elements","obj","isArray","makeArray","on","getImages","jqDeferred","Deferred","check","bind","error","images","addElementImages","nodeName","addImage","background","addElementBackgroundImages","nodeType","elementNodeTypes","childImgs","img","children","child","1","9","11","LoadingImage","Background","url","Image","getComputedStyle","reURL","matches","exec","backgroundImage","addBackground","loadingImage","onProgress","image","message","progress","progressedCount","hasAnyBroken","complete","isLoaded","notify","debug","eventName","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","addEventListener","src","handleEvent","type","onload","unbindEvents","onerror","removeEventListener","makeJQueryPlugin","fn","imagesLoaded","callback","promise","teacup__WEBPACK_IMPORTED_MODULE_3__","teacup__WEBPACK_IMPORTED_MODULE_3___default","boundMethodCheck","instance","Constructor","Error","backbone__WEBPACK_IMPORTED_MODULE_1___default","Radio","channel","PaginationView","backbone_marionette__WEBPACK_IMPORTED_MODULE_2___default","View","keydownHandler","collection","updateNavButtons","pageNumber","preventDefault","jquery__WEBPACK_IMPORTED_MODULE_0___default","attr","getPage","Number","cp","nextItem","prevItem","state","prevButton","currentPage","firstPage","hasClass","addClass","removeClass","nextButton","lastPage","numberedPage","direction","onFirstPage","onLastPage","resp","getNextPage","getPreviousPage","getAnotherPage","onRenderHandleKeys","onBeforeDestroyHandleKeys","command","results","value","keycommands","keyCode","handleKeyCommand","keydown","unbind","tagName","template","model","p","ref1","Collection","totalPages","li","href","events","click @ui.numberedPage","click @ui.prevButton","click @ui.nextButton","prev","next","props","defaults","otherWidth","otherHeight","overlaps","thisRight","thisBottom","rectRight","rectBottom","freeRect","freeRects","HasMasonryView","masonryOptions","masonry","masonry_layout__WEBPACK_IMPORTED_MODULE_2___default","setMasonry","setMasonryLayout"],"mappings":"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","file":"vendors~tvmaze-view-show-list-packery-e7c0254b3256cf481c3f.js","sourcesContent":["/**\n * Packery Item Element\n**/\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer',\n        './rect'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('./rect')\n    );\n  } else {\n    // browser global\n    window.Packery.Item = factory(\n      window.Outlayer,\n      window.Packery.Rect\n    );\n  }\n\n}( window, function factory( Outlayer, Rect ) {\n'use strict';\n\n// -------------------------- Item -------------------------- //\n\nvar docElemStyle = document.documentElement.style;\n\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\n// sub-class Item\nvar Item = function PackeryItem() {\n  Outlayer.Item.apply( this, arguments );\n};\n\nvar proto = Item.prototype = Object.create( Outlayer.Item.prototype );\n\nvar __create = proto._create;\nproto._create = function() {\n  // call default _create logic\n  __create.call( this );\n  this.rect = new Rect();\n};\n\nvar _moveTo = proto.moveTo;\nproto.moveTo = function( x, y ) {\n  // don't shift 1px while dragging\n  var dx = Math.abs( this.position.x - x );\n  var dy = Math.abs( this.position.y - y );\n\n  var canHackGoTo = this.layout.dragItemCount && !this.isPlacing &&\n    !this.isTransitioning && dx < 1 && dy < 1;\n  if ( canHackGoTo ) {\n    this.goTo( x, y );\n    return;\n  }\n  _moveTo.apply( this, arguments );\n};\n\n// -------------------------- placing -------------------------- //\n\nproto.enablePlacing = function() {\n  this.removeTransitionStyles();\n  // remove transform property from transition\n  if ( this.isTransitioning && transformProperty ) {\n    this.element.style[ transformProperty ] = 'none';\n  }\n  this.isTransitioning = false;\n  this.getSize();\n  this.layout._setRectSize( this.element, this.rect );\n  this.isPlacing = true;\n};\n\nproto.disablePlacing = function() {\n  this.isPlacing = false;\n};\n\n// -----  ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // add space back to packer\n  this.layout.packer.addSpace( this.rect );\n  this.emitEvent( 'remove', [ this ] );\n};\n\n// ----- dropPlaceholder ----- //\n\nproto.showDropPlaceholder = function() {\n  var dropPlaceholder = this.dropPlaceholder;\n  if ( !dropPlaceholder ) {\n    // create dropPlaceholder\n    dropPlaceholder = this.dropPlaceholder = document.createElement('div');\n    dropPlaceholder.className = 'packery-drop-placeholder';\n    dropPlaceholder.style.position = 'absolute';\n  }\n\n  dropPlaceholder.style.width = this.size.width + 'px';\n  dropPlaceholder.style.height = this.size.height + 'px';\n  this.positionDropPlaceholder();\n  this.layout.element.appendChild( dropPlaceholder );\n};\n\nproto.positionDropPlaceholder = function() {\n  this.dropPlaceholder.style[ transformProperty ] = 'translate(' +\n    this.rect.x + 'px, ' + this.rect.y + 'px)';\n};\n\nproto.hideDropPlaceholder = function() {\n  // only remove once, #333\n  var parent = this.dropPlaceholder.parentNode;\n  if ( parent ) {\n    parent.removeChild( this.dropPlaceholder );\n  }\n};\n\n// -----  ----- //\n\nreturn Item;\n\n}));\n","/**\n * Packer\n * bin-packing algorithm\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [ './rect' ], factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('./rect')\n    );\n  } else {\n    // browser global\n    var Packery = window.Packery = window.Packery || {};\n    Packery.Packer = factory( Packery.Rect );\n  }\n\n}( window, function factory( Rect ) {\n'use strict';\n\n// -------------------------- Packer -------------------------- //\n\n/**\n * @param {Number} width\n * @param {Number} height\n * @param {String} sortDirection\n *   topLeft for vertical, leftTop for horizontal\n */\nfunction Packer( width, height, sortDirection ) {\n  this.width = width || 0;\n  this.height = height || 0;\n  this.sortDirection = sortDirection || 'downwardLeftToRight';\n\n  this.reset();\n}\n\nvar proto = Packer.prototype;\n\nproto.reset = function() {\n  this.spaces = [];\n\n  var initialSpace = new Rect({\n    x: 0,\n    y: 0,\n    width: this.width,\n    height: this.height\n  });\n\n  this.spaces.push( initialSpace );\n  // set sorter\n  this.sorter = sorters[ this.sortDirection ] || sorters.downwardLeftToRight;\n};\n\n// change x and y of rect to fit with in Packer's available spaces\nproto.pack = function( rect ) {\n  for ( var i=0; i < this.spaces.length; i++ ) {\n    var space = this.spaces[i];\n    if ( space.canFit( rect ) ) {\n      this.placeInSpace( rect, space );\n      break;\n    }\n  }\n};\n\nproto.columnPack = function( rect ) {\n  for ( var i=0; i < this.spaces.length; i++ ) {\n    var space = this.spaces[i];\n    var canFitInSpaceColumn = space.x <= rect.x &&\n      space.x + space.width >= rect.x + rect.width &&\n      space.height >= rect.height - 0.01; // fudge number for rounding error\n    if ( canFitInSpaceColumn ) {\n      rect.y = space.y;\n      this.placed( rect );\n      break;\n    }\n  }\n};\n\nproto.rowPack = function( rect ) {\n  for ( var i=0; i < this.spaces.length; i++ ) {\n    var space = this.spaces[i];\n    var canFitInSpaceRow = space.y <= rect.y &&\n      space.y + space.height >= rect.y + rect.height &&\n      space.width >= rect.width - 0.01; // fudge number for rounding error\n    if ( canFitInSpaceRow ) {\n      rect.x = space.x;\n      this.placed( rect );\n      break;\n    }\n  }\n};\n\nproto.placeInSpace = function( rect, space ) {\n  // place rect in space\n  rect.x = space.x;\n  rect.y = space.y;\n\n  this.placed( rect );\n};\n\n// update spaces with placed rect\nproto.placed = function( rect ) {\n  // update spaces\n  var revisedSpaces = [];\n  for ( var i=0; i < this.spaces.length; i++ ) {\n    var space = this.spaces[i];\n    var newSpaces = space.getMaximalFreeRects( rect );\n    // add either the original space or the new spaces to the revised spaces\n    if ( newSpaces ) {\n      revisedSpaces.push.apply( revisedSpaces, newSpaces );\n    } else {\n      revisedSpaces.push( space );\n    }\n  }\n\n  this.spaces = revisedSpaces;\n\n  this.mergeSortSpaces();\n};\n\nproto.mergeSortSpaces = function() {\n  // remove redundant spaces\n  Packer.mergeRects( this.spaces );\n  this.spaces.sort( this.sorter );\n};\n\n// add a space back\nproto.addSpace = function( rect ) {\n  this.spaces.push( rect );\n  this.mergeSortSpaces();\n};\n\n// -------------------------- utility functions -------------------------- //\n\n/**\n * Remove redundant rectangle from array of rectangles\n * @param {Array} rects: an array of Rects\n * @returns {Array} rects: an array of Rects\n**/\nPacker.mergeRects = function( rects ) {\n  var i = 0;\n  var rect = rects[i];\n\n  rectLoop:\n  while ( rect ) {\n    var j = 0;\n    var compareRect = rects[ i + j ];\n\n    while ( compareRect ) {\n      if  ( compareRect == rect ) {\n        j++; // next\n      } else if ( compareRect.contains( rect ) ) {\n        // remove rect\n        rects.splice( i, 1 );\n        rect = rects[i]; // set next rect\n        continue rectLoop; // bail on compareLoop\n      } else if ( rect.contains( compareRect ) ) {\n        // remove compareRect\n        rects.splice( i + j, 1 );\n      } else {\n        j++;\n      }\n      compareRect = rects[ i + j ]; // set next compareRect\n    }\n    i++;\n    rect = rects[i];\n  }\n\n  return rects;\n};\n\n\n// -------------------------- sorters -------------------------- //\n\n// functions for sorting rects in order\nvar sorters = {\n  // top down, then left to right\n  downwardLeftToRight: function( a, b ) {\n    return a.y - b.y || a.x - b.x;\n  },\n  // left to right, then top down\n  rightwardTopToBottom: function( a, b ) {\n    return a.x - b.x || a.y - b.y;\n  }\n};\n\n\n// --------------------------  -------------------------- //\n\nreturn Packer;\n\n}));\n","/*!\n * Packery v2.1.1\n * Gapless, draggable grid layouts\n *\n * Licensed GPLv3 for open source use\n * or Packery Commercial License for commercial use\n *\n * http://packery.metafizzy.co\n * Copyright 2016 Metafizzy\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'get-size/get-size',\n        'outlayer/outlayer',\n        './rect',\n        './packer',\n        './item'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('get-size'),\n      require('outlayer'),\n      require('./rect'),\n      require('./packer'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Packery = factory(\n      window.getSize,\n      window.Outlayer,\n      window.Packery.Rect,\n      window.Packery.Packer,\n      window.Packery.Item\n    );\n  }\n\n}( window, function factory( getSize, Outlayer, Rect, Packer, Item ) {\n'use strict';\n\n// ----- Rect ----- //\n\n// allow for pixel rounding errors IE8-IE11 & Firefox; #227\nRect.prototype.canFit = function( rect ) {\n  return this.width >= rect.width - 1 && this.height >= rect.height - 1;\n};\n\n// -------------------------- Packery -------------------------- //\n\n// create an Outlayer layout class\nvar Packery = Outlayer.create('packery');\nPackery.Item = Item;\n\nvar proto = Packery.prototype;\n\nproto._create = function() {\n  // call super\n  Outlayer.prototype._create.call( this );\n\n  // initial properties\n  this.packer = new Packer();\n  // packer for drop targets\n  this.shiftPacker = new Packer();\n  this.isEnabled = true;\n\n  this.dragItemCount = 0;\n\n  // create drag handlers\n  var _this = this;\n  this.handleDraggabilly = {\n    dragStart: function() {\n      _this.itemDragStart( this.element );\n    },\n    dragMove: function() {\n      _this.itemDragMove( this.element, this.position.x, this.position.y );\n    },\n    dragEnd: function() {\n      _this.itemDragEnd( this.element );\n    }\n  };\n\n  this.handleUIDraggable = {\n    start: function handleUIDraggableStart( event, ui ) {\n      // HTML5 may trigger dragstart, dismiss HTML5 dragging\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragStart( event.currentTarget );\n    },\n    drag: function handleUIDraggableDrag( event, ui ) {\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragMove( event.currentTarget, ui.position.left, ui.position.top );\n    },\n    stop: function handleUIDraggableStop( event, ui ) {\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragEnd( event.currentTarget );\n    }\n  };\n\n};\n\n\n// ----- init & layout ----- //\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n\n  this._getMeasurements();\n\n  // reset packer\n  var width, height, sortDirection;\n  // packer settings, if horizontal or vertical\n  if ( this._getOption('horizontal') ) {\n    width = Infinity;\n    height = this.size.innerHeight + this.gutter;\n    sortDirection = 'rightwardTopToBottom';\n  } else {\n    width = this.size.innerWidth + this.gutter;\n    height = Infinity;\n    sortDirection = 'downwardLeftToRight';\n  }\n\n  this.packer.width = this.shiftPacker.width = width;\n  this.packer.height = this.shiftPacker.height = height;\n  this.packer.sortDirection = this.shiftPacker.sortDirection = sortDirection;\n\n  this.packer.reset();\n\n  // layout\n  this.maxY = 0;\n  this.maxX = 0;\n};\n\n/**\n * update columnWidth, rowHeight, & gutter\n * @private\n */\nproto._getMeasurements = function() {\n  this._getMeasurement( 'columnWidth', 'width' );\n  this._getMeasurement( 'rowHeight', 'height' );\n  this._getMeasurement( 'gutter', 'width' );\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  this._setRectSize( item.element, item.rect );\n  if ( this.isShifting || this.dragItemCount > 0 ) {\n    var packMethod = this._getPackMethod();\n    this.packer[ packMethod ]( item.rect );\n  } else {\n    this.packer.pack( item.rect );\n  }\n\n  this._setMaxXY( item.rect );\n  return item.rect;\n};\n\nproto.shiftLayout = function() {\n  this.isShifting = true;\n  this.layout();\n  delete this.isShifting;\n};\n\nproto._getPackMethod = function() {\n  return this._getOption('horizontal') ? 'rowPack' : 'columnPack';\n};\n\n\n/**\n * set max X and Y value, for size of container\n * @param {Packery.Rect} rect\n * @private\n */\nproto._setMaxXY = function( rect ) {\n  this.maxX = Math.max( rect.x + rect.width, this.maxX );\n  this.maxY = Math.max( rect.y + rect.height, this.maxY );\n};\n\n/**\n * set the width and height of a rect, applying columnWidth and rowHeight\n * @param {Element} elem\n * @param {Packery.Rect} rect\n */\nproto._setRectSize = function( elem, rect ) {\n  var size = getSize( elem );\n  var w = size.outerWidth;\n  var h = size.outerHeight;\n  // size for columnWidth and rowHeight, if available\n  // only check if size is non-zero, #177\n  if ( w || h ) {\n    w = this._applyGridGutter( w, this.columnWidth );\n    h = this._applyGridGutter( h, this.rowHeight );\n  }\n  // rect must fit in packer\n  rect.width = Math.min( w, this.packer.width );\n  rect.height = Math.min( h, this.packer.height );\n};\n\n/**\n * fits item to columnWidth/rowHeight and adds gutter\n * @param {Number} measurement - item width or height\n * @param {Number} gridSize - columnWidth or rowHeight\n * @returns measurement\n */\nproto._applyGridGutter = function( measurement, gridSize ) {\n  // just add gutter if no gridSize\n  if ( !gridSize ) {\n    return measurement + this.gutter;\n  }\n  gridSize += this.gutter;\n  // fit item to columnWidth/rowHeight\n  var remainder = measurement % gridSize;\n  var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n  measurement = Math[ mathMethod ]( measurement / gridSize ) * gridSize;\n  return measurement;\n};\n\nproto._getContainerSize = function() {\n  if ( this._getOption('horizontal') ) {\n    return {\n      width: this.maxX - this.gutter\n    };\n  } else {\n    return {\n      height: this.maxY - this.gutter\n    };\n  }\n};\n\n\n// -------------------------- stamp -------------------------- //\n\n/**\n * makes space for element\n * @param {Element} elem\n */\nproto._manageStamp = function( elem ) {\n\n  var item = this.getItem( elem );\n  var rect;\n  if ( item && item.isPlacing ) {\n    rect = item.rect;\n  } else {\n    var offset = this._getElementOffset( elem );\n    rect = new Rect({\n      x: this._getOption('originLeft') ? offset.left : offset.right,\n      y: this._getOption('originTop') ? offset.top : offset.bottom\n    });\n  }\n\n  this._setRectSize( elem, rect );\n  // save its space in the packer\n  this.packer.placed( rect );\n  this._setMaxXY( rect );\n};\n\n// -------------------------- methods -------------------------- //\n\nfunction verticalSorter( a, b ) {\n  return a.position.y - b.position.y || a.position.x - b.position.x;\n}\n\nfunction horizontalSorter( a, b ) {\n  return a.position.x - b.position.x || a.position.y - b.position.y;\n}\n\nproto.sortItemsByPosition = function() {\n  var sorter = this._getOption('horizontal') ? horizontalSorter : verticalSorter;\n  this.items.sort( sorter );\n};\n\n/**\n * Fit item element in its current position\n * Packery will position elements around it\n * useful for expanding elements\n *\n * @param {Element} elem\n * @param {Number} x - horizontal destination position, optional\n * @param {Number} y - vertical destination position, optional\n */\nproto.fit = function( elem, x, y ) {\n  var item = this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  // stamp item to get it out of layout\n  this.stamp( item.element );\n  // set placing flag\n  item.enablePlacing();\n  this.updateShiftTargets( item );\n  // fall back to current position for fitting\n  x = x === undefined ? item.rect.x: x;\n  y = y === undefined ? item.rect.y: y;\n  // position it best at its destination\n  this.shift( item, x, y );\n  this._bindFitEvents( item );\n  item.moveTo( item.rect.x, item.rect.y );\n  // layout everything else\n  this.shiftLayout();\n  // return back to regularly scheduled programming\n  this.unstamp( item.element );\n  this.sortItemsByPosition();\n  item.disablePlacing();\n};\n\n/**\n * emit event when item is fit and other items are laid out\n * @param {Packery.Item} item\n * @private\n */\nproto._bindFitEvents = function( item ) {\n  var _this = this;\n  var ticks = 0;\n  function onLayout() {\n    ticks++;\n    if ( ticks != 2 ) {\n      return;\n    }\n    _this.dispatchEvent( 'fitComplete', null, [ item ] );\n  }\n  // when item is laid out\n  item.once( 'layout', onLayout );\n  // when all items are laid out\n  this.once( 'layoutComplete', onLayout );\n};\n\n// -------------------------- resize -------------------------- //\n\n// debounced, layout on resize\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #285, outlayer#9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  if ( this.options.shiftPercentResize ) {\n    this.resizeShiftPercentLayout();\n  } else {\n    this.layout();\n  }\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  var innerSize = this._getOption('horizontal') ? 'innerHeight' : 'innerWidth';\n  return size[ innerSize ] != this.size[ innerSize ];\n};\n\nproto.resizeShiftPercentLayout = function() {\n  var items = this._getItemsForLayout( this.items );\n\n  var isHorizontal = this._getOption('horizontal');\n  var coord = isHorizontal ? 'y' : 'x';\n  var measure = isHorizontal ? 'height' : 'width';\n  var segmentName = isHorizontal ? 'rowHeight' : 'columnWidth';\n  var innerSize = isHorizontal ? 'innerHeight' : 'innerWidth';\n\n  // proportional re-align items\n  var previousSegment = this[ segmentName ];\n  previousSegment = previousSegment && previousSegment + this.gutter;\n\n  if ( previousSegment ) {\n    this._getMeasurements();\n    var currentSegment = this[ segmentName ] + this.gutter;\n    items.forEach( function( item ) {\n      var seg = Math.round( item.rect[ coord ] / previousSegment );\n      item.rect[ coord ] = seg * currentSegment;\n    });\n  } else {\n    var currentSize = getSize( this.element )[ innerSize ] + this.gutter;\n    var previousSize = this.packer[ measure ];\n    items.forEach( function( item ) {\n      item.rect[ coord ] = ( item.rect[ coord ] / previousSize ) * currentSize;\n    });\n  }\n\n  this.shiftLayout();\n};\n\n// -------------------------- drag -------------------------- //\n\n/**\n * handle an item drag start event\n * @param {Element} elem\n */\nproto.itemDragStart = function( elem ) {\n  if ( !this.isEnabled ) {\n    return;\n  }\n  this.stamp( elem );\n  // this.ignore( elem );\n  var item = this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  item.enablePlacing();\n  item.showDropPlaceholder();\n  this.dragItemCount++;\n  this.updateShiftTargets( item );\n};\n\nproto.updateShiftTargets = function( dropItem ) {\n  this.shiftPacker.reset();\n\n  // pack stamps\n  this._getBoundingRect();\n  var isOriginLeft = this._getOption('originLeft');\n  var isOriginTop = this._getOption('originTop');\n  this.stamps.forEach( function( stamp ) {\n    // ignore dragged item\n    var item = this.getItem( stamp );\n    if ( item && item.isPlacing ) {\n      return;\n    }\n    var offset = this._getElementOffset( stamp );\n    var rect = new Rect({\n      x: isOriginLeft ? offset.left : offset.right,\n      y: isOriginTop ? offset.top : offset.bottom\n    });\n    this._setRectSize( stamp, rect );\n    // save its space in the packer\n    this.shiftPacker.placed( rect );\n  }, this );\n\n  // reset shiftTargets\n  var isHorizontal = this._getOption('horizontal');\n  var segmentName = isHorizontal ? 'rowHeight' : 'columnWidth';\n  var measure = isHorizontal ? 'height' : 'width';\n\n  this.shiftTargetKeys = [];\n  this.shiftTargets = [];\n  var boundsSize;\n  var segment = this[ segmentName ];\n  segment = segment && segment + this.gutter;\n\n  if ( segment ) {\n    var segmentSpan = Math.ceil( dropItem.rect[ measure ] / segment );\n    var segs = Math.floor( ( this.shiftPacker[ measure ] + this.gutter ) / segment );\n    boundsSize = ( segs - segmentSpan ) * segment;\n    // add targets on top\n    for ( var i=0; i < segs; i++ ) {\n      var initialX = isHorizontal ? 0 : i * segment;\n      var initialY = isHorizontal ? i * segment : 0;\n      this._addShiftTarget( initialX, initialY, boundsSize );\n    }\n  } else {\n    boundsSize = ( this.shiftPacker[ measure ] + this.gutter ) - dropItem.rect[ measure ];\n    this._addShiftTarget( 0, 0, boundsSize );\n  }\n\n  // pack each item to measure where shiftTargets are\n  var items = this._getItemsForLayout( this.items );\n  var packMethod = this._getPackMethod();\n  items.forEach( function( item ) {\n    var rect = item.rect;\n    this._setRectSize( item.element, rect );\n    this.shiftPacker[ packMethod ]( rect );\n\n    // add top left corner\n    this._addShiftTarget( rect.x, rect.y, boundsSize );\n    // add bottom left / top right corner\n    var cornerX = isHorizontal ? rect.x + rect.width : rect.x;\n    var cornerY = isHorizontal ? rect.y : rect.y + rect.height;\n    this._addShiftTarget( cornerX, cornerY, boundsSize );\n\n    if ( segment ) {\n      // add targets for each column on bottom / row on right\n      var segSpan = Math.round( rect[ measure ] / segment );\n      for ( var i=1; i < segSpan; i++ ) {\n        var segX = isHorizontal ? cornerX : rect.x + segment * i;\n        var segY = isHorizontal ? rect.y + segment * i : cornerY;\n        this._addShiftTarget( segX, segY, boundsSize );\n      }\n    }\n  }, this );\n\n};\n\nproto._addShiftTarget = function( x, y, boundsSize ) {\n  var checkCoord = this._getOption('horizontal') ? y : x;\n  if ( checkCoord !== 0 && checkCoord > boundsSize ) {\n    return;\n  }\n  // create string for a key, easier to keep track of what targets\n  var key = x + ',' + y;\n  var hasKey = this.shiftTargetKeys.indexOf( key ) != -1;\n  if ( hasKey ) {\n    return;\n  }\n  this.shiftTargetKeys.push( key );\n  this.shiftTargets.push({ x: x, y: y });\n};\n\n// -------------------------- drop -------------------------- //\n\nproto.shift = function( item, x, y ) {\n  var shiftPosition;\n  var minDistance = Infinity;\n  var position = { x: x, y: y };\n  this.shiftTargets.forEach( function( target ) {\n    var distance = getDistance( target, position );\n    if ( distance < minDistance ) {\n      shiftPosition = target;\n      minDistance = distance;\n    }\n  });\n  item.rect.x = shiftPosition.x;\n  item.rect.y = shiftPosition.y;\n};\n\nfunction getDistance( a, b ) {\n  var dx = b.x - a.x;\n  var dy = b.y - a.y;\n  return Math.sqrt( dx * dx + dy * dy );\n}\n\n// -------------------------- drag move -------------------------- //\n\nvar DRAG_THROTTLE_TIME = 120;\n\n/**\n * handle an item drag move event\n * @param {Element} elem\n * @param {Number} x - horizontal change in position\n * @param {Number} y - vertical change in position\n */\nproto.itemDragMove = function( elem, x, y ) {\n  var item = this.isEnabled && this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  x -= this.size.paddingLeft;\n  y -= this.size.paddingTop;\n\n  var _this = this;\n  function onDrag() {\n    _this.shift( item, x, y );\n    item.positionDropPlaceholder();\n    _this.layout();\n  }\n\n  // throttle\n  var now = new Date();\n  if ( this._itemDragTime && now - this._itemDragTime < DRAG_THROTTLE_TIME ) {\n    clearTimeout( this.dragTimeout );\n    this.dragTimeout = setTimeout( onDrag, DRAG_THROTTLE_TIME );\n  } else {\n    onDrag();\n    this._itemDragTime = now;\n  }\n};\n\n// -------------------------- drag end -------------------------- //\n\n/**\n * handle an item drag end event\n * @param {Element} elem\n */\nproto.itemDragEnd = function( elem ) {\n  var item = this.isEnabled && this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  clearTimeout( this.dragTimeout );\n  item.element.classList.add('is-positioning-post-drag');\n\n  var completeCount = 0;\n  var _this = this;\n  function onDragEndLayoutComplete() {\n    completeCount++;\n    if ( completeCount != 2 ) {\n      return;\n    }\n    // reset drag item\n    item.element.classList.remove('is-positioning-post-drag');\n    item.hideDropPlaceholder();\n    _this.dispatchEvent( 'dragItemPositioned', null, [ item ] );\n  }\n\n  item.once( 'layout', onDragEndLayoutComplete );\n  this.once( 'layoutComplete', onDragEndLayoutComplete );\n  item.moveTo( item.rect.x, item.rect.y );\n  this.layout();\n  this.dragItemCount = Math.max( 0, this.dragItemCount - 1 );\n  this.sortItemsByPosition();\n  item.disablePlacing();\n  this.unstamp( item.element );\n};\n\n/**\n * binds Draggabilly events\n * @param {Draggabilly} draggie\n */\nproto.bindDraggabillyEvents = function( draggie ) {\n  this._bindDraggabillyEvents( draggie, 'on' );\n};\n\nproto.unbindDraggabillyEvents = function( draggie ) {\n  this._bindDraggabillyEvents( draggie, 'off' );\n};\n\nproto._bindDraggabillyEvents = function( draggie, method ) {\n  var handlers = this.handleDraggabilly;\n  draggie[ method ]( 'dragStart', handlers.dragStart );\n  draggie[ method ]( 'dragMove', handlers.dragMove );\n  draggie[ method ]( 'dragEnd', handlers.dragEnd );\n};\n\n/**\n * binds jQuery UI Draggable events\n * @param {jQuery} $elems\n */\nproto.bindUIDraggableEvents = function( $elems ) {\n  this._bindUIDraggableEvents( $elems, 'on' );\n};\n\nproto.unbindUIDraggableEvents = function( $elems ) {\n  this._bindUIDraggableEvents( $elems, 'off' );\n};\n\nproto._bindUIDraggableEvents = function( $elems, method ) {\n  var handlers = this.handleUIDraggable;\n  $elems\n    [ method ]( 'dragstart', handlers.start )\n    [ method ]( 'drag', handlers.drag )\n    [ method ]( 'dragstop', handlers.stop );\n};\n\n// ----- destroy ----- //\n\nvar _destroy = proto.destroy;\nproto.destroy = function() {\n  _destroy.apply( this, arguments );\n  // disable flag; prevent drag events from triggering. #72\n  this.isEnabled = false;\n};\n\n// -----  ----- //\n\nPackery.Rect = Rect;\nPackery.Packer = Packer;\n\nreturn Packery;\n\n}));\n","import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport Packery from 'packery'\nimport imagesLoaded from 'imagesloaded'\n\nclass HasPackeryView extends Marionette.Behavior\n  options:\n    listContainer: '.list-container'\n    hasPageableCollection: false\n    packeryOptions:\n      gutter: 1\n      isInitLayout: false\n      itemSelector: '.item'\n      columnWidth: 10\n      horizontalOrder: true\n  ui: ->\n    list: @getOption 'listContainer'\n  regions:\n    list: '@ui.list'\n    \n  setPackery: ->\n    container = @getOption 'listContainer'\n    packeryOptions = @getOption 'packeryOptions'\n    @view.packery = new Packery container, packeryOptions\n    \n  setPackeryLayout: ->\n    console.log \"USING PACKERY!!!!!!!!!!!!\"\n    packeryOptions = @getOption 'packeryOptions'\n    items = @$ packeryOptions.itemSelector\n    imagesLoaded items, =>\n      # FIXME we need to find a better option\n      setTimeout =>\n        @view.packery.reloadItems()\n        @view.packery.layout()\n      , 700\n      \n  onBeforeDestroy: ->\n    @view.packery.destroy()\n    \n  onDomRefresh: () ->\n    @setPackery()\n    @setPackeryLayout()\n    if @view?.afterDomRefresh\n      @view.afterDomRefresh()\n    \n  collectionEvents: ->\n    data = {}\n    if @getOption 'hasPageableCollection'\n      data['pageable:state:change'] = 'setPackeryLayout'\n    return data\n    \nexport default HasPackeryView\n","import tc from 'teacup'\n\n#export default (size='5x') ->\n#  return tc.renderable\nexport default tc.renderable (size='5x') ->\n  tc.span \".fa-stack.fa-#{size}\", ->\n    tc.i \".fa.fa-image.fa-stack-1x\"\n    tc.i \".fa.fa-ban.fa-stack-2x.text-danger\"\n    \n","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n","import $ from 'jquery'\nimport Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport tc from 'teacup'\n\nMainChannel = Backbone.Radio.channel 'global'\nMessageChannel = Backbone.Radio.channel 'messages'\n\n# this needs to be contained in a 'nav' region\nexport default class PaginationView extends Marionette.View\n  tagName: 'ul'\n  className: 'pagination'\n  template: tc.renderable (model) ->\n    if model instanceof Backbone.Collection\n      state = model.state\n    else\n      state = model.collection.state\n    totalPages = state.totalPages\n    firstPage = state.firstPage\n    lastPage = state.lastPage\n    tc.li '.page-item', ->\n      tc.a '.prev.page-link.bg-body-d5', ->\n        tc.i '.fa.fa-arrow-left'\n    for p in [firstPage..lastPage]\n      tc.li '.page-item', ->\n        tc.a '.numbered-page.page-link.bg-body-d5.text-dark',\n        href:'#', data: pageNumber: p, p\n    tc.li '.page-item', ->\n      tc.a '.next.page-link.bg-body-d5', ->\n        tc.i '.fa.fa-arrow-right'\n  templateContext: ->\n    collection: @collection\n  ui:\n    numberedPage: '.numbered-page'\n    prevButton: '.prev'\n    nextButton: '.next'\n  events:\n    'click @ui.numberedPage': 'turnPage'\n    'click @ui.prevButton': 'getPreviousPage'\n    'click @ui.nextButton': 'getNextPage'\n  onDomRefresh: ->\n    @updateNavButtons()\n  turnPage: (event) ->\n    event.preventDefault()\n    el = $(event.target)\n    pageNumber = el.attr 'data-pagenumber'\n    @collection.getPage Number pageNumber\n    @updateNavButtons()\n\n  updateNavButtons: ->\n    state = @collection.state\n    prevItem = @ui.prevButton.parent()\n    if state.currentPage == state.firstPage\n      unless prevItem.hasClass 'disabled'\n        prevItem.addClass 'disabled'\n    else\n      if prevItem.hasClass 'disabled'\n        prevItem.removeClass 'disabled'\n    nextItem = @ui.nextButton.parent()\n    if state.currentPage == state.lastPage\n      unless nextItem.hasClass 'disabled'\n        nextItem.addClass 'disabled'\n    else\n      if nextItem.addClass 'disabled'\n        nextItem.removeClass 'disabled'\n    @ui.numberedPage.parent().removeClass 'active'\n    @ui.numberedPage.removeClass 'text-white'\n    @ui.numberedPage.addClass 'text-dark'\n    cp = $(\"[data-pagenumber=\\\"#{state.currentPage}\\\"]\")\n    cpp = cp.parent()\n    cpp.addClass 'active'\n    cp.removeClass 'text-dark'\n    cp.addClass 'text-white'\n\n  getAnotherPage: (direction) ->\n    state = @collection.state\n    onLastPage = state.currentPage == state.lastPage\n    # we need this in case the pages start at zero\n    onFirstPage = state.currentPage == state.firstPage\n    if direction is 'prev' and not onFirstPage\n      if state.currentPage != state.firstPage\n        resp = @collection.getPreviousPage()\n    else if direction is 'next' and not onLastPage\n      resp = @collection.getNextPage()\n    else if onLastPage\n      return\n    else\n      throw new Error \"bad direction '#{direction}'\"\n    @updateNavButtons()\n    return resp\n    \n  getPreviousPage: ->\n    return @getAnotherPage 'prev'\n      \n  getNextPage: ->\n    return @getAnotherPage 'next'\n      \n  onRender: ->\n    setKeyHandler = @getOption 'setKeyHandler'\n    if setKeyHandler\n      @onRenderHandleKeys()\n      \n  onBeforeDestroy: ->\n    setKeyHandler = @getOption 'setKeyHandler'\n    if setKeyHandler\n      @onBeforeDestroyHandleKeys()\n    \n  keycommands:\n    prev: 37\n    next: 39\n  handleKeyCommand: (command) ->\n    if command in ['prev', 'next']\n      @getAnotherPage command\n  keydownHandler: (event) =>\n    for key, value of @keycommands\n      if event.keyCode == value\n        @handleKeyCommand key\n\n  onRenderHandleKeys: ->\n    $(\"html\").keydown @keydownHandler\n\n  onBeforeDestroyHandleKeys: ->\n    $(\"html\").unbind 'keydown', @keydownHandler\n    \n","/**\n * Rect\n * low-level utility class for basic geometry\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.Packery = window.Packery || {};\n    window.Packery.Rect = factory();\n  }\n\n}( window, function factory() {\n'use strict';\n\n// -------------------------- Rect -------------------------- //\n\nfunction Rect( props ) {\n  // extend properties from defaults\n  for ( var prop in Rect.defaults ) {\n    this[ prop ] = Rect.defaults[ prop ];\n  }\n\n  for ( prop in props ) {\n    this[ prop ] = props[ prop ];\n  }\n\n}\n\nRect.defaults = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0\n};\n\nvar proto = Rect.prototype;\n\n/**\n * Determines whether or not this rectangle wholly encloses another rectangle or point.\n * @param {Rect} rect\n * @returns {Boolean}\n**/\nproto.contains = function( rect ) {\n  // points don't have width or height\n  var otherWidth = rect.width || 0;\n  var otherHeight = rect.height || 0;\n  return this.x <= rect.x &&\n    this.y <= rect.y &&\n    this.x + this.width >= rect.x + otherWidth &&\n    this.y + this.height >= rect.y + otherHeight;\n};\n\n/**\n * Determines whether or not the rectangle intersects with another.\n * @param {Rect} rect\n * @returns {Boolean}\n**/\nproto.overlaps = function( rect ) {\n  var thisRight = this.x + this.width;\n  var thisBottom = this.y + this.height;\n  var rectRight = rect.x + rect.width;\n  var rectBottom = rect.y + rect.height;\n\n  // http://stackoverflow.com/a/306332\n  return this.x < rectRight &&\n    thisRight > rect.x &&\n    this.y < rectBottom &&\n    thisBottom > rect.y;\n};\n\n/**\n * @param {Rect} rect - the overlapping rect\n * @returns {Array} freeRects - rects representing the area around the rect\n**/\nproto.getMaximalFreeRects = function( rect ) {\n\n  // if no intersection, return false\n  if ( !this.overlaps( rect ) ) {\n    return false;\n  }\n\n  var freeRects = [];\n  var freeRect;\n\n  var thisRight = this.x + this.width;\n  var thisBottom = this.y + this.height;\n  var rectRight = rect.x + rect.width;\n  var rectBottom = rect.y + rect.height;\n\n  // top\n  if ( this.y < rect.y ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: rect.y - this.y\n    });\n    freeRects.push( freeRect );\n  }\n\n  // right\n  if ( thisRight > rectRight ) {\n    freeRect = new Rect({\n      x: rectRight,\n      y: this.y,\n      width: thisRight - rectRight,\n      height: this.height\n    });\n    freeRects.push( freeRect );\n  }\n\n  // bottom\n  if ( thisBottom > rectBottom ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: rectBottom,\n      width: this.width,\n      height: thisBottom - rectBottom\n    });\n    freeRects.push( freeRect );\n  }\n\n  // left\n  if ( this.x < rect.x ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: this.y,\n      width: rect.x - this.x,\n      height: this.height\n    });\n    freeRects.push( freeRect );\n  }\n\n  return freeRects;\n};\n\nproto.canFit = function( rect ) {\n  return this.width >= rect.width && this.height >= rect.height;\n};\n\nreturn Rect;\n\n}));\n","import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport Masonry from 'masonry-layout'\nimport imagesLoaded from 'imagesloaded'\n\nclass HasMasonryView extends Marionette.Behavior\n  options:\n    listContainer: '.list-container'\n    hasPageableCollection: false\n    masonryOptions:\n      gutter: 1\n      isInitLayout: false\n      itemSelector: '.item'\n      columnWidth: 10\n      horizontalOrder: true\n  ui: ->\n    list: @getOption 'listContainer'\n  regions:\n    list: '@ui.list'\n    \n  setMasonry: ->\n    container = @getOption 'listContainer'\n    masonryOptions = @getOption 'masonryOptions'\n    @view.masonry = new Masonry container, masonryOptions\n    \n  setMasonryLayout: ->\n    masonryOptions = @getOption 'masonryOptions'\n    items = @$ masonryOptions.itemSelector\n    imagesLoaded items, =>\n      # FIXME we need to find a better option\n      setTimeout =>\n        @view.masonry.reloadItems()\n        @view.masonry.layout()\n      , 700\n      \n  onBeforeDestroy: ->\n    @view.masonry.destroy()\n    \n  onDomRefresh: () ->\n    @setMasonry()\n    @setMasonryLayout()\n    if @view?.afterDomRefresh\n      @view.afterDomRefresh()\n    \n  collectionEvents: ->\n    data = {}\n    if @getOption 'hasPageableCollection'\n      data['pageable:state:change'] = 'setMasonryLayout'\n    return data\n    \nexport default HasMasonryView\n"],"sourceRoot":""}