(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{153:function(e,t,n){var r,i,s,o,a,u,l,h,c,p,d;n(4),r=n(0),l=n(2),d=n(1),a=n(62),n(61),c=n(99).default,u=r.Radio.channel("global"),h=r.Radio.channel("messages"),r.Radio.channel("ebcsv"),p=d.renderable(function(e){return d.div(".listview-list-entry",function(){return d.h2(e.name),d.div(".btn-group",function(){return d.button(".view.btn.btn-success",{type:"button"},"View"),d.button(".export.btn.btn-primary",{type:"button"},"Export"),d.button(".import.btn.btn-info",{type:"button"},"Import")}),d.div(".dbview")})}),s=function(){class e extends l.View{onDomRefresh(){var e;return e=this.model.toJSON(),console.log("data is",e),this.jsonView=new a(e),this.ui.body.prepend(this.jsonView.dom)}}return e.prototype.template=d.renderable(function(e){return d.div(function(){return d.div(".body")})}),e.prototype.ui={body:".body"},e}.call(this),o=function(){class e extends l.View{_exportDatabase(){return this.model.get("conn").export()}viewDatabase(){return this._exportDatabase().then(e=>{var t;return t=new s({model:new r.Model({data:e})}),this.showChildView("dbView",t),this.ui.viewButton.hide()})}exportDatabase(){return this._exportDatabase().then(e=>{var t;return t={type:"data:text/json;charset=utf-8",data:JSON.stringify(e),filename:`${this.model.get("name")}-idb.json`},c(t),console.log("DATA",e),h.request("primary",`Exported Database ${this.model.get("name")}`)})}importDatabase(){return h.request("info",`Import Database ${this.model.get("name")}`)}}return e.prototype.template=p,e.prototype.ui={viewButton:".view",exportButton:".export",importButton:".import",dbView:".dbview"},e.prototype.regions={dbView:"@ui.dbView"},e.prototype.events={"click @ui.viewButton":"viewDatabase","click @ui.exportButton":"exportDatabase","click @ui.importButton":"importDatabase"},e}.call(this),i=function(){class e extends r.Marionette.View{onRender(){var e,t,n;return e=u.request("main:app:object"),t=e.getState("dbConn"),this.collection=new r.Collection,n=new l.CollectionView({collection:this.collection,childView:o}),this.showChildView("body",n),Object.keys(t).forEach(e=>this.collection.add({id:e,name:e,conn:t[e]}))}}return e.prototype.regions={body:".body"},e.prototype.template=d.renderable(function(e){return d.div(".listview-header",function(){return d.text("Indexed Database Admin")}),d.div(".body")}),e}.call(this),e.exports=i},46:function(e,t){var n,r,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],h=!1,c=-1;function p(){h&&u&&(h=!1,u.length?l=u.concat(l):c=-1,l.length&&d())}function d(){if(!h){var e=a(p);h=!0;for(var t=l.length;t;){for(u=l,l=[];++c<t;)u&&u[c].run();c=-1,t=l.length}u=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||h||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},49:function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(s(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),o=(l=n.slice()).length,u=0;u<o;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,s,o,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,s=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=o;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){s=a;break}if(s<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},99:function(e,t,n){"use strict";n.r(t),t.default=function(e){var t,n,r,i;return n=encodeURIComponent(e.data),i=`${e.type},${n}`,r=e.filename||"exported",(t=document.createElement("a")).id=e.elId||"exported-file-anchor",t.href=i,t.download=r,t.innerHTML=`Download ${r}`,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}]);