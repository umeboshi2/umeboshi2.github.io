{"version":3,"sources":["webpack:///./src/applets/ebcsv/views/has-header.coffee","webpack:///./src/applets/ebcsv/views/cachedcomics.coffee","webpack:///./node_modules/tbirds/src/templates/forms.coffee","webpack:///./node_modules/imagesloaded/imagesloaded.js","webpack:///./node_modules/tbirds/src/templates/buttons.coffee","webpack:///./src/applets/ebcsv/views/base-masonry.coffee","webpack:///./src/applets/ebcsv/views/has-image-modal.coffee"],"names":["HasHeader","Marionette","__webpack_require__","Behavior","[object Object]","text","this","ui","header","module","exports","AppChannel","Backbone","CachedComicCollectionView","CachedComicEntryView","CachedComicListView","CachedComicToolbar","ComicMainView","EmptyView","HasImageModal","HasMasonryView","ImageToolbar","MainChannel","MessageChannel","ToolbarView","_","form_group_input_div","imgtoolbar_entries","listContainer","make_field_input","make_field_select","tc","toolbarEntries","indexOf","Radio","channel","id","label","url","icon","child","trigger","model","console","log","el","regions","getChildView","$el","removeClass","options","entryTemplate","renderable","i","View","image","triggers","click @ui.image","behaviors","template","img","image_src","replace","div","src","CollectionView","childView","emptyView","browser","server","childViewTriggers","toolbar:entry:clicked","toolbar","list","cacheType","collection","showChildView","getOption","Collection","triggerMethod","length","cacheTypes","call","toolbarButtonClicked","warn","destroyLocalImages","button","backupServerImages","restoreServerImages","response","fetch","done","item","items","len","ref","toJSON","push","type","data","JSON","stringify","el_id","filename","request","fail","reset","behaviorClass","masonryOptions","gutter","isInitLayout","itemSelector","columnWidth","horizontalOrder","cachedImages","locals","view","clone","Object","keys","forEach","key","add","comics","content","childViewEvents","toolbar:browser:click","toolbar:server:click","login_form","make_field_textarea","make_login_form","name_content_form","_util_capitalize__WEBPACK_IMPORTED_MODULE_1__","teacup__WEBPACK_IMPORTED_MODULE_0___default","a","atts","input_type","selector","for","input_id","input_attributes","input","field","name","placeholder","value","optlist","select","opt","results","option","selected","action","method","user","form","role","textarea","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","window","factory","undefined","EvEmitter","$","jQuery","extend","b","prop","arraySlice","Array","prototype","slice","ImagesLoaded","elem","onAlways","queryElem","document","querySelectorAll","elements","obj","isArray","makeArray","on","getImages","jqDeferred","Deferred","setTimeout","check","bind","error","create","images","addElementImages","nodeName","addImage","background","addElementBackgroundImages","nodeType","elementNodeTypes","childImgs","children","1","9","11","LoadingImage","Background","element","Image","style","getComputedStyle","reURL","matches","exec","backgroundImage","addBackground","loadingImage","_this","onProgress","message","progress","progressedCount","hasAnyBroken","once","complete","isLoaded","emitEvent","notify","debug","eventName","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","addEventListener","handleEvent","event","onload","unbindEvents","onerror","removeEventListener","makeJQueryPlugin","fn","imagesLoaded","callback","promise","apply","divbutton","dropdown_toggle","modal_close_button","navbar_collapse_button","spanbutton","teacup__WEBPACK_IMPORTED_MODULE_0__","n","component","attrs","renderContents","span","data-dismiss","h4","target","data-toggle","data-target","href","Masonry","container","masonry","reloadItems","layout","destroy","setMasonry","setMasonryLayout","afterDomRefresh","BaseModalView","ImageModalView","mainsection","ul","li"],"mappings":"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","file":"ebcsv-view-cached-comics-view-cb5610bab877afd4e4b3.js","sourcesContent":["Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\n\n\nclass HasHeader extends Marionette.Behavior\n  onSetHeader: (text) ->\n    @ui.header.text text\n    \nmodule.exports = HasHeader\n","_ = require 'underscore'\nBackbone = require 'backbone'\nMarionette = require 'backbone.marionette'\nMasonry = require 'masonry-layout'\nimagesLoaded = require 'imagesloaded'\ntc = require 'teacup'\n\nEmptyView = require 'tbirds/views/empty'\nToolbarView = require 'tbirds/views/button-toolbar'\nnavigate_to_url = require 'tbirds/util/navigate-to-url'\n{ make_field_input\n  make_field_select } = require 'tbirds/templates/forms'\n{ form_group_input_div } = require 'tbirds/templates/forms'\n\nHasMasonryView = require './base-masonry'\nHasImageModal = require './has-image-modal'\nHasHeader = require './has-header'\n\nMainChannel = Backbone.Radio.channel 'global'\nMessageChannel = Backbone.Radio.channel 'messages'\nAppChannel = Backbone.Radio.channel 'ebcsv'\n\ntoolbarEntries = [\n  {\n    id: 'server'\n    label: 'Server Images'\n    url: '#ebcsv'\n    icon: '.fa.fa-server'\n  }\n  {\n    id: 'browser'\n    label: 'Browser Images'\n    url: '#ebcsv'\n    icon: '.fa.fa-internet-explorer'\n  }\n  ]\n\nclass CachedComicToolbar extends ToolbarView\n  options:\n    entryTemplate: tc.renderable (model) ->\n      tc.i model.icon\n      tc.text \" \"\n      tc.text model.label\n  onChildviewToolbarEntryClicked: (child) ->\n    @trigger \"toolbar:#{child.model.id}:click\", child\n    console.log \"onChildviewToolbarEntryClicked\", child.model.id\n  onDomRefresh: ->\n    console.log \"onDomRefresh\", @regions\n    eview = @getChildView 'entries'\n    el = eview.$el\n    console.log \"el is\",el\n    el.removeClass 'btn-group-justified'\n    \n      \nclass CachedComicEntryView extends Marionette.View\n  ui:\n    image: 'img'\n  triggers:\n    'click @ui.image': 'show:image:modal'\n  behaviors: [HasImageModal]\n  template: tc.renderable (model) ->\n    img = model.image_src.replace '/lg/', '/sm/'\n    img = img.replace 'http://', '//'\n    tc.div '.item', ->\n      tc.img src:img\n\nclass CachedComicCollectionView extends Marionette.CollectionView\n  childView: CachedComicEntryView\n  emptyView: EmptyView\n\ndestroy_entry =\n  id: 'destroy'\n  label: 'Delete All'\n  icon: '.fa.fa-erase'\n\nserver_backup_entry =\n  id: 'backup'\n  label: 'Backup'\n  icon: '.fa.fa-download'\n\nserver_restore_entry =\n  id: 'restore'\n  label: 'Restore'\n  icon: '.fa.fa-upload'\n\nbrowser_image_toolbar_entries = [\n  destroy_entry\n  ]\nserver_image_toolbar_entries = [\n  server_backup_entry\n  server_restore_entry\n  ]\n\nimgtoolbar_entries =\n  browser: browser_image_toolbar_entries\n  server: server_image_toolbar_entries\n  \nclass ImageToolbarOrig extends ToolbarView\n  onChildviewToolbarEntryClicked: (child) ->\n    console.log \"a button pressed\", child\n    console.log \"#{@getOption 'cacheType'} toolbar\"\n    cacheType = @getOption 'cacheType'\n    cacheTypes = ['browser', 'server']\n    if cacheType in cacheTypes\n      @[\"#{cacheType}ButtonClicked\"](child)\n    else\n      @toolbarButtonClicked child\n      \n  toolbarButtonClicked: (child) ->\n    console.warn \"we don't have a cacheType on this toolbar\"\n\n  browserButtonClicked: (child) ->\n    console.log 'browser button', child\n\n  serverButtonClicked: (child) ->\n    console.log 'server button', child\n    \n\nclass ImageToolbar extends ToolbarView\n  # skip navigating to url and bubble event up\n  # to list view\n  onChildviewToolbarEntryClicked: ->\n  childViewTriggers:\n    'toolbar:entry:clicked': 'toolbar:entry:clicked'\n\nlistContainer = '.list-container'\nclass CachedComicListView extends Marionette.View\n  ui: ->\n    toolbar: '.toolbar'\n    list: listContainer\n    header: '.listview-header'\n  regions:\n    toolbar: '@ui.toolbar'\n    list: '@ui.list'\n  behaviors:\n    HasMasonryView:\n      behaviorClass: HasMasonryView\n      listContainer: listContainer\n      masonryOptions:\n        gutter: 1\n        isInitLayout: false\n        itemSelector: '.item'\n        columnWidth: 10\n        horizontalOrder: false\n    HasHeader:\n      behaviorClass: HasHeader\n  template: tc.renderable (model) ->\n    tc.div ->\n      tc.div '.listview-header'\n      tc.div '.toolbar'\n      tc.div listContainer\n  onRender: ->\n    list = new CachedComicCollectionView\n      collection: @collection\n    @showChildView 'list', list\n    cacheType = @getOption 'cacheType'\n    toolbar = new ImageToolbar\n      collection: new Backbone.Collection imgtoolbar_entries[cacheType]\n      cacheType: cacheType\n    @showChildView 'toolbar', toolbar\n    @triggerMethod 'set:header',\n    \"#{@collection.length} images stored in the #{@getOption 'cacheType'}\"\n  onChildviewToolbarEntryClicked: (child) ->\n    console.log \"a button pressed\", child\n    console.log \"#{@getOption 'cacheType'} toolbar\"\n    cacheType = @getOption 'cacheType'\n    cacheTypes = ['browser', 'server']\n    if cacheType in cacheTypes\n      @[\"#{cacheType}ButtonClicked\"](child)\n    else\n      @toolbarButtonClicked child\n      \n  toolbarButtonClicked: (child) ->\n    console.warn \"we don't have a cacheType on this toolbar\"\n\n  browserButtonClicked: (child) ->\n    button = child.model.id\n    if button == 'destroy'\n      @destroyLocalImages()\n      \n  serverButtonClicked: (child) ->\n    button = child.model.id\n    if button == 'backup'\n      @backupServerImages()\n    else if button == 'restore'\n      @restoreServerImages()\n\n  backupServerImages: ->\n    response = @collection.fetch()\n    response.done =>\n      items = []\n      for item in @collection.toJSON()\n        delete item.id\n        items.push item\n      console.log 'ITEMS', items\n      options =\n        type: 'data:text/json;charset=utf-8'\n        data: JSON.stringify items: items\n        el_id: 'exported-urls-anchor'\n        filename: 'url-backup.json'\n      MainChannel.request 'export-to-file', options\n    response.fail ->\n      MessageChannel.request 'danger', 'Failed to get image urls!'\n      \n  restoreServerImages: ->\n    console.warn 'restoreServerImages'\n    \n  destroyLocalImages: ->\n    AppChannel.request 'clear-comic-image-urls'\n    @collection.reset()\n    \nclass ComicMainView extends Marionette.View\n  ui:\n    content: '.content-container'\n    toolbar: '.images-toolbar'\n    header: '.listview-header'\n  regions:\n    content: '@ui.content'\n    toolbar: '@ui.toolbar'\n  behaviors: [HasHeader]\n  template: tc.renderable (model) ->\n    tc.div ->\n      tc.div '.listview-header'\n      tc.div '.images-toolbar'\n      tc.div '.content-container'\n  onRender: ->\n    toolbar = new CachedComicToolbar\n      collection: new Backbone.Collection toolbarEntries\n    @showChildView 'toolbar', toolbar\n    @triggerMethod 'set:header', \"Cached Comic Cover Images\"\n    \n  childViewEvents:\n    'toolbar:browser:click': 'view_local_storage'\n    'toolbar:server:click': 'view_server_storage'\n    \n  view_local_storage: ->\n    cachedImages = new Backbone.Collection\n    locals = _.clone AppChannel.request 'get-comic-image-urls'\n    delete locals.id\n    Object.keys(locals).forEach (key) ->\n      item =\n        url: key\n        image_src: locals[key]\n      cachedImages.add item\n    view = new CachedComicListView\n      collection: cachedImages\n      cacheType: 'browser'\n    @showChildView 'content', view\n    \n  view_server_storage: ->\n    comics = AppChannel.request 'clzpage-collection'\n    response = comics.fetch()\n    response.done =>\n      view = new CachedComicListView\n        collection: comics\n        cacheType: 'server'\n      @showChildView 'content', view\n    response.fail ->\n      MessageChannel.request 'danger', 'Failed to get cached comics'\n        \nmodule.exports = ComicMainView\n\n\n","import tc from 'teacup'\n\nimport capitalize from '../util/capitalize'\n\nif __useCssModules__\n  require \"../../sass/forms.scss\"\n\n########################################\n# Form Templates\n########################################\nform_group_input_div = tc.renderable (data) ->\n  tc.div '.form-group', ->\n    tc.label '.control-label',\n      for:data.input_id\n      data.label\n    selector = \"##{data.input_id}.form-control\"\n    atts = data.input_attributes\n    input_type = tc.input\n    if data?.input_type\n      input_type = tc[data.input_type]\n      input_type selector, atts, ->\n        tc.text data?.content\n    else\n      input_type selector, atts\n\nmake_field_input = (field) ->\n  tc.renderable (model) ->\n    form_group_input_div\n      input_id: \"input_#{field}\"\n      label: capitalize field\n      input_attributes:\n        name: field\n        placeholder: field\n        value: model[field]\n    \nmake_field_textarea = (field) ->\n  tc.renderable (model) ->\n    form_group_input_div\n      input_id: \"input_#{field}\"\n      input_type: 'textarea'\n      label: capitalize field\n      input_attributes:\n        name: field\n        placeholder: field\n      content: model[field]\n\nmake_field_select = (field, optlist) ->\n  tc.renderable (model) ->\n    tc.div '.form-group', ->\n      tc.label '.control-label',\n        for:\"select_#{field}\"\n      capitalize field\n    tc.select '.form-control', name:\"select_#{field}\", ->\n      for opt in optlist\n        if model[field] is opt\n          tc.option selected:null, value:opt, opt\n        else\n          tc.option value:opt, opt\n          \nmake_login_form = (action='/login', method='POST') ->\n  tc.renderable (user) ->\n    tc.form\n      role:'form'\n      method: method\n      action: action, ->\n        form_group_input_div\n          input_id: 'input_username'\n          label: 'User Name'\n          input_attributes:\n            name: 'username'\n            placeholder: 'User Name'\n        form_group_input_div\n          input_id: 'input_password'\n          label: 'Password'\n          input_attributes:\n            name: 'password'\n            type: 'password'\n            placeholder: 'Type your password here....'\n        tc.button '.btn.btn-secondary', type:'submit', 'login'\n\nlogin_form = make_login_form()\n\nname_content_form = tc.renderable (model) ->\n  form_group_input_div\n    input_id: 'input_name'\n    label: 'Name'\n    input_attributes:\n      name: 'name'\n      placeholder: 'Name'\n  form_group_input_div\n    input_id: 'input_content'\n    input_type: tc.textarea\n    label: 'Content'\n    input_attributes:\n      name: 'content'\n      placeholder: '...'\n  tc.input '.btn.btn-secondary.btn-sm', type:'submit', value:'Add'\n\n########################################\nexport {\n  form_group_input_div\n  make_field_input\n  make_field_textarea\n  make_field_select\n  make_login_form\n  login_form\n  name_content_form\n  }\n  \n","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n","import tc from 'teacup'\n\n\n########################################\n# Button Templates\n########################################\nspanbutton = tc.component (selector, attrs, renderContents) ->\n  tc.span \"#{selector}.btn.btn-secondary.btn-sm\", renderContents\n\ndivbutton = tc.component (selector, attrs, renderContents) ->\n  tc.div \"#{selector}.btn.btn-secondary.btn-sm\", renderContents\n\nmodal_close_button = tc.renderable (label='Close', icon='close')->\n  tc.div '.btn.btn-secondary.btn-sm', 'data-dismiss': 'modal', ->\n    tc.h4 '.modal-title', ->\n      tc.i \".fa.fa-#{icon}\"\n      tc.text label\n\nnavbar_collapse_button  = tc.renderable (target) ->\n  tc.button '.navbar-toggle', type:'button', 'data-toggle':'collapse',\n  'data-target': \"##{target}\", ->\n    tc.span '.sr-only', 'Toggle Navigation'\n    tc.span '.icon-bar'\n    tc.span '.icon-bar'\n    tc.span '.icon-bar'\n\ndropdown_toggle = tc.component (selector, attrs, renderContents) ->\n  tc.a \"#{selector}.dropdown-toggle\", href:attrs.href,\n  'data-toggle':'dropdown', renderContents\n\nexport {\n  spanbutton\n  divbutton\n  modal_close_button\n  navbar_collapse_button\n  dropdown_toggle\n  }\n  \n","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\nMasonry = require 'masonry-layout'\nimagesLoaded = require 'imagesloaded'\n\nclass HasMasonryView extends Marionette.Behavior\n  options:\n    listContainer: '.list-container'\n    channel: 'global'\n    masonryOptions:\n      gutter: 1\n      isInitLayout: false\n      itemSelector: '.item'\n      columnWidth: 10\n      horizontalOrder: true\n  ui: ->\n    list: @getOption 'listContainer'\n  regions:\n    list: '@ui.list'\n    \n  setMasonry: ->\n    container = @getOption 'listContainer'\n    masonryOptions = @getOption 'masonryOptions'\n    @view.masonry = new Masonry container, masonryOptions\n    \n  setMasonryLayout: ->\n    masonryOptions = @getOption 'masonryOptions'\n    items = @$ masonryOptions.itemSelector\n    imagesLoaded items, =>\n      @view.masonry.reloadItems()\n      @view.masonry.layout()\n\n  onBeforeDestroy: ->\n    @view.masonry.destroy()\n    \n  onDomRefresh: () ->\n    @setMasonry()\n    @setMasonryLayout()\n    if @view?.afterDomRefresh\n      @view.afterDomRefresh()\n    \n  \nmodule.exports = HasMasonryView\n","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\n\n{ make_field_input\n  make_field_select } = require 'tbirds/templates/forms'\n{ modal_close_button } = require 'tbirds/templates/buttons'\n\nMainChannel = Backbone.Radio.channel 'global'\nMessageChannel = Backbone.Radio.channel 'messages'\nAppChannel = Backbone.Radio.channel 'ebcsv'\n\nBaseModalView = MainChannel.request 'main:app:BaseModalView'\n\nclass ImageModalView extends BaseModalView\n  template: tc.renderable (model) ->\n    main = model.mainsection\n    tc.div '.modal-dialog', ->\n      tc.div '.modal-content', ->\n        tc.div '.modal-body', ->\n          tc.img src: model.image_src\n        tc.div '.modal-footer', ->\n          tc.ul '.list-inline', ->\n            btnclass = 'btn.btn-default.btn-sm'\n            tc.li \"#close-modal\", ->\n              modal_close_button 'Close', 'check'\n\nclass HasImageModal extends Marionette.Behavior\n  onShowImageModal: ->\n    view = new ImageModalView\n      model: @view.model\n    MainChannel.request 'show-modal', view\n\n    \nmodule.exports = HasImageModal\n"],"sourceRoot":""}