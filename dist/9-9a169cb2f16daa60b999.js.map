{"version":3,"sources":["webpack:///./src/applets/bumblr/views/misc.coffee","webpack:///./node_modules/tbirds/src/lscollection.coffee","webpack:///./node_modules/tbirds/src/base-localstorage-model.coffee","webpack:///./src/applets/bumblr/dbchannel.coffee","webpack:///./src/applets/bumblr/controller.coffee","webpack:///./src/applets/bumblr/main.coffee","webpack:///./node_modules/backbone.lovefield/build/backbone.lovefield.js"],"names":["Backbone","BumblrDashboardView","MainBumblrView","bumblr_dashboard_view","main_bumblr_view","tc","__webpack_require__","Radio","channel","renderable","model","p","Marionette","View","template","module","exports","lscollection_coffee_BaseLocalStorageCollection","backbone_default","a","BaseLocalStorageCollection","Collection","[object Object]","this","fetch","on","save","docs","JSON","parse","localStorage","getItem","local_storage_key","set","collection","setItem","stringify","toJSON","console","warn","AppChannel","dbchannel_coffee_BaseTumblrModel","BlogInfo","dbchannel_coffee_BlogPosts","dbchannel_coffee_BumblrSettings","dbchannel_coffee_LocalBlogCollection","dbchannel_coffee_MainChannel","baseURL","consumer_key","dbConn","localBlogs","dbchannel_coffee_settings","controller_coffee_AppChannel","MiscViews","base_localstorage_model_coffee","backbone","id","attributes","options","jquery_default","ajax","success","error","removeItem","underscore_default","size","request","BlogPosts","backbone_paginator_default","blogName","apiKey","data","state","currentPage","dataType","response","total_posts","log","totalRecords","posts","mode","full","firstPage","pageSize","queryParams","offset","BaseTumblrModel","Model","BumblrSettings","reply","get","backbone_lovefield","LocalBlogCollection","name","siteName","add","done","main_coffee_AppChannel","main_coffee_Applet","main_coffee_Router","controller_coffee","controllers_coffee","title","text","setupLayoutIfNeeded","set_header","listBlogs","start","view","layout","showChildView","Object","scroll_top_fast_coffee","Promise","all","e","then","blogs","bind","catch","oe","blog_id","BlogPostListView","host","window","pix","getFirstPage","ConsumerKeyFormView","default","Router","backbone_marionette_default","AppRouter","appRoutes","bumblr","bumblr/settings","bumblr/dashboard","bumblr/listblogs","bumblr/viewblog/:id","bumblr/addblog","bumblr/viewpix/:id","Applet","tkapplet_coffee","blog_collection","isEmpty","forEach","blog","addBlog","onBeforeStart","arguments","Controller","appletEntries","label","menu","url","icon","__webpack_exports__","factory","__WEBPACK_EXTERNAL_MODULE_backbone__","__WEBPACK_EXTERNAL_MODULE_lovefield__","__WEBPACK_EXTERNAL_MODULE_underscore__","modules","installedModules","moduleId","i","l","call","m","c","d","getter","o","defineProperty","configurable","enumerable","r","value","n","__esModule","object","property","prototype","hasOwnProperty","s","./node_modules/webpack/buildin/global.js","g","Function","eval","./src/driver.coffee","backbone__WEBPACK_IMPORTED_MODULE_0__","backbone__WEBPACK_IMPORTED_MODULE_0___default","_sync__WEBPACK_IMPORTED_MODULE_1__","_store__WEBPACK_IMPORTED_MODULE_2__","ajaxSync","getSyncMethod","_utils__WEBPACK_IMPORTED_MODULE_3__","LoveStore","sync","forceAjaxSync","hasLoveStore","method","apply","./src/store.coffee","underscore__WEBPACK_IMPORTED_MODULE_0__","lovefield__WEBPACK_IMPORTED_MODULE_1__","lovefield__WEBPACK_IMPORTED_MODULE_1___default","_utils__WEBPACK_IMPORTED_MODULE_2__","conn","getSchema","table","row","_getTable","idAttribute","createRow","insert","into","values","exec","q","update","keys","key","where","eq","select","from","results","filters","clause","push","length","op","and","delete","./src/sync.coffee","underscore__WEBPACK_IMPORTED_MODULE_1__","errorMessage","resp","store","find","findAll","create","destroy","error1","code","message","fail","complete","./src/utils.coffee","global","guid","getLoveConnection","getTableName","getWindow","getLoveStore","s4","Math","random","toString","substring","0","lovefield","underscore"],"mappings":"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","file":"9-9a169cb2f16daa60b999.js","sourcesContent":["Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\n\n\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\n########################################\nmain_bumblr_view = tc.renderable (model) ->\n  tc.p 'main bumblr view'\n\nbumblr_dashboard_view = tc.renderable (model) ->\n  tc.p 'bumblr_dashboard_view'\n\n\n########################################\nclass MainBumblrView extends Backbone.Marionette.View\n  template: main_bumblr_view\n\nclass BumblrDashboardView extends Backbone.Marionette.View\n  template: bumblr_dashboard_view\n\nmodule.exports =\n  MainBumblrView: MainBumblrView\n  BumblrDashboardView: BumblrDashboardView\n","import $ from 'jquery'\nimport _ from 'underscore'\nimport Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\n\n\nMainChannel = Backbone.Radio.channel 'global'\nMessageChannel = Backbone.Radio.channel 'messages'\nResourceChannel = Backbone.Radio.channel 'resources'\n\n\nclass BaseLocalStorageCollection extends Backbone.Collection\n  local_storage_key: null\n  initialize: () ->\n    #console.log \"initialize DocumentCollection\"\n    @fetch()\n    @on 'change', @save, @\n    \n  fetch: () ->\n    #console.log 'fetching documents'\n    docs = JSON.parse(localStorage.getItem(@local_storage_key)) || []\n    @set docs\n\n  # FIXME!\n  save: (collection) ->\n    #console.log 'saving documents'\n    localStorage.setItem(@local_storage_key, JSON.stringify(@toJSON()))\n    \n  \n  \nexport {\n  BaseLocalStorageCollection\n  }  \n\n","import _ from 'underscore'\nimport $ from 'jquery'\nimport { Model } from 'backbone'\n\nconsole.warn \"Use a better model\"\n\nexport default class BaseLocalStorageModel extends Model\n  initialize: ->\n    @fetch()\n    @on 'change', @save, @\n  fetch: () ->\n    @set JSON.parse localStorage.getItem @id\n  save: (attributes, options) ->\n    localStorage.setItem(@id, JSON.stringify(@toJSON()))\n    return $.ajax\n      success: options.success\n      error: options.error\n  destroy: (options) ->\n    return localStorage.removeItem @id\n  isEmpty: () ->\n    return _.size @attributes <= 1\n\n    \n","import $ from 'jquery'\nimport Backbone from 'backbone'\nimport PageableCollection from 'backbone.paginator'\n\nimport { LoveStore } from 'backbone.lovefield'\nimport { BaseLocalStorageCollection } from 'tbirds/lscollection'\nimport BaseLocalStorageModel from 'tbirds/base-localstorage-model'\n\nMainChannel = Backbone.Radio.channel 'global'\nAppChannel = Backbone.Radio.channel 'bumblr'\n\ndbConn = MainChannel.request 'main:app:dbConn', 'bumblr'\nbaseURL = '//api.tumblr.com/v2'\n\nclass BlogPosts extends PageableCollection\n  mode: 'server'\n  full: true\n  baseURL: baseURL\n  url: ->\n    return \"#{@baseURL}/blog/#{@blogName}/posts/photo?api_key=#{@apiKey}\"\n\n  fetch: (options) ->\n    options || options = {}\n    data = (options.data || {})\n    currentPage = @state.currentPage\n    #offset = currentPage * @state.pageSize\n    #options.offset = offset\n    options.dataType = 'jsonp'\n    super options\n    \n  parse: (response) ->\n    console.log \"PARSE\", response\n    total_posts = response.response.total_posts\n    @state.totalRecords = total_posts\n    super response.response.posts\n  state:\n    firstPage: 0\n    pageSize: 15\n    \n  queryParams:\n    pageSize: 'limit'\n    offset: () ->\n      @state.currentPage * @state.pageSize\n    \nclass BaseTumblrModel extends Backbone.Model\n  baseURL: baseURL\n  \nclass BlogInfo extends BaseTumblrModel\n  url: () ->\n    \"#{@baseURL}/blog/#{@id}/info?api_key=#{@apiKey}&callback=?\"\n\nclass PhotoPostCollection extends Backbone.Collection\n  url: () ->\n    \"#{baseURL}/#{@id}/posts/photo?callback=?\"\n    \n\n\n\n\nclass BumblrSettings extends BaseLocalStorageModel\n  id: 'bumblr_settings'\n  \nsettings = new BumblrSettings()\nAppChannel.reply 'get_app_settings', ->\n  return settings\n\nconsumer_key = '4mhV8B1YQK6PUA2NW8eZZXVHjU55TPJ3UZnZGrbSoCnqJaxDyH'\nskey = settings.get 'consumer_key'\nif not skey\n  console.log \"saving initial app settings\"\n  settings.set 'consumer_key', consumer_key\n  settings.save()\n\n\nBlogStore = new LoveStore dbConn, 'Blog'\n\n\nclass LocalBlogCollection extends BaseLocalStorageCollection\n  model: BlogInfo\n  addBlog: (name) ->\n    siteName = \"#{name}.tumblr.com\"\n    atts =\n    model = new @model\n      id: siteName\n      name: name\n    model.apiKey = settings.get 'consumer_key'\n    @add model\n    r = model.fetch()\n    r.done =>\n      @save()\n    return model\n    \n\nAppChannel.reply 'make-blog-post-collection', (blogName) ->\n  apiKey = settings.get 'consumer_key'\n  posts = new BlogPosts\n  posts.apiKey = apiKey\n  posts.blogName = blogName\n  return posts\n\nAppChannel.reply 'make-pix-collection', (blogName) ->\n  apiKey = settings.get 'consumer_key'\n  posts = new BlogPosts\n  posts.state =\n    firstPage: 0\n    pageSize: 1\n  posts.apiKey = apiKey\n  posts.blogName = blogName\n  return posts\n  \nlocalBlogs = new LocalBlogCollection\n  apiKey: settings.get 'consumer_key'\nAppChannel.reply 'get-local-blogs', ->\n  return localBlogs\n  \n","import $ from 'jquery'\nimport Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport tc from 'teacup'\n\nimport scroll_top_fast from 'tbirds/util/scroll-top-fast'\nimport navigate_to_url from 'tbirds/util/navigate-to-url'\n\nimport { MainController } from 'tbirds/controllers'\nimport { ToolbarAppletLayout } from 'tbirds/views/layout'\n\nimport './dbchannel'\n\nMiscViews = require './views/misc'\n\nAppChannel = Backbone.Radio.channel 'bumblr'\n\n\nclass Controller extends MainController\n  set_header: (title) ->\n    header = $ '#header'\n    header.text title\n    \n  start: ->\n    #console.log 'bumblr start called'\n    @setupLayoutIfNeeded()\n    @set_header 'Bumblr'\n    @listBlogs()\n\n  default_view: ->\n    @start()\n    \n  show_mainview: () ->\n    view = new MiscViews.MainBumblrView\n    @layout.showChildView 'content', view\n    scroll_top_fast()\n    \n  showDashboard: () ->\n    view = new MiscViews.BumblrDashboardView\n    @layout.showChildView 'content', view\n    scroll_top_fast()\n      \n  listBlogs: () ->\n    @setupLayoutIfNeeded()\n    require.ensure [], () =>\n      blogs = AppChannel.request 'get-local-blogs'\n      SimpleBlogListView = require './views/bloglist'\n      view = new SimpleBlogListView\n        collection: blogs\n      @layout.showChildView 'content', view\n    # name the chunk\n    , 'bumblr-view-list-blogs'\n    \n  viewBlog: (blog_id) ->\n    #console.log 'view blog called for ' + blog_id\n    @setupLayoutIfNeeded()\n    require.ensure [], () =>\n      host = \"#{blog_id}.tumblr.com\"\n      collection = AppChannel.request 'make-blog-post-collection', host\n      BlogPostListView = require './views/postlist'\n      response = collection.fetch()\n      response.done =>\n        view = new BlogPostListView\n          collection: collection\n        @layout.showChildView 'content', view\n        scroll_top_fast()\n    # name the chunk\n    , 'bumblr-view-blog-view'\n    \n  viewBlogPix: (blog_id) ->\n    #console.log 'view blog called for ' + blog_id\n    @setupLayoutIfNeeded()\n    require.ensure [], () =>\n      host = \"#{blog_id}.tumblr.com\"\n      collection = AppChannel.request 'make-pix-collection', host\n      window.pix = collection\n      View = require './views/picview'\n      response = collection.getFirstPage()\n      response.done =>\n        view = new View\n          collection: collection\n        @layout.showChildView 'content', view\n        scroll_top_fast()\n    # name the chunk\n    , 'bumblr-view-blog-view'\n    \n  addNewBlog: () ->\n    @setupLayoutIfNeeded()\n    require.ensure [], () =>\n      NewBlogFormView = require './views/newblog'\n      view = new NewBlogFormView\n      @layout.showChildView 'content', view\n      scroll_top_fast()\n    # name the chunk\n    , 'bumblr-view-add-blog'\n    \n          \n  settingsPage: () ->\n    @setupLayoutIfNeeded()\n    require.ensure [], () =>\n      ConsumerKeyFormView = require('./views/settingsform').default\n      settings = AppChannel.request 'get_app_settings'\n      view = new ConsumerKeyFormView model:settings\n      @layout.showChildView 'content', view\n      scroll_top_fast()\n    # name the chunk\n    , 'bumblr-view-settings'\n    \nexport default Controller\n\n","import Marionette from 'backbone.marionette'\n\nimport TkApplet from 'tbirds/tkapplet'\n\nimport Controller from './controller'\n\nMainChannel = Backbone.Radio.channel 'global'\nAppChannel = Backbone.Radio.channel 'bumblr'\n\n\n\nclass Router extends Marionette.AppRouter\n  appRoutes:\n    'bumblr': 'start'\n    'bumblr/settings': 'settingsPage'\n    'bumblr/dashboard': 'showDashboard'\n    'bumblr/listblogs': 'listBlogs'\n    'bumblr/viewblog/:id': 'viewBlog'\n    'bumblr/addblog' : 'addNewBlog'\n    'bumblr/viewpix/:id': 'viewBlogPix'\n    \n\n\nclass Applet extends TkApplet\n  Controller: Controller\n  Router: Router\n\n  onBeforeStart: ->\n    blog_collection = AppChannel.request 'get-local-blogs'\n    # FIXME use better lscollection\n    blog_collection.fetch()\n    if blog_collection.isEmpty()\n      ['dutch-and-flemish-painters', 'gkar56', 'japanesesuburbia',\n      '8bitfuture', 'elfwud', 'hexeosis', 'pixel8or',\n      'necessary-disorder'].forEach (blog) ->\n        blog_collection.addBlog blog\n    super arguments\n  \n  appletEntries: [\n    {\n      label: \"Bumblr Menu\"\n      menu: [\n        {\n          label: 'List Blogs'\n          url: '#bumblr/listblogs'\n          icon: '.fa.fa-list'\n        }\n        {\n          label: 'Add Blog'\n          url: '#bumblr/addblog'\n          icon: '.fa.fa-plus'\n        }\n        {\n          label: 'Settings'\n          url: '#bumblr/settings'\n          icon: '.fa.fa-gear'\n        }\n      ]\n    }\n  ]\n\n\nexport default Applet\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"backbone\"), require(\"lovefield\"), require(\"underscore\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"backbone\", \"lovefield\", \"underscore\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Backbone.LoveField\"] = factory(require(\"backbone\"), require(\"lovefield\"), require(\"underscore\"));\n\telse\n\t\troot[\"Backbone.LoveField\"] = factory(root[\"Backbone\"], root[\"lf\"], root[\"_\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_backbone__, __WEBPACK_EXTERNAL_MODULE_lovefield__, __WEBPACK_EXTERNAL_MODULE_underscore__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./node_modules/webpack/buildin/global.js\":\n/*!***********************************!*\\\n  !*** (webpack)/buildin/global.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n\n/***/ \"./src/driver.coffee\":\n/*!***************************!*\\\n  !*** ./src/driver.coffee ***!\n  \\***************************/\n/*! exports provided: LoveStore */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"backbone\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _sync__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sync */ \"./src/sync.coffee\");\n/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./store */ \"./src/store.coffee\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"LoveStore\", function() { return _store__WEBPACK_IMPORTED_MODULE_2__[\"LoveStore\"]; });\n\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/utils.coffee\");\n\n/** Get the local or ajax sync call\n * @param {Model} model - Model to sync\n * @param {object} options - Options to pass, takes ajaxSync\n * @returns {function} The sync method that will be called\n */\nvar ajaxSync, getSyncMethod;\n\n\n\n\n\n\n\n\n\nbackbone__WEBPACK_IMPORTED_MODULE_0___default.a.LoveStore = _store__WEBPACK_IMPORTED_MODULE_2__[\"LoveStore\"];\n\najaxSync = backbone__WEBPACK_IMPORTED_MODULE_0___default.a.sync;\n\ngetSyncMethod = function(model, options = {}) {\n  var forceAjaxSync, hasLoveStore;\n  forceAjaxSync = options.ajaxSync;\n  hasLoveStore = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getLoveStore\"])(model);\n  if (!forceAjaxSync && hasLoveStore) {\n    return _sync__WEBPACK_IMPORTED_MODULE_1__[\"sync\"];\n  } else {\n    return ajaxSync;\n  }\n};\n\nbackbone__WEBPACK_IMPORTED_MODULE_0___default.a.sync = function(method, model, options) {\n  return getSyncMethod(model, options).apply(this, [method, model, options]);\n};\n\n\n\n\n/***/ }),\n\n/***/ \"./src/store.coffee\":\n/*!**************************!*\\\n  !*** ./src/store.coffee ***!\n  \\**************************/\n/*! exports provided: LoveStore */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LoveStore\", function() { return LoveStore; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"underscore\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lovefield__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lovefield */ \"lovefield\");\n/* harmony import */ var lovefield__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lovefield__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/utils.coffee\");\n\n\n\n\n\n\nvar LoveStore = class LoveStore {\n  constructor(conn, name = '') {\n    this.conn = conn;\n    this.name = name;\n    return;\n  }\n\n  _getTable() {\n    return this.conn.getSchema().table(this.name);\n  }\n\n  create(model) {\n    var data, row, table;\n    table = this._getTable();\n    if (!model.id && model.id !== 0) {\n      model.id = Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"guid\"])();\n      model.set(model.idAttribute, model.id);\n    }\n    data = model.toJSON();\n    row = table.createRow(data);\n    return this.conn.insert().into(table).values([row]).exec();\n  }\n\n  update(model) {\n    var data, q, table;\n    table = this._getTable();\n    data = model.toJSON();\n    q = this.conn.update(table);\n    Object.keys(data).forEach(function(key) {\n      return q = q.set(table[key], data[key]);\n    });\n    q = q.where(table.id.eq(data.id));\n    return q.exec();\n  }\n\n  find(model, options) {\n    var id, idAttribute, q, table;\n    table = this._getTable();\n    idAttribute = Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"result\"])(model, 'idAttribute');\n    id = Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"result\"])(model, idAttribute);\n    return q = this.conn.select().from(table).where(table.id.eq(id)).exec().then(function(results) {\n      model.set(results[0]);\n      return model;\n    });\n    return q;\n  }\n\n  findAll(model, options) {\n    var filters, q, table;\n    table = this._getTable();\n    q = this.conn.select().from(table);\n    if (options.data) {\n      filters = [];\n      Object.keys(options.data).forEach(function(key) {\n        var clause;\n        clause = table[key].eq(options.data[key]);\n        return filters.push(clause);\n      });\n      if (filters.length > 1) {\n        q = q.where(lovefield__WEBPACK_IMPORTED_MODULE_1___default.a.op.and(filters));\n      } else {\n        q = q.where(filters[0]);\n      }\n    }\n    return q.exec().then(function(results) {\n      if (model instanceof Backbone.Collection) {\n        return model.set(results);\n      } else {\n        // FIXME throw error if more\n        // than one result for model\n        return model.set(results[0]);\n      }\n    });\n  }\n\n  destroy(model, options) {\n    var table;\n    table = this._getTable();\n    return this.conn.delete().from(table).where(table.id.eq(model.id)).exec();\n  }\n\n};\n\n\n/***/ }),\n\n/***/ \"./src/sync.coffee\":\n/*!*************************!*\\\n  !*** ./src/sync.coffee ***!\n  \\*************************/\n/*! exports provided: sync */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sync\", function() { return sync; });\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"backbone\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"underscore\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/utils.coffee\");\n\n/** Get the Deferred status from $ if we have jQuery, otherwise use Backbone's\n *  @returns {boolean} - Whether the request was deferred\n */\nvar getDeferred;\n\n\n\n\n\n\n\ngetDeferred = function() {\n  if (backbone__WEBPACK_IMPORTED_MODULE_0___default.a.$) {\n    return Object(underscore__WEBPACK_IMPORTED_MODULE_1__[\"result\"])(backbone__WEBPACK_IMPORTED_MODULE_0___default.a.$, 'Deferred', false);\n  }\n  return Object(underscore__WEBPACK_IMPORTED_MODULE_1__[\"result\"])(backbone__WEBPACK_IMPORTED_MODULE_0___default.a, 'Deferred', false);\n};\n\n/** Override Backbone's `sync` method to run against localStorage\n * @param {string} method - One of read/create/update/delete\n * @param {Model} model - Backbone model to sync\n * @param {Object} options - Options object, use `ajaxSync: true` to run the\n *  operation against the server in which case, options will also be passed into\n *  `jQuery.ajax`\n * @returns {undefined}\n */\nvar sync = function(method, model, options = {}) {\n  var error, errorMessage, id, idAttribute, resp, store;\n  store = Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"getLoveStore\"])(model);\n  resp = void 0;\n  try {\n    switch (method) {\n      case 'read':\n        idAttribute = Object(underscore__WEBPACK_IMPORTED_MODULE_1__[\"result\"])(model, 'idAttribute');\n        id = Object(underscore__WEBPACK_IMPORTED_MODULE_1__[\"result\"])(model, idAttribute);\n        resp = id ? store.find(model, options) : store.findAll(model, options); //noqa\n        break;\n      case 'create':\n        resp = store.create(model, options);\n        break;\n      case 'patch':\n      case 'update':\n        resp = store.update(model, options);\n        break;\n      case 'delete':\n        resp = store.destroy(model, options);\n    }\n  } catch (error1) {\n    error = error1;\n    if (error.code === 22) {\n      errorMessage = 'Private browsing is unsupported';\n    } else {\n      errorMessage = error.message;\n    }\n  }\n  if (resp) {\n    // compatibility with $.ajax\n    resp.done = resp.then;\n    resp.fail = resp.catch;\n    if (options.success) {\n      options.success.call(model, resp, options);\n    }\n  } else {\n    errorMessage = errorMessage ? errorMessage : \"Record Not Found\";\n    if (options.error) {\n      options.error.call(model, errorMessage, options);\n    }\n  }\n  // add compatibility with $.ajax\n  // always execute callback for success and error\n  if (options.complete) {\n    options.complete.call(model, resp);\n  }\n  return resp;\n};\n\n\n/***/ }),\n\n/***/ \"./src/utils.coffee\":\n/*!**************************!*\\\n  !*** ./src/utils.coffee ***!\n  \\**************************/\n/*! exports provided: guid, getLoveConnection, getTableName, getWindow, getLoveStore */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"guid\", function() { return guid; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLoveConnection\", function() { return getLoveConnection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getTableName\", function() { return getTableName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getWindow\", function() { return getWindow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLoveStore\", function() { return getLoveStore; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"underscore\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\nvar s4;\n\n\n\ns4 = function() {\n  var rand;\n  rand = (1 + Math.random()) * 0x10000;\n  return (rand | 0).toString(16).substring(1);\n};\n\nvar guid = function() {\n  return `${s4()}${s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`;\n};\n\nvar getLoveConnection = function(model) {\n  var conn;\n  conn = Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"result\"])(model, 'loveConnection');\n  return conn || Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"result\"])(model.collection, 'loveConnection');\n};\n\nvar getTableName = function(model) {\n  var tableName;\n  tableName = Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"result\"])(model, 'tableName');\n  return tableName || Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"result\"])(model.collection, 'tableName');\n};\n\nvar getWindow = function() {\n  if (Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"isUndefined\"])(window)) {\n    return global;\n  } else {\n    return window;\n  }\n};\n\nvar getLoveStore = function(model) {\n  var store;\n  store = Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"result\"])(model, 'loveStore');\n  return store || Object(underscore__WEBPACK_IMPORTED_MODULE_0__[\"result\"])(model.collection, 'loveStore');\n};\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ 0:\n/*!*********************************!*\\\n  !*** multi ./src/driver.coffee ***!\n  \\*********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./src/driver.coffee */\"./src/driver.coffee\");\n\n\n/***/ }),\n\n/***/ \"backbone\":\n/*!**************************************************************************************************!*\\\n  !*** external {\"amd\":\"backbone\",\"commonjs\":\"backbone\",\"commonjs2\":\"backbone\",\"root\":\"Backbone\"} ***!\n  \\**************************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_backbone__;\n\n/***/ }),\n\n/***/ \"lovefield\":\n/*!***********************************************************************************************!*\\\n  !*** external {\"amd\":\"lovefield\",\"commonjs\":\"lovefield\",\"commonjs2\":\"lovefield\",\"root\":\"lf\"} ***!\n  \\***********************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_lovefield__;\n\n/***/ }),\n\n/***/ \"underscore\":\n/*!*************************************************************************************************!*\\\n  !*** external {\"amd\":\"underscore\",\"commonjs\":\"underscore\",\"commonjs2\":\"underscore\",\"root\":\"_\"} ***!\n  \\*************************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_underscore__;\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=backbone.lovefield.js.map"],"sourceRoot":""}