{"version":3,"sources":["webpack:///./src/applets/moviedb/controller.coffee","webpack:///./src/applets/moviedb/dbchannel/index.coffee","webpack:///./src/applets/moviedb/main.coffee"],"names":["AppChannel","__webpack_require__","backbone_default","a","Radio","channel","index_coffee_AppChannel","index_coffee_ConfigModel","index_coffee_SearchTvCollection","index_coffee_TvDetails","index_coffee_TvSeasonDetails","apiKey","cmodel","config","db","main_coffee_Applet","main_coffee_Router","appletMenu","controller_coffee","Controller","controllers_coffee","[object Object]","Collection","this","setupLayoutIfNeeded","request","Promise","all","e","then","view","collection","layout","showChildView","bind","catch","oe","id","TvDetails","model","console","log","View","fetch","data","append_to_response","done","scrollTop","layoutClass","layout_coffee","themoviedb_default","common","api_key","base_uri","images_uri","timeout","reply","ConfigModel","index_coffee","JSON","parse","localStorage","themoviedb_config","object","updated","Date","content","toJSON","setItem","stringify","SearchTvCollection","tv_coffee","TvSeasonDetails","button","label","url","icon","Router","backbone_marionette_default","AppRouter","appRoutes","moviedb","moviedb/tv/shows/view/:id","Applet","tkapplet_coffee","appletEntries","Object","capitalize_coffee","menu","__webpack_exports__"],"mappings":"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","file":"6-87276b07b63f34e4ba83.js","sourcesContent":["import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport tc from 'teacup'\nimport ms from 'ms'\n\nimport ToolbarView from 'tbirds/views/button-toolbar'\nimport { MainController } from 'tbirds/controllers'\nimport { ToolbarAppletLayout } from 'tbirds/views/layout'\nnavigate_to_url = require 'tbirds/util/navigate-to-url'\nscroll_top_fast = require 'tbirds/util/scroll-top-fast'\n\nMainChannel = Backbone.Radio.channel 'global'\nMessageChannel = Backbone.Radio.channel 'messages'\nResourceChannel = Backbone.Radio.channel 'resources'\nAppChannel = Backbone.Radio.channel 'moviedb'\n\nclass Controller extends MainController\n  layoutClass: ToolbarAppletLayout\n  view_index: ->\n    @setupLayoutIfNeeded()\n    Collection = AppChannel.request \"SearchTvCollection\"\n    require.ensure [], () =>\n      View = require './views/index-view.coffee'\n      view = new View\n        collection: new Collection\n      @layout.showChildView 'content', view\n    # name the chunk\n    , 'moviedb-view-index'\n    \n  viewTvShow: (id) ->\n    @setupLayoutIfNeeded()\n    TvDetails = AppChannel.request 'TvDetails'\n    model = new TvDetails\n      id: id\n    console.log \"MODEL\", model\n    require.ensure [], () =>\n      View = require './views/tvshow'\n      response = model.fetch\n        data:\n          append_to_response: 'images,externals'\n      response.done =>\n        view = new View\n          model: model\n        @layout.showChildView 'content', view\n        @scrollTop()\n    # name the chunk\n    , 'moviedb-view-tv-show'\n      \nexport default Controller\n\n","import Backbone from 'backbone'\nimport PageableCollection from 'backbone.paginator'\nimport {Configuration, TvSearch} from 'backbone.themoviedb/src'\n\nimport {\n  TvDetails as BaseTvDetails\n  TvSeasonDetails as BaseTvSeasonDetails\n  } from 'backbone.themoviedb/src/tv'\n\nimport theMovieDb from 'themoviedb-javascript-library'\n\ntheMovieDb.common.api_key = \"6c56481572fd1c226e63a946e759f3a6\"\ntheMovieDb.common.base_uri = \"https://api.themoviedb.org/3/\"\ntheMovieDb.common.images_uri = \"https://image.tmdb.org/t/p/\"\ntheMovieDb.common.timeout = 2000\n\nAppChannel = Backbone.Radio.channel 'moviedb'\n\nAppChannel.reply 'get-movie-db', ->\n  return theMovieDb\n\ndb = theMovieDb\n\n# https://stackoverflow.com/a/22519785/1869821\ngetTvPromise = (options) ->\n  return new Promise (resolve, reject) ->\n    db.search.getTv options, resolve, reject\n\ngetTv = (options) ->\n  d = Backbone.$.Deferred()\n  s = (res) ->\n    d.resolve res\n  r = (err) ->\n    d.reject err\n  db.search.getTv options, s, r\n  return d.promise()\n  \n\nbaseUri = \"https://api.themoviedb.org/3\"\napiKey = \"6c56481572fd1c226e63a946e759f3a6\"\n\nclass ConfigModel extends Configuration\n  apiKey: apiKey\n\nconfig = JSON.parse localStorage.themoviedb_config\nif not config\n  cmodel = new ConfigModel\n  r = cmodel.fetch()\n  r.done ->\n    object =\n      updated: new Date()\n      content: cmodel.toJSON()\n    localStorage.setItem 'themoviedb_config', JSON.stringify object\n    config = object\n\nAppChannel.reply 'get-moviedb-config', ->\n  return config\n  \n  \nclass SearchTvCollection extends TvSearch\n  apiKey: apiKey\n\nAppChannel.reply 'SearchTvCollection', ->\n  return SearchTvCollection\n\nclass TvDetails extends BaseTvDetails\n  apiKey: apiKey\n\nAppChannel.reply 'TvDetails', ->\n  return TvDetails\n\nclass TvSeasonDetails extends BaseTvSeasonDetails\n  apiKey: apiKey\n\nAppChannel.reply 'TvSeasonDetails', ->\n  return TvSeasonDetails\n  \n","import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport TkApplet from 'tbirds/tkapplet'\nimport capitalize from 'tbirds/util/capitalize'\n\nimport Controller from './controller'\nimport './dbchannel'\n\nappName = 'moviedb'\n\nMainChannel = Backbone.Radio.channel 'global'\nAppChannel = Backbone.Radio.channel appName\n\n\nappletMenu = [\n  {\n    button: '#list-button'\n    label: 'List'\n    url: '#moviedb'\n    icon: '.fa.fa-list'\n  }\n  {\n    button: '#calendar-button'\n    label: 'Calendar'\n    url: '#moviedb/calendar'\n    icon: '.fa.fa-calendar'\n  }\n  ]\n\nclass Router extends Marionette.AppRouter\n  appRoutes:\n    'moviedb': 'view_index'\n    'moviedb/tv/shows/view/:id': 'viewTvShow'\n    \nclass Applet extends TkApplet\n  Controller: Controller\n  Router: Router\n  appletEntries: [\n    {\n      label: \"#{capitalize appName} Menu\"\n      menu: appletMenu\n    }\n  ]\n\nexport default Applet\n"],"sourceRoot":""}