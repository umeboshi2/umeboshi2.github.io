{"version":3,"sources":["webpack:///./src/applets/frontdoor/controller.coffee","webpack:///./src/applets/frontdoor/main.coffee","webpack:///./node_modules/tbirds/src/util/scroll-top-fast.coffee","webpack:///./node_modules/tbirds/src/views/button-toolbar.coffee","webpack:///./node_modules/tbirds/src/views/layout.coffee","webpack:///./node_modules/tbirds/src/controllers.coffee","webpack:///./node_modules/tbirds/src/tkapplet.coffee","webpack:///./node_modules/tbirds/src/views/empty.coffee","webpack:///./node_modules/tbirds/src/regions/slidedown.coffee","webpack:///./node_modules/tbirds/src/behaviors/show-initial-empty.coffee"],"names":["AppChannel","DocChannel","MessageChannel","toolbarEntries","toolbarEntryCollection","__webpack_require__","backbone_default","a","Radio","channel","Collection","reply","main_coffee_Applet","main_coffee_Router","appletEntries","controller_coffee","Controller","controllers_coffee","[object Object]","toolbar","setupLayoutIfNeeded","button_toolbar_coffee","collection","this","layout","showChildView","viewIndex","doc","Promise","all","e","then","view","model","Object","scroll_top_fast_coffee","bind","catch","oe","name","response","request","fetch","done","_viewResource","fail","completed","viewPage","layoutClass","layout_coffee","id","label","url","icon","Router","backbone_marionette_default","AppRouter","appRoutes","","frontdoor","pages/:name","frontdoor/dbadmin","Applet","tkapplet_coffee","menu","__webpack_exports__","r","window","scrollTo","ToolbarEntryCollectionView","ToolbarEntryView","ToolbarView","default_entry_template","_util_navigate_to_url__WEBPACK_IMPORTED_MODULE_2__","teacup__WEBPACK_IMPORTED_MODULE_1___default","renderable","i","text","backbone_marionette__WEBPACK_IMPORTED_MODULE_0___default","View","tagName","attributes","class","triggers","click","modelEvents","change","CollectionView","template","options","entryTemplate","child","trigger","childView","className","get","div","regions","entries","el","BaseAppletLayout","NavbarChannel","ToolbarAppletLayout","make_sidebar_template","_regions_slidedown__WEBPACK_IMPORTED_MODULE_5__","backbone__WEBPACK_IMPORTED_MODULE_0___default","columns","size","position","teacup__WEBPACK_IMPORTED_MODULE_2___default","backbone_marionette__WEBPACK_IMPORTED_MODULE_1___default","reset","behaviors","ShowInitialEmptyContent","behaviorClass","_behaviors_show_initial_empty__WEBPACK_IMPORTED_MODULE_4__","SidebarAppletLayout","sidebar","content","region","slide_speed","ms__WEBPACK_IMPORTED_MODULE_3___default","BaseController","ExtraController","MainChannel","MainController","_util_scroll_top_fast__WEBPACK_IMPORTED_MODULE_5__","backbone__WEBPACK_IMPORTED_MODULE_1___default","backbone_marionette__WEBPACK_IMPORTED_MODULE_2___default","extend","init_page","scrollTop","scroll_top","console","warn","arguments","navigateToUrl","_util_navigate_to_url__WEBPACK_IMPORTED_MODULE_4__","navigate_to_url","_views_layout__WEBPACK_IMPORTED_MODULE_3__","_getAppletRegion","getView","getRegion","setupLayout","getOption","hasView","empty","applet","setupAppletEntries","show","isDestroyed","setup_layout_if_needed","_get_region","_getRegion","_show_view","vclass","_showView","_load_view","objname","_loadView","_isModelAbsent","isEmpty","keys","length","msg","channelName","initialize","appletName","mainController","router","controller","getChannel","TkApplet","marionette_toolkit__WEBPACK_IMPORTED_MODULE_2__","marionette_toolkit__WEBPACK_IMPORTED_MODULE_2___default","n","indexOf","App","set","method","ref","ref1","forEach","appRoute","isFrontdoorApplet","appConfig","startFrontdoorMethod","call","_extraRouters","initExtraRouters","routerClass","controllerClass","extraRouters","results","ropts","rtr","log","setExtraRouter","teacup__WEBPACK_IMPORTED_MODULE_2__","EmptyView","Marionette","h1","SlideDownRegion","backbone_marionette__WEBPACK_IMPORTED_MODULE_1__","Region","speed","$el","hide","html","slideDown","_views_empty__WEBPACK_IMPORTED_MODULE_3__","Behavior","emptyView"],"mappings":"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","file":"7-683a09918f21109c8011.js","sourcesContent":["import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport tc from 'teacup'\nimport ms from 'ms'\n\nimport ToolbarView from 'tbirds/views/button-toolbar'\nimport { MainController } from 'tbirds/controllers'\nimport { ToolbarAppletLayout } from 'tbirds/views/layout'\nnavigate_to_url = require 'tbirds/util/navigate-to-url'\nimport scroll_top_fast from 'tbirds/util/scroll-top-fast'\n\nMainChannel = Backbone.Radio.channel 'global'\nMessageChannel = Backbone.Radio.channel 'messages'\nDocChannel = Backbone.Radio.channel 'static-documents'\nResourceChannel = Backbone.Radio.channel 'resources'\nAppChannel = Backbone.Radio.channel 'todos'\n\ntoolbarEntries = []\n\ntoolbarEntryCollection = new Backbone.Collection toolbarEntries\nAppChannel.reply 'get-toolbar-entries', ->\n  toolbarEntryCollection\n\nclass Controller extends MainController\n  layoutClass: ToolbarAppletLayout\n  setupLayoutIfNeeded: ->\n    super()\n    toolbar = new ToolbarView\n      collection: toolbarEntryCollection\n    @layout.showChildView 'toolbar', toolbar\n    return\n    \n  start: ->\n    @viewIndex()\n    return\n    \n  _viewResource: (doc) ->\n    require.ensure [], () =>\n      View = require './views/index-view'\n      view = new View\n        model: doc\n      @layout.showChildView 'content', view\n      scroll_top_fast()\n    # name the chunk\n    , 'frontdoor-view-page'\n    \n  viewPage: (name) ->\n    @setupLayoutIfNeeded()\n    doc = DocChannel.request 'get-document', name\n    response = doc.fetch()\n    response.done =>\n      @_viewResource doc\n      return\n    response.fail ->\n      MessageChannel.request 'danger', 'Failed to get document'\n      return\n    return\n    \n  view_index: ->\n    @setupLayoutIfNeeded()\n    # https://jsperf.com/bool-to-int-many\n    completed = completed ^ 0\n  viewIndex: ->\n    #@setupLayoutIfNeeded()\n    @viewPage 'intro'\n    return\n\n  themeSwitcher: ->\n    @setupLayoutIfNeeded()\n    require.ensure [], () =>\n      View = require './views/theme-switch'\n      view = new View\n      @layout.showChildView 'content', view\n      scroll_top_fast()\n    # name the chunk\n    , 'frontdoor-view-switch-theme'\n    \n  viewDbAdmin: ->\n    @setupLayoutIfNeeded()\n    require.ensure [], () =>\n      View = require './views/idbview'\n      view = new View\n      @layout.showChildView 'content', view\n    # name the chunk\n    , 'frontdoor-view-dbadmin'\n    \n    \n    \nexport default Controller\n\n","import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport TkApplet from 'tbirds/tkapplet'\n\nimport Controller from './controller'\n\nMainChannel = Backbone.Radio.channel 'global'\nAppChannel = Backbone.Radio.channel 'frontdoor'\n\nappletEntries = [\n  {\n    id: 'dbadmin'\n    label: 'Db Admin'\n    url: '#frontdoor/dbadmin'\n    icon: '.fa.fa-database'\n  }\n]\n\nclass Router extends Marionette.AppRouter\n  appRoutes:\n    # handle empty route\n    '': 'viewIndex'\n    'frontdoor': 'viewIndex'\n    'pages/:name': 'viewPage'\n    'frontdoor/dbadmin': 'viewDbAdmin'\n    \nclass Applet extends TkApplet\n  Controller: Controller\n  Router: Router\n  appletEntries: [\n    {\n      label: 'Main Menu'\n      menu: appletEntries\n    }\n  ]\n  \nexport default Applet\n","# http://stackoverflow.com/questions/1144805/scroll-to-the-top-of-the-page-using-javascript-jquery\nexport default ()  ->\n  #$('html, body').animate {scrollTop: 0}, 'fast'\n  window.scrollTo 0,0\n","import Marionette from 'backbone.marionette'\nimport tc from 'teacup'\n\nimport navigate_to_url from '../util/navigate-to-url'\n\ndefault_entry_template = tc.renderable (model) ->\n  tc.i model.icon\n  tc.text \" \"\n  tc.text model.label\n  \nclass ToolbarEntryView extends Marionette.View\n  tagName: 'button'\n  attributes:\n    'class': 'btn btn-secondary'\n  triggers:\n    # we capture every click within the view\n    # we don't need ui hash\n    # https://gitter.im/marionettejs/backbone.marionette?at=59514dd876a757f808aa504f # noqa\n    click: 'button:clicked'\n  modelEvents:\n    change: 'render'\n    \nclass ToolbarEntryCollectionView extends Marionette.CollectionView\n  childView: ToolbarEntryView\n  childViewOptions: ->\n    template: @options.entryTemplate\n  className: 'btn-group btn-group-justified'\n  onChildviewButtonClicked: (child) ->\n    @trigger 'toolbar:entry:clicked', child\n    \nclass ToolbarView extends Marionette.View\n  template: tc.renderable () ->\n    tc.div '.toolbar-entries'\n  regions:\n    entries:\n      el: '.toolbar-entries'\n      #replaceElement: true\n  onRender: ->\n    entryTemplate = @options.entryTemplate or default_entry_template\n    view = new ToolbarEntryCollectionView\n      collection: @collection\n      entryTemplate: entryTemplate\n    @showChildView 'entries', view\n  onChildviewToolbarEntryClicked: (child) ->\n    navigate_to_url child.model.get 'url'\n    \n    \nexport default ToolbarView\n\n","import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport tc from 'teacup'\nimport ms from 'ms'\n\nimport ShowInitialEmptyContent from '../behaviors/show-initial-empty'\n\nimport SlideDownRegion from '../regions/slidedown'\n\nif __useCssModules__\n  require \"../../sass/applet-layout.scss\"\n\nNavbarChannel = Backbone.Radio.channel 'navbar'\n\nmake_sidebar_template = (columns=3, size='sm', position='left') ->\n  tc.renderable () ->\n    if position is 'left'\n      tc.div \"#sidebar.col-#{size}-#{columns}.left-column\"\n    tc.div \"#main-content.col-#{size}-#{12 - columns}\"\n    if position is 'right'\n      tc.div \"#sidebar.col-#{size}-#{columns}.right-column\"\n\n\nclass BaseAppletLayout extends Marionette.View\n  className: 'applet-container'\n  onBeforeDestroy: ->\n    entries = NavbarChannel.request 'get-entries', 'applet'\n    entries.reset()\n  behaviors:\n    ShowInitialEmptyContent:\n      behaviorClass: ShowInitialEmptyContent\n  \nclass SidebarAppletLayout extends BaseAppletLayout\n  template: make_sidebar_template()\n  regions:\n    sidebar: '#sidebar'\n    content: '#main-content'\n\nclass ToolbarAppletLayout extends BaseAppletLayout\n  #el: '#applet-content'\n  template: tc.renderable () ->\n    tc.div '.row', ->\n      #tc.div  '#main-toolbar.col-sm-8.col-sm-offset-2'\n      tc.div  '#main-toolbar'\n    tc.div '.row', ->\n      #tc.div '#main-content.col-sm-10.col-sm-offset-1'\n      tc.div '#main-content'\n  regions: ->\n    region = new SlideDownRegion\n      el: '#main-content'\n    region.slide_speed = ms '.01s'\n    content: region\n    toolbar: '#main-toolbar'\n    \nexport {\n  BaseAppletLayout\n  SidebarAppletLayout\n  ToolbarAppletLayout\n  }\n","import $ from 'jquery'\nimport Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\n\nimport { ToolbarAppletLayout } from './views/layout'\n\nimport navigate_to_url from './util/navigate-to-url'\nimport scroll_top_fast from './util/scroll-top-fast'\n\nMainChannel = Backbone.Radio.channel 'global'\nNavbarChannel = Backbone.Radio.channel 'navbar'\n\n#class BaseController extends Marionette.Object\nBaseController = Marionette.Object.extend\n  init_page: () ->\n    # do nothing\n  scrollTop: scroll_top_fast\n  scroll_top: ->\n    console.warn \"use scrollTop instead\"\n    @scrollTop arguments\n  navigateToUrl: navigate_to_url\n  navigate_to_url: ->\n    console.warn \"use navigateToUrl instead\"\n    @navigateToUrl arguments\n\n#class MainController extends BaseController\nMainController = BaseController.extend\n  layoutClass: ToolbarAppletLayout\n\n  _getAppletRegion: ->\n    app = MainChannel.request 'main:app:object'\n    return app.getView().getRegion 'applet'\n    \n  setupLayout: ->\n    layoutClass = @getOption 'layoutClass'\n    @layout = new layoutClass\n    region = @_getAppletRegion()\n    if region.hasView()\n      region.empty()\n    @applet.setupAppletEntries()\n    region.show @layout\n    return\n    \n  # use this method to create a layout only if\n  # needed, making routing within the applet\n  # more efficient.\n  setupLayoutIfNeeded: ->\n    if @layout is undefined\n      @setupLayout()\n    else if @layout.isDestroyed()\n      @setupLayout()\n    viewEntries = NavbarChannel.request 'get-entries', 'view'\n    viewEntries.reset()\n    return\n  \n  setup_layout_if_needed: ->\n    console.warn \"use setupLayoutIfNeeded instead\"\n    @setupLayoutIfNeeded()\n    return\n    \n  _get_region: (region) ->\n    console.warn \"use _getRegion instead\"\n    return @_getRegion(region)\n    \n  _show_view: (vclass, model) ->\n    console.warn \"use _showView instead\"\n    @_showView(vclass, model)\n\n  _load_view: (vclass, model, objname) ->\n    console.warn \"use _loadView instead\"\n    @_loadView(vclass, model, objname)\n\n  _getRegion: (region) ->\n    return @layout.getRegion region\n    \n  _showView: (vclass, model) ->\n    options = model: model\n    if model instanceof Backbone.Collection\n      options = collection: model\n    view = new vclass options\n    @layout.showChildView 'content', view\n    return\n    \n  _isModelAbsent: (model) ->\n    if model instanceof Backbone.Collection\n      return model.isEmpty()\n    # FIXME\n    # presume \"id\" is only attribute there if length is 1\n    return model.isEmpty() or Object.keys(model.attributes).length is 1\n    \n  _loadView: (vclass, model, objname) ->\n    if @_isModelAbsent(model)\n      response = model.fetch()\n      response.done =>\n        @_showView vclass, model\n        return\n      response.fail ->\n        msg = \"Failed to load #{objname} data.\"\n        MessageChannel.request 'danger', msg\n        return\n    else\n      @_showView vclass, model\n    return\n    \n#class ExtraController extends BaseController\nExtraController = BaseController.extend\n  channelName: ->\n    return @getOption('channelName') or 'global'\n  initialize: (options) ->\n    @appletName = options.appletName\n    @applet = MainChannel.request 'main:applet:get-applet', @appletName\n    @mainController = @applet.router.controller\n    @channel = @getChannel()\n    return\n  setup_layout_if_needed: ->\n    @mainController.setup_layout_if_needed()\n    return\n  showChildView: (region, view) ->\n    @mainController.layout.showChildView region, view\n    return\n    \n#module.exports =\n#  BaseController: BaseController\n#  MainController: MainController\n#  ExtraController: ExtraController\n\nexport {\n  BaseController\n  MainController\n  ExtraController\n  }\n  \n\n","import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport Toolkit from 'marionette.toolkit'\n\nMainChannel = Backbone.Radio.channel 'global'\nNavbarChannel = Backbone.Radio.channel 'navbar'\n\nclass TkApplet extends Toolkit.App\n  setupAppletEntries: ->\n    entries = NavbarChannel.request 'get-entries', 'applet'\n    entries.reset()\n    if @appletEntries\n      entries.set @appletEntries\n    viewEntries = NavbarChannel.request 'get-entries', 'view'\n    viewEntries.reset()\n  onBeforeStart: ->\n    @setupAppletEntries()\n    controller = new @Controller\n    controller.applet = @\n    @router = new @Router\n      controller: controller\n    if @?.appRoutes\n      appRoutes = @appRoutes?() or @appRoutes\n      Object.keys(appRoutes).forEach (r) =>\n        @router.appRoute r, appRoutes[r]\n    # we want to adjust the approuter for frontdoor\n    # use here, instead of in the AppRouter class,\n    # so hopefully, only one applet handles the \"empty route.\n    if @options?.isFrontdoorApplet\n      method = @options.appConfig?.startFrontdoorMethod or 'start'\n      unless '' in Object.keys @router.appRoutes\n        if __DEV__\n          console.warn \"Adding start to TkApplet\"\n        @router.appRoute '', method\n    @_extraRouters = {}\n    @initExtraRouters()\n  onStop: ->\n    if __DEV__\n      console.log \"Stopping TkApplet\", @.isRunning()\n  setExtraRouter: (name, routerClass, controllerClass) ->\n    c = new controllerClass\n    r = new routerClass\n      controller: c\n    @_extraRouters[name] = r\n  initExtraRouters: ->\n    extraRouters = @getOption 'extraRouters'\n    exRtrs = @getOption 'extraRouters'\n    for rtr of extraRouters\n      ropts = extraRouters[rtr]\n      console.log \"rtr\", rtr, ropts\n      @setExtraRouter rtr, ropts['router'], ropts['controller']\n      if __DEV__\n        console.log \"extra router #{rtr} created\"\n  getExtraRouter: (name) ->\n    @_extraRouters[name]\n    \n      \nexport default TkApplet\n\n","import Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\nimport tc from 'teacup'\n\nexport default class EmptyView extends Backbone.Marionette.View\n  template: tc.renderable ->\n    tc.div '.jumbotron', ->\n      tc.h1 ->\n        tc.text 'Loading ...'\n        tc.i '.fa.fa-spinner.fa-spin'\n    \n  \n","import $ from 'jquery'\nimport Marionette from 'backbone.marionette'\n\nclass SlideDownRegion extends Marionette.Region\n  attachHtml: (view) ->\n    speed = if @slide_speed then @slide_speed else 'fast'\n    @$el.hide()\n    @$el.html view.el\n    @$el.slideDown speed\n\nexport default SlideDownRegion\n","import { result } from 'underscore'\nimport Backbone from 'backbone'\nimport Marionette from 'backbone.marionette'\n\nMainChannel = Backbone.Radio.channel 'global'\n\nimport EmptyView from '../views/empty'\n\nexport default class ShowInitialEmptyContent extends Marionette.Behavior\n  options:\n    emptyView: EmptyView\n  onDomRefresh: ->\n    View = @getOption 'emptyView'\n    view = new View\n    @view.showChildView 'content', view\n"],"sourceRoot":""}